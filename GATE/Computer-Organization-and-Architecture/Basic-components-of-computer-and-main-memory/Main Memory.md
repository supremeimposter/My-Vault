---
pdf: 
module: 1
lecture: "2"
date: 2024-03-17T18:18:00
version:
  - COA-24
last-revision: 
notes-taken: false
tags:
  - ComputerOrganizationAndArchitecture/Memory
  - ComputerOrganizationAndArchitecture/SystemBus
---
# Main Memory

- Main memory is equally divided into small units called **cells**.
- Each cell is uniquely identified by a binary number called **address**.
- The standard representation of main memory is,
$$
\text{Number of cells} \times \text{size of each cell (in bits)}
$$
- The capacity of the cell is decided when manufacturing the hardware.
- If there are $k$ cells (or locations or addresses) in the main memory, then minimum $\log_{2}\,k$ bits are required to uniquely identify each cell (or location or address).

- A program (instructions and associated data) must be stored in main memory.
- Addresses are not stored physically anywhere in the main memory.

- A group of $n$-bits is called a **word**, where $n$ is the word length. 
- Word Length is a property of the CPU.

| Byte Addressable                        | Word Addressable                        |
| --------------------------------------- | --------------------------------------- |
| cell size = 8 bits                      | cell size = word length of CPU          |
| ![[Main Memory-20240317210126736.webp]] | ![[Main Memory-20240317210135659.webp]] |
| data is stored byte by byte             | data is stored word by word             |

- Size of Address (in bits) = Number of Address Lines
- Word length = Number of data lines

- Address of a multi-byte object is the lowest address of all bytes it contains.

- CPU does not care whether the memory is byte or word-addressable. If a CPU is a 32-bit processor (word length is 32 bits), then it expects 32 bits of data in a single fetch.

> [!NOTE] 
> Memory is byte-addressable by default and it is the best design.

- k-bit addressing means k bits are needed for specifying address of locations.

- Memory Address Register **MAR** is used to store the address generated by the CPU to access (read or write) the memory. MAR is connected to the address lines of the system bus via a [[Decoder|decoder]].

![[Main Memory and System Bus-20240720143403509.webp]]

- Memory Buffer Register **MBR** is connected to the data lines of the system bus. It contains the value to be stored in memory or the last value read from the memory. 

- The system bus is classified based on the type of information they carry.

![[System Bus-20240720122551531.webp]]

- On each line, only one bit travels at a time.

````col
```col-md
flexGrow=1
===
![[System Bus-20240319112721015.webp|320]]
```
```col-md
flexGrow=0.5
===
**Address Lines:**  
Unidirectional
---
**Data Lines: **
Bi-directional
---
**Control Lines:**
Partly Bi-directional
```
````

## Byte Ordering

- When the memory is byte-addressable and multi-byte primitive data is stored, then byte ordering (Endian-ness) comes into play.
- Endian-ness is a property of CPU (system). The data is ordered according to endian-ness only in the main memory.

> [!convention] 
> Big Endian - Start with the bigger end (higher byte)
> Small Endian - Start with the smaller end (lower byte)
> 
> ![[Main Memory-20240318115331778.webp]]
> 
> The most significant byte of the data is the bigger end of the data.
> 
> The least significant byte of the data is the smaller end of the data.

![[Main Memory-20240720183320090.webp]]

![[Main Memory-20240318101822147.webp]]

![[Main Memory-20240720220527440.webp]]

- In Byte ordering, the data is ordered by **byte** and not by bits. There is no endian-ness in 1-byte characters. They are stored as it is.
- Little Endian architecture starts with the least significant byte and Big Endian architecture starts with the most significant byte.

- Endian-ness property applies only to <mark class="hltr-red">multi-byte primitive</mark> data items. 
- Endian-ness does not apply to strings, arrays or structs.
- Endian-ness cannot change the order of an array. It only the changes the order of the multi-byte primitive data which are the elements inside the array.

> [!example] 
> Consider an integer array $a$ consisting of 4 integers
> 
> ![[Main Memory-20240720221521455.webp]]
> 
> Consider a character array $c$ consisting of 4 characters (each of 1 byte)
> 
> ![[Main Memory-20240720221818590.webp]]
> 
> Consider a struct 
> 
> ![[Main Memory-20240720222706514.webp]]


> [!question] When does Endian-ness matter to a programmer?
> 1. When you store a data as integer and read it later as a character, then endian-ness causes issue.
> 2. When you transfer data over bit-serial line, on transferring a single byte data, which one goes first, most significant bit or least significant bit.

---