"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const te=require("obsidian");/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ma(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Oe={},Un=[],Ut=()=>{},mu=()=>!1,Vr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Aa=e=>e.startsWith("onUpdate:"),nt=Object.assign,Oa=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},vu=Object.prototype.hasOwnProperty,Te=(e,t)=>vu.call(e,t),ge=Array.isArray,Ln=e=>Io(e)==="[object Map]",to=e=>Io(e)==="[object Set]",ul=e=>Io(e)==="[object Date]",_e=e=>typeof e=="function",Ke=e=>typeof e=="string",Wt=e=>typeof e=="symbol",Ye=e=>e!==null&&typeof e=="object",us=e=>(Ye(e)||_e(e))&&_e(e.then)&&_e(e.catch),ds=Object.prototype.toString,Io=e=>ds.call(e),hu=e=>Io(e).slice(8,-1),cs=e=>Io(e)==="[object Object]",Ta=e=>Ke(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,wo=Ma(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),xr=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},gu=/-(\w)/g,xt=xr(e=>e.replace(gu,(t,n)=>n?n.toUpperCase():"")),yu=/\B([A-Z])/g,wn=xr(e=>e.replace(yu,"-$1").toLowerCase()),jr=xr(e=>e.charAt(0).toUpperCase()+e.slice(1)),Xr=xr(e=>e?`on${jr(e)}`:""),bt=(e,t)=>!Object.is(e,t),sr=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},fs=(e,t,n,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:n})},vr=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let dl;const $r=()=>dl||(dl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function no(e){if(ge(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],r=Ke(o)?_u(o):no(o);if(r)for(const a in r)t[a]=r[a]}return t}else if(Ke(e)||Ye(e))return e}const bu=/;(?![^(]*\))/g,wu=/:([^]+)/,ku=/\/\*[^]*?\*\//g;function _u(e){const t={};return e.replace(ku,"").split(bu).forEach(n=>{if(n){const o=n.split(wu);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function kt(e){let t="";if(Ke(e))t=e;else if(ge(e))for(let n=0;n<e.length;n++){const o=kt(e[n]);o&&(t+=o+" ")}else if(Ye(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Cu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Du=Ma(Cu);function ps(e){return!!e||e===""}function Su(e,t){if(e.length!==t.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=Bo(e[o],t[o]);return n}function Bo(e,t){if(e===t)return!0;let n=ul(e),o=ul(t);if(n||o)return n&&o?e.getTime()===t.getTime():!1;if(n=Wt(e),o=Wt(t),n||o)return e===t;if(n=ge(e),o=ge(t),n||o)return n&&o?Su(e,t):!1;if(n=Ye(e),o=Ye(t),n||o){if(!n||!o)return!1;const r=Object.keys(e).length,a=Object.keys(t).length;if(r!==a)return!1;for(const l in e){const s=e.hasOwnProperty(l),i=t.hasOwnProperty(l);if(s&&!i||!s&&i||!Bo(e[l],t[l]))return!1}}return String(e)===String(t)}function Fa(e,t){return e.findIndex(n=>Bo(n,t))}const ms=e=>!!(e&&e.__v_isRef===!0),I=e=>Ke(e)?e:e==null?"":ge(e)||Ye(e)&&(e.toString===ds||!_e(e.toString))?ms(e)?I(e.value):JSON.stringify(e,vs,2):String(e),vs=(e,t)=>ms(t)?vs(e,t.value):Ln(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,r],a)=>(n[Zr(o,a)+" =>"]=r,n),{})}:to(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Zr(n))}:Wt(t)?Zr(t):Ye(t)&&!ge(t)&&!cs(t)?String(t):t,Zr=(e,t="")=>{var n;return Wt(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vt;class Vu{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=vt,!t&&vt&&(this.index=(vt.scopes||(vt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=vt;try{return vt=this,t()}finally{vt=n}}}on(){vt=this}off(){vt=this.parent}stop(t){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function hs(){return vt}function xu(e,t=!1){vt&&vt.cleanups.push(e)}let Re;const ea=new WeakSet;class gs{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,vt&&vt.active&&vt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ea.has(this)&&(ea.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||bs(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cl(this),ws(this);const t=Re,n=Lt;Re=this,Lt=!0;try{return this.fn()}finally{ks(this),Re=t,Lt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ia(t);this.deps=this.depsTail=void 0,cl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ea.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){va(this)&&this.run()}get dirty(){return va(this)}}let ys=0,ko,_o;function bs(e,t=!1){if(e.flags|=8,t){e.next=_o,_o=e;return}e.next=ko,ko=e}function Ea(){ys++}function Pa(){if(--ys>0)return;if(_o){let t=_o;for(_o=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;ko;){let t=ko;for(ko=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=n}}if(e)throw e}function ws(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function ks(e){let t,n=e.depsTail,o=n;for(;o;){const r=o.prevDep;o.version===-1?(o===n&&(n=r),Ia(o),ju(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=r}e.deps=t,e.depsTail=n}function va(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(_s(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function _s(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===$o))return;e.globalVersion=$o;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!va(e)){e.flags&=-3;return}const n=Re,o=Lt;Re=e,Lt=!0;try{ws(e);const r=e.fn(e._value);(t.version===0||bt(r,e._value))&&(e._value=r,t.version++)}catch(r){throw t.version++,r}finally{Re=n,Lt=o,ks(e),e.flags&=-3}}function Ia(e,t=!1){const{dep:n,prevSub:o,nextSub:r}=e;if(o&&(o.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=o,e.nextSub=void 0),n.subs===e&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)Ia(a,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function ju(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Lt=!0;const Cs=[];function kn(){Cs.push(Lt),Lt=!1}function _n(){const e=Cs.pop();Lt=e===void 0?!0:e}function cl(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Re;Re=void 0;try{t()}finally{Re=n}}}let $o=0;class $u{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Nr{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Re||!Lt||Re===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Re)n=this.activeLink=new $u(Re,this),Re.deps?(n.prevDep=Re.depsTail,Re.depsTail.nextDep=n,Re.depsTail=n):Re.deps=Re.depsTail=n,Ds(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=Re.depsTail,n.nextDep=void 0,Re.depsTail.nextDep=n,Re.depsTail=n,Re.deps===n&&(Re.deps=o)}return n}trigger(t){this.version++,$o++,this.notify(t)}notify(t){Ea();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Pa()}}}function Ds(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)Ds(o)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const hr=new WeakMap,Mn=Symbol(""),ha=Symbol(""),No=Symbol("");function at(e,t,n){if(Lt&&Re){let o=hr.get(e);o||hr.set(e,o=new Map);let r=o.get(n);r||(o.set(n,r=new Nr),r.map=o,r.key=n),r.track()}}function ln(e,t,n,o,r,a){const l=hr.get(e);if(!l){$o++;return}const s=i=>{i&&i.trigger()};if(Ea(),t==="clear")l.forEach(s);else{const i=ge(e),u=i&&Ta(n);if(i&&n==="length"){const c=Number(o);l.forEach((m,y)=>{(y==="length"||y===No||!Wt(y)&&y>=c)&&s(m)})}else switch((n!==void 0||l.has(void 0))&&s(l.get(n)),u&&s(l.get(No)),t){case"add":i?u&&s(l.get("length")):(s(l.get(Mn)),Ln(e)&&s(l.get(ha)));break;case"delete":i||(s(l.get(Mn)),Ln(e)&&s(l.get(ha)));break;case"set":Ln(e)&&s(l.get(Mn));break}}Pa()}function Nu(e,t){const n=hr.get(e);return n&&n.get(t)}function In(e){const t=Ae(e);return t===e?t:(at(t,"iterate",No),Et(e)?t:t.map(lt))}function Mr(e){return at(e=Ae(e),"iterate",No),e}const Mu={__proto__:null,[Symbol.iterator](){return ta(this,Symbol.iterator,lt)},concat(...e){return In(this).concat(...e.map(t=>ge(t)?In(t):t))},entries(){return ta(this,"entries",e=>(e[1]=lt(e[1]),e))},every(e,t){return nn(this,"every",e,t,void 0,arguments)},filter(e,t){return nn(this,"filter",e,t,n=>n.map(lt),arguments)},find(e,t){return nn(this,"find",e,t,lt,arguments)},findIndex(e,t){return nn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return nn(this,"findLast",e,t,lt,arguments)},findLastIndex(e,t){return nn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return nn(this,"forEach",e,t,void 0,arguments)},includes(...e){return na(this,"includes",e)},indexOf(...e){return na(this,"indexOf",e)},join(e){return In(this).join(e)},lastIndexOf(...e){return na(this,"lastIndexOf",e)},map(e,t){return nn(this,"map",e,t,void 0,arguments)},pop(){return uo(this,"pop")},push(...e){return uo(this,"push",e)},reduce(e,...t){return fl(this,"reduce",e,t)},reduceRight(e,...t){return fl(this,"reduceRight",e,t)},shift(){return uo(this,"shift")},some(e,t){return nn(this,"some",e,t,void 0,arguments)},splice(...e){return uo(this,"splice",e)},toReversed(){return In(this).toReversed()},toSorted(e){return In(this).toSorted(e)},toSpliced(...e){return In(this).toSpliced(...e)},unshift(...e){return uo(this,"unshift",e)},values(){return ta(this,"values",lt)}};function ta(e,t,n){const o=Mr(e),r=o[t]();return o!==e&&!Et(e)&&(r._next=r.next,r.next=()=>{const a=r._next();return a.value&&(a.value=n(a.value)),a}),r}const Au=Array.prototype;function nn(e,t,n,o,r,a){const l=Mr(e),s=l!==e&&!Et(e),i=l[t];if(i!==Au[t]){const m=i.apply(e,a);return s?lt(m):m}let u=n;l!==e&&(s?u=function(m,y){return n.call(this,lt(m),y,e)}:n.length>2&&(u=function(m,y){return n.call(this,m,y,e)}));const c=i.call(l,u,o);return s&&r?r(c):c}function fl(e,t,n,o){const r=Mr(e);let a=n;return r!==e&&(Et(e)?n.length>3&&(a=function(l,s,i){return n.call(this,l,s,i,e)}):a=function(l,s,i){return n.call(this,l,lt(s),i,e)}),r[t](a,...o)}function na(e,t,n){const o=Ae(e);at(o,"iterate",No);const r=o[t](...n);return(r===-1||r===!1)&&Ua(n[0])?(n[0]=Ae(n[0]),o[t](...n)):r}function uo(e,t,n=[]){kn(),Ea();const o=Ae(e)[t].apply(e,n);return Pa(),_n(),o}const Ou=Ma("__proto__,__v_isRef,__isVue"),Ss=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Wt));function Tu(e){Wt(e)||(e=String(e));const t=Ae(this);return at(t,"has",e),t.hasOwnProperty(e)}class Vs{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,o){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return a;if(n==="__v_raw")return o===(r?a?Wu:Ns:a?$s:js).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const l=ge(t);if(!r){let i;if(l&&(i=Mu[n]))return i;if(n==="hasOwnProperty")return Tu}const s=Reflect.get(t,n,ce(t)?t:o);return(Wt(n)?Ss.has(n):Ou(n))||(r||at(t,"get",n),a)?s:ce(s)?l&&Ta(n)?s:s.value:Ye(s)?r?Ra(s):An(s):s}}class xs extends Vs{constructor(t=!1){super(!1,t)}set(t,n,o,r){let a=t[n];if(!this._isShallow){const i=On(a);if(!Et(o)&&!On(o)&&(a=Ae(a),o=Ae(o)),!ge(t)&&ce(a)&&!ce(o))return i?!1:(a.value=o,!0)}const l=ge(t)&&Ta(n)?Number(n)<t.length:Te(t,n),s=Reflect.set(t,n,o,ce(t)?t:r);return t===Ae(r)&&(l?bt(o,a)&&ln(t,"set",n,o):ln(t,"add",n,o)),s}deleteProperty(t,n){const o=Te(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&o&&ln(t,"delete",n,void 0),r}has(t,n){const o=Reflect.has(t,n);return(!Wt(n)||!Ss.has(n))&&at(t,"has",n),o}ownKeys(t){return at(t,"iterate",ge(t)?"length":Mn),Reflect.ownKeys(t)}}class Fu extends Vs{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Eu=new xs,Pu=new Fu,Iu=new xs(!0);const ga=e=>e,Qo=e=>Reflect.getPrototypeOf(e);function Bu(e,t,n){return function(...o){const r=this.__v_raw,a=Ae(r),l=Ln(a),s=e==="entries"||e===Symbol.iterator&&l,i=e==="keys"&&l,u=r[e](...o),c=n?ga:t?ya:lt;return!t&&at(a,"iterate",i?ha:Mn),{next(){const{value:m,done:y}=u.next();return y?{value:m,done:y}:{value:s?[c(m[0]),c(m[1])]:c(m),done:y}},[Symbol.iterator](){return this}}}}function Xo(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ru(e,t){const n={get(r){const a=this.__v_raw,l=Ae(a),s=Ae(r);e||(bt(r,s)&&at(l,"get",r),at(l,"get",s));const{has:i}=Qo(l),u=t?ga:e?ya:lt;if(i.call(l,r))return u(a.get(r));if(i.call(l,s))return u(a.get(s));a!==l&&a.get(r)},get size(){const r=this.__v_raw;return!e&&at(Ae(r),"iterate",Mn),Reflect.get(r,"size",r)},has(r){const a=this.__v_raw,l=Ae(a),s=Ae(r);return e||(bt(r,s)&&at(l,"has",r),at(l,"has",s)),r===s?a.has(r):a.has(r)||a.has(s)},forEach(r,a){const l=this,s=l.__v_raw,i=Ae(s),u=t?ga:e?ya:lt;return!e&&at(i,"iterate",Mn),s.forEach((c,m)=>r.call(a,u(c),u(m),l))}};return nt(n,e?{add:Xo("add"),set:Xo("set"),delete:Xo("delete"),clear:Xo("clear")}:{add(r){!t&&!Et(r)&&!On(r)&&(r=Ae(r));const a=Ae(this);return Qo(a).has.call(a,r)||(a.add(r),ln(a,"add",r,r)),this},set(r,a){!t&&!Et(a)&&!On(a)&&(a=Ae(a));const l=Ae(this),{has:s,get:i}=Qo(l);let u=s.call(l,r);u||(r=Ae(r),u=s.call(l,r));const c=i.call(l,r);return l.set(r,a),u?bt(a,c)&&ln(l,"set",r,a):ln(l,"add",r,a),this},delete(r){const a=Ae(this),{has:l,get:s}=Qo(a);let i=l.call(a,r);i||(r=Ae(r),i=l.call(a,r)),s&&s.call(a,r);const u=a.delete(r);return i&&ln(a,"delete",r,void 0),u},clear(){const r=Ae(this),a=r.size!==0,l=r.clear();return a&&ln(r,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=Bu(r,e,t)}),n}function Ba(e,t){const n=Ru(e,t);return(o,r,a)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?o:Reflect.get(Te(n,r)&&r in o?n:o,r,a)}const Yu={get:Ba(!1,!1)},Uu={get:Ba(!1,!0)},Lu={get:Ba(!0,!1)};const js=new WeakMap,$s=new WeakMap,Ns=new WeakMap,Wu=new WeakMap;function Ju(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function qu(e){return e.__v_skip||!Object.isExtensible(e)?0:Ju(hu(e))}function An(e){return On(e)?e:Ya(e,!1,Eu,Yu,js)}function Hu(e){return Ya(e,!1,Iu,Uu,$s)}function Ra(e){return Ya(e,!0,Pu,Lu,Ns)}function Ya(e,t,n,o,r){if(!Ye(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=r.get(e);if(a)return a;const l=qu(e);if(l===0)return e;const s=new Proxy(e,l===2?o:n);return r.set(e,s),s}function Wn(e){return On(e)?Wn(e.__v_raw):!!(e&&e.__v_isReactive)}function On(e){return!!(e&&e.__v_isReadonly)}function Et(e){return!!(e&&e.__v_isShallow)}function Ua(e){return e?!!e.__v_raw:!1}function Ae(e){const t=e&&e.__v_raw;return t?Ae(t):e}function Ku(e){return!Te(e,"__v_skip")&&Object.isExtensible(e)&&fs(e,"__v_skip",!0),e}const lt=e=>Ye(e)?An(e):e,ya=e=>Ye(e)?Ra(e):e;function ce(e){return e?e.__v_isRef===!0:!1}function ie(e){return Ms(e,!1)}function La(e){return Ms(e,!0)}function Ms(e,t){return ce(e)?e:new zu(e,t)}class zu{constructor(t,n){this.dep=new Nr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Ae(t),this._value=n?t:lt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,o=this.__v_isShallow||Et(t)||On(t);t=o?t:Ae(t),bt(t,n)&&(this._rawValue=t,this._value=o?t:lt(t),this.dep.trigger())}}function b(e){return ce(e)?e.value:e}function We(e){return _e(e)?e():b(e)}const Gu={get:(e,t,n)=>t==="__v_raw"?e:b(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const r=e[t];return ce(r)&&!ce(n)?(r.value=n,!0):Reflect.set(e,t,n,o)}};function As(e){return Wn(e)?e:new Proxy(e,Gu)}class Qu{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new Nr,{get:o,set:r}=t(n.track.bind(n),n.trigger.bind(n));this._get=o,this._set=r}get value(){return this._value=this._get()}set value(t){this._set(t)}}function Xu(e){return new Qu(e)}class Zu{constructor(t,n,o){this._object=t,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Nu(Ae(this._object),this._key)}}class ed{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Qt(e,t,n){return ce(e)?e:_e(e)?new ed(e):Ye(e)&&arguments.length>1?td(e,t,n):ie(e)}function td(e,t,n){const o=e[t];return ce(o)?o:new Zu(e,t,n)}class nd{constructor(t,n,o){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Nr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=$o-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&Re!==this)return bs(this,!0),!0}get value(){const t=this.dep.track();return _s(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function od(e,t,n=!1){let o,r;return _e(e)?o=e:(o=e.get,r=e.set),new nd(o,r,n)}const Zo={},gr=new WeakMap;let Nn;function rd(e,t=!1,n=Nn){if(n){let o=gr.get(n);o||gr.set(n,o=[]),o.push(e)}}function ad(e,t,n=Oe){const{immediate:o,deep:r,once:a,scheduler:l,augmentJob:s,call:i}=n,u=M=>r?M:Et(M)||r===!1||r===0?sn(M,1):sn(M);let c,m,y,h,j=!1,C=!1;if(ce(e)?(m=()=>e.value,j=Et(e)):Wn(e)?(m=()=>u(e),j=!0):ge(e)?(C=!0,j=e.some(M=>Wn(M)||Et(M)),m=()=>e.map(M=>{if(ce(M))return M.value;if(Wn(M))return u(M);if(_e(M))return i?i(M,2):M()})):_e(e)?t?m=i?()=>i(e,2):e:m=()=>{if(y){kn();try{y()}finally{_n()}}const M=Nn;Nn=c;try{return i?i(e,3,[h]):e(h)}finally{Nn=M}}:m=Ut,t&&r){const M=m,A=r===!0?1/0:r;m=()=>sn(M(),A)}const $=hs(),F=()=>{c.stop(),$&&$.active&&Oa($.effects,c)};if(a&&t){const M=t;t=(...A)=>{M(...A),F()}}let R=C?new Array(e.length).fill(Zo):Zo;const ne=M=>{if(!(!(c.flags&1)||!c.dirty&&!M))if(t){const A=c.run();if(r||j||(C?A.some((ae,de)=>bt(ae,R[de])):bt(A,R))){y&&y();const ae=Nn;Nn=c;try{const de=[A,R===Zo?void 0:C&&R[0]===Zo?[]:R,h];i?i(t,3,de):t(...de),R=A}finally{Nn=ae}}}else c.run()};return s&&s(ne),c=new gs(m),c.scheduler=l?()=>l(ne,!1):ne,h=M=>rd(M,!1,c),y=c.onStop=()=>{const M=gr.get(c);if(M){if(i)i(M,4);else for(const A of M)A();gr.delete(c)}},t?o?ne(!0):R=c.run():l?l(ne.bind(null,!0),!0):c.run(),F.pause=c.pause.bind(c),F.resume=c.resume.bind(c),F.stop=F,F}function sn(e,t=1/0,n){if(t<=0||!Ye(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,ce(e))sn(e.value,t,n);else if(ge(e))for(let o=0;o<e.length;o++)sn(e[o],t,n);else if(to(e)||Ln(e))e.forEach(o=>{sn(o,t,n)});else if(cs(e)){for(const o in e)sn(e[o],t,n);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&sn(e[o],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ro(e,t,n,o){try{return o?e(...o):e()}catch(r){Ar(r,t,n)}}function Zt(e,t,n,o){if(_e(e)){const r=Ro(e,t,n,o);return r&&us(r)&&r.catch(a=>{Ar(a,t,n)}),r}if(ge(e)){const r=[];for(let a=0;a<e.length;a++)r.push(Zt(e[a],t,n,o));return r}}function Ar(e,t,n,o=!0){const r=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||Oe;if(t){let s=t.parent;const i=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const c=s.ec;if(c){for(let m=0;m<c.length;m++)if(c[m](e,i,u)===!1)return}s=s.parent}if(a){kn(),Ro(a,null,10,[e,i,u]),_n();return}}ld(e,n,r,o,l)}function ld(e,t,n,o=!0,r=!1){if(r)throw e;console.error(e)}const ht=[];let zt=-1;const Jn=[];let vn=null,Yn=0;const Os=Promise.resolve();let yr=null;function Dt(e){const t=yr||Os;return e?t.then(this?e.bind(this):e):t}function sd(e){let t=zt+1,n=ht.length;for(;t<n;){const o=t+n>>>1,r=ht[o],a=Mo(r);a<e||a===e&&r.flags&2?t=o+1:n=o}return t}function Wa(e){if(!(e.flags&1)){const t=Mo(e),n=ht[ht.length-1];!n||!(e.flags&2)&&t>=Mo(n)?ht.push(e):ht.splice(sd(t),0,e),e.flags|=1,Ts()}}function Ts(){yr||(yr=Os.then(Ps))}function Fs(e){ge(e)?Jn.push(...e):vn&&e.id===-1?vn.splice(Yn+1,0,e):e.flags&1||(Jn.push(e),e.flags|=1),Ts()}function pl(e,t,n=zt+1){for(;n<ht.length;n++){const o=ht[n];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;ht.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function Es(e){if(Jn.length){const t=[...new Set(Jn)].sort((n,o)=>Mo(n)-Mo(o));if(Jn.length=0,vn){vn.push(...t);return}for(vn=t,Yn=0;Yn<vn.length;Yn++){const n=vn[Yn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}vn=null,Yn=0}}const Mo=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ps(e){try{for(zt=0;zt<ht.length;zt++){const t=ht[zt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ro(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;zt<ht.length;zt++){const t=ht[zt];t&&(t.flags&=-2)}zt=-1,ht.length=0,Es(),yr=null,(ht.length||Jn.length)&&Ps()}}let Ze=null,Is=null;function br(e){const t=Ze;return Ze=e,Is=e&&e.type.__scopeId||null,t}function f(e,t=Ze,n){if(!t||e._n)return e;const o=(...r)=>{o._d&&Sl(-1);const a=br(t);let l;try{l=e(...r)}finally{br(a),o._d&&Sl(1)}return l};return o._n=!0,o._c=!0,o._d=!0,o}function Tn(e,t){if(Ze===null)return e;const n=Ir(Ze),o=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[a,l,s,i=Oe]=t[r];a&&(_e(a)&&(a={mounted:a,updated:a}),a.deep&&sn(l),o.push({dir:a,instance:n,value:l,oldValue:void 0,arg:s,modifiers:i}))}return e}function xn(e,t,n,o){const r=e.dirs,a=t&&t.dirs;for(let l=0;l<r.length;l++){const s=r[l];a&&(s.oldValue=a[l].value);let i=s.dir[o];i&&(kn(),Zt(i,n,8,[e.el,s,e,t]),_n())}}const Bs=Symbol("_vte"),id=e=>e.__isTeleport,Co=e=>e&&(e.disabled||e.disabled===""),ml=e=>e&&(e.defer||e.defer===""),vl=e=>typeof SVGElement<"u"&&e instanceof SVGElement,hl=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,ba=(e,t)=>{const n=e&&e.to;return Ke(n)?t?t(n):null:n},Rs={name:"Teleport",__isTeleport:!0,process(e,t,n,o,r,a,l,s,i,u){const{mc:c,pc:m,pbc:y,o:{insert:h,querySelector:j,createText:C,createComment:$}}=u,F=Co(t.props);let{shapeFlag:R,children:ne,dynamicChildren:M}=t;if(e==null){const A=t.el=C(""),ae=t.anchor=C("");h(A,n,o),h(ae,n,o);const de=(he,Ve)=>{R&16&&(r&&r.isCE&&(r.ce._teleportTarget=he),c(ne,he,Ve,r,a,l,s,i))},oe=()=>{const he=t.target=ba(t.props,j),Ve=Ys(he,t,C,h);he&&(l!=="svg"&&vl(he)?l="svg":l!=="mathml"&&hl(he)&&(l="mathml"),F||(de(he,Ve),ir(t,!1)))};F&&(de(n,ae),ir(t,!0)),ml(t.props)?mt(()=>{oe(),t.el.__isMounted=!0},a):oe()}else{if(ml(t.props)&&!e.el.__isMounted){mt(()=>{Rs.process(e,t,n,o,r,a,l,s,i,u),delete e.el.__isMounted},a);return}t.el=e.el,t.targetStart=e.targetStart;const A=t.anchor=e.anchor,ae=t.target=e.target,de=t.targetAnchor=e.targetAnchor,oe=Co(e.props),he=oe?n:ae,Ve=oe?A:de;if(l==="svg"||vl(ae)?l="svg":(l==="mathml"||hl(ae))&&(l="mathml"),M?(y(e.dynamicChildren,M,he,r,a,l,s),za(e,t,!0)):i||m(e,t,he,Ve,r,a,l,s,!1),F)oe?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):er(t,n,A,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const Ee=t.target=ba(t.props,j);Ee&&er(t,Ee,null,u,0)}else oe&&er(t,ae,de,u,1);ir(t,F)}},remove(e,t,n,{um:o,o:{remove:r}},a){const{shapeFlag:l,children:s,anchor:i,targetStart:u,targetAnchor:c,target:m,props:y}=e;if(m&&(r(u),r(c)),a&&r(i),l&16){const h=a||!Co(y);for(let j=0;j<s.length;j++){const C=s[j];o(C,t,n,h,!!C.dynamicChildren)}}},move:er,hydrate:ud};function er(e,t,n,{o:{insert:o},m:r},a=2){a===0&&o(e.targetAnchor,t,n);const{el:l,anchor:s,shapeFlag:i,children:u,props:c}=e,m=a===2;if(m&&o(l,t,n),(!m||Co(c))&&i&16)for(let y=0;y<u.length;y++)r(u[y],t,n,2);m&&o(s,t,n)}function ud(e,t,n,o,r,a,{o:{nextSibling:l,parentNode:s,querySelector:i,insert:u,createText:c}},m){const y=t.target=ba(t.props,i);if(y){const h=Co(t.props),j=y._lpa||y.firstChild;if(t.shapeFlag&16)if(h)t.anchor=m(l(e),t,s(e),n,o,r,a),t.targetStart=j,t.targetAnchor=j&&l(j);else{t.anchor=l(e);let C=j;for(;C;){if(C&&C.nodeType===8){if(C.data==="teleport start anchor")t.targetStart=C;else if(C.data==="teleport anchor"){t.targetAnchor=C,y._lpa=t.targetAnchor&&l(t.targetAnchor);break}}C=l(C)}t.targetAnchor||Ys(y,t,c,u),m(j&&l(j),t,y,n,o,r,a)}ir(t,h)}return t.anchor&&l(t.anchor)}const dd=Rs;function ir(e,t){const n=e.ctx;if(n&&n.ut){let o,r;for(t?(o=e.el,r=e.anchor):(o=e.targetStart,r=e.targetAnchor);o&&o!==r;)o.nodeType===1&&o.setAttribute("data-v-owner",n.uid),o=o.nextSibling;n.ut()}}function Ys(e,t,n,o){const r=t.targetStart=n(""),a=t.targetAnchor=n("");return r[Bs]=a,e&&(o(r,e),o(a,e)),a}function Ja(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ja(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function B(e,t){return _e(e)?nt({name:e.name},t,{setup:e}):e}function Us(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function wr(e,t,n,o,r=!1){if(ge(e)){e.forEach((j,C)=>wr(j,t&&(ge(t)?t[C]:t),n,o,r));return}if(qn(o)&&!r){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&wr(e,t,n,o.component.subTree);return}const a=o.shapeFlag&4?Ir(o.component):o.el,l=r?null:a,{i:s,r:i}=e,u=t&&t.r,c=s.refs===Oe?s.refs={}:s.refs,m=s.setupState,y=Ae(m),h=m===Oe?()=>!1:j=>Te(y,j);if(u!=null&&u!==i&&(Ke(u)?(c[u]=null,h(u)&&(m[u]=null)):ce(u)&&(u.value=null)),_e(i))Ro(i,s,12,[l,c]);else{const j=Ke(i),C=ce(i);if(j||C){const $=()=>{if(e.f){const F=j?h(i)?m[i]:c[i]:i.value;r?ge(F)&&Oa(F,a):ge(F)?F.includes(a)||F.push(a):j?(c[i]=[a],h(i)&&(m[i]=c[i])):(i.value=[a],e.k&&(c[e.k]=i.value))}else j?(c[i]=l,h(i)&&(m[i]=l)):C&&(i.value=l,e.k&&(c[e.k]=l))};l?($.id=-1,mt($,n)):$()}}}$r().requestIdleCallback;$r().cancelIdleCallback;const qn=e=>!!e.type.__asyncLoader,Ls=e=>e.type.__isKeepAlive;function cd(e,t){Ws(e,"a",t)}function fd(e,t){Ws(e,"da",t)}function Ws(e,t,n=et){const o=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Or(t,o,n),n){let r=n.parent;for(;r&&r.parent;)Ls(r.parent.vnode)&&pd(o,t,n,r),r=r.parent}}function pd(e,t,n,o){const r=Or(t,e,o,!0);Tr(()=>{Oa(o[t],r)},n)}function Or(e,t,n=et,o=!1){if(n){const r=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...l)=>{kn();const s=Uo(n),i=Zt(t,n,e,l);return s(),_n(),i});return o?r.unshift(a):r.push(a),a}}const mn=e=>(t,n=et)=>{(!Oo||e==="sp")&&Or(e,(...o)=>t(...o),n)},md=mn("bm"),_t=mn("m"),Js=mn("bu"),vd=mn("u"),qa=mn("bum"),Tr=mn("um"),hd=mn("sp"),gd=mn("rtg"),yd=mn("rtc");function bd(e,t=et){Or("ec",e,t)}const wd="components",qs=Symbol.for("v-ndc");function Yo(e){return Ke(e)?kd(wd,e,!1)||e:e||qs}function kd(e,t,n=!0,o=!1){const r=Ze||et;if(r){const a=r.type;{const s=lc(a,!1);if(s&&(s===t||s===xt(t)||s===jr(xt(t))))return a}const l=gl(r[e]||a[e],t)||gl(r.appContext[e],t);return!l&&o?a:l}}function gl(e,t){return e&&(e[t]||e[xt(t)]||e[jr(xt(t))])}function Ce(e,t,n,o){let r;const a=n,l=ge(e);if(l||Ke(e)){const s=l&&Wn(e);let i=!1;s&&(i=!Et(e),e=Mr(e)),r=new Array(e.length);for(let u=0,c=e.length;u<c;u++)r[u]=t(i?lt(e[u]):e[u],u,void 0,a)}else if(typeof e=="number"){r=new Array(e);for(let s=0;s<e;s++)r[s]=t(s+1,s,void 0,a)}else if(Ye(e))if(e[Symbol.iterator])r=Array.from(e,(s,i)=>t(s,i,void 0,a));else{const s=Object.keys(e);r=new Array(s.length);for(let i=0,u=s.length;i<u;i++){const c=s[i];r[i]=t(e[c],c,i,a)}}else r=[];return r}function ze(e,t,n={},o,r){if(Ze.ce||Ze.parent&&qn(Ze.parent)&&Ze.parent.ce)return t!=="default"&&(n.name=t),p(),E(W,null,[d("slot",n,o&&o())],64);let a=e[t];a&&a._c&&(a._d=!1),p();const l=a&&Hs(a(n)),s=n.key||l&&l.key,i=E(W,{key:(s&&!Wt(s)?s:`_${t}`)+(!l&&o?"_fb":"")},l||(o?o():[]),l&&e._===1?64:-2);return!r&&i.scopeId&&(i.slotScopeIds=[i.scopeId+"-s"]),a&&a._c&&(a._d=!0),i}function Hs(e){return e.some(t=>Ga(t)?!(t.type===bn||t.type===W&&!Hs(t.children)):!0)?e:null}const wa=e=>e?vi(e)?Ir(e):wa(e.parent):null,Do=nt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>wa(e.parent),$root:e=>wa(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>zs(e),$forceUpdate:e=>e.f||(e.f=()=>{Wa(e.update)}),$nextTick:e=>e.n||(e.n=Dt.bind(e.proxy)),$watch:e=>Ld.bind(e)}),oa=(e,t)=>e!==Oe&&!e.__isScriptSetup&&Te(e,t),_d={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:o,data:r,props:a,accessCache:l,type:s,appContext:i}=e;let u;if(t[0]!=="$"){const h=l[t];if(h!==void 0)switch(h){case 1:return o[t];case 2:return r[t];case 4:return n[t];case 3:return a[t]}else{if(oa(o,t))return l[t]=1,o[t];if(r!==Oe&&Te(r,t))return l[t]=2,r[t];if((u=e.propsOptions[0])&&Te(u,t))return l[t]=3,a[t];if(n!==Oe&&Te(n,t))return l[t]=4,n[t];ka&&(l[t]=0)}}const c=Do[t];let m,y;if(c)return t==="$attrs"&&at(e.attrs,"get",""),c(e);if((m=s.__cssModules)&&(m=m[t]))return m;if(n!==Oe&&Te(n,t))return l[t]=4,n[t];if(y=i.config.globalProperties,Te(y,t))return y[t]},set({_:e},t,n){const{data:o,setupState:r,ctx:a}=e;return oa(r,t)?(r[t]=n,!0):o!==Oe&&Te(o,t)?(o[t]=n,!0):Te(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:r,propsOptions:a}},l){let s;return!!n[l]||e!==Oe&&Te(e,l)||oa(t,l)||(s=a[0])&&Te(s,l)||Te(o,l)||Te(Do,l)||Te(r.config.globalProperties,l)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Te(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function kr(e){return ge(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function It(e,t){return!e||!t?e||t:ge(e)&&ge(t)?e.concat(t):nt({},kr(e),kr(t))}let ka=!0;function Cd(e){const t=zs(e),n=e.proxy,o=e.ctx;ka=!1,t.beforeCreate&&yl(t.beforeCreate,e,"bc");const{data:r,computed:a,methods:l,watch:s,provide:i,inject:u,created:c,beforeMount:m,mounted:y,beforeUpdate:h,updated:j,activated:C,deactivated:$,beforeDestroy:F,beforeUnmount:R,destroyed:ne,unmounted:M,render:A,renderTracked:ae,renderTriggered:de,errorCaptured:oe,serverPrefetch:he,expose:Ve,inheritAttrs:Ee,components:gt,directives:dt,filters:Qe}=t;if(u&&Dd(u,o,null),l)for(const ue in l){const H=l[ue];_e(H)&&(o[ue]=H.bind(n))}if(r){const ue=r.call(n,n);Ye(ue)&&(e.data=An(ue))}if(ka=!0,a)for(const ue in a){const H=a[ue],O=_e(H)?H.bind(n,n):_e(H.get)?H.get.bind(n,n):Ut,D=!_e(H)&&_e(H.set)?H.set.bind(n):Ut,K=g({get:O,set:D});Object.defineProperty(o,ue,{enumerable:!0,configurable:!0,get:()=>K.value,set:Be=>K.value=Be})}if(s)for(const ue in s)Ks(s[ue],o,n,ue);if(i){const ue=_e(i)?i.call(n):i;Reflect.ownKeys(ue).forEach(H=>{Ha(H,ue[H])})}c&&yl(c,e,"c");function z(ue,H){ge(H)?H.forEach(O=>ue(O.bind(n))):H&&ue(H.bind(n))}if(z(md,m),z(_t,y),z(Js,h),z(vd,j),z(cd,C),z(fd,$),z(bd,oe),z(yd,ae),z(gd,de),z(qa,R),z(Tr,M),z(hd,he),ge(Ve))if(Ve.length){const ue=e.exposed||(e.exposed={});Ve.forEach(H=>{Object.defineProperty(ue,H,{get:()=>n[H],set:O=>n[H]=O})})}else e.exposed||(e.exposed={});A&&e.render===Ut&&(e.render=A),Ee!=null&&(e.inheritAttrs=Ee),gt&&(e.components=gt),dt&&(e.directives=dt),he&&Us(e)}function Dd(e,t,n=Ut){ge(e)&&(e=_a(e));for(const o in e){const r=e[o];let a;Ye(r)?"default"in r?a=Kn(r.from||o,r.default,!0):a=Kn(r.from||o):a=Kn(r),ce(a)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):t[o]=a}}function yl(e,t,n){Zt(ge(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function Ks(e,t,n,o){let r=o.includes(".")?si(n,o):()=>n[o];if(Ke(e)){const a=t[e];_e(a)&&ut(r,a)}else if(_e(e))ut(r,e.bind(n));else if(Ye(e))if(ge(e))e.forEach(a=>Ks(a,t,n,o));else{const a=_e(e.handler)?e.handler.bind(n):t[e.handler];_e(a)&&ut(r,a,e)}}function zs(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:r,optionsCache:a,config:{optionMergeStrategies:l}}=e.appContext,s=a.get(t);let i;return s?i=s:!r.length&&!n&&!o?i=t:(i={},r.length&&r.forEach(u=>_r(i,u,l,!0)),_r(i,t,l)),Ye(t)&&a.set(t,i),i}function _r(e,t,n,o=!1){const{mixins:r,extends:a}=t;a&&_r(e,a,n,!0),r&&r.forEach(l=>_r(e,l,n,!0));for(const l in t)if(!(o&&l==="expose")){const s=Sd[l]||n&&n[l];e[l]=s?s(e[l],t[l]):t[l]}return e}const Sd={data:bl,props:wl,emits:wl,methods:go,computed:go,beforeCreate:pt,created:pt,beforeMount:pt,mounted:pt,beforeUpdate:pt,updated:pt,beforeDestroy:pt,beforeUnmount:pt,destroyed:pt,unmounted:pt,activated:pt,deactivated:pt,errorCaptured:pt,serverPrefetch:pt,components:go,directives:go,watch:xd,provide:bl,inject:Vd};function bl(e,t){return t?e?function(){return nt(_e(e)?e.call(this,this):e,_e(t)?t.call(this,this):t)}:t:e}function Vd(e,t){return go(_a(e),_a(t))}function _a(e){if(ge(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function pt(e,t){return e?[...new Set([].concat(e,t))]:t}function go(e,t){return e?nt(Object.create(null),e,t):t}function wl(e,t){return e?ge(e)&&ge(t)?[...new Set([...e,...t])]:nt(Object.create(null),kr(e),kr(t??{})):t}function xd(e,t){if(!e)return t;if(!t)return e;const n=nt(Object.create(null),e);for(const o in t)n[o]=pt(e[o],t[o]);return n}function Gs(){return{app:null,config:{isNativeTag:mu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jd=0;function $d(e,t){return function(o,r=null){_e(o)||(o=nt({},o)),r!=null&&!Ye(r)&&(r=null);const a=Gs(),l=new WeakSet,s=[];let i=!1;const u=a.app={_uid:jd++,_component:o,_props:r,_container:null,_context:a,_instance:null,version:ic,get config(){return a.config},set config(c){},use(c,...m){return l.has(c)||(c&&_e(c.install)?(l.add(c),c.install(u,...m)):_e(c)&&(l.add(c),c(u,...m))),u},mixin(c){return a.mixins.includes(c)||a.mixins.push(c),u},component(c,m){return m?(a.components[c]=m,u):a.components[c]},directive(c,m){return m?(a.directives[c]=m,u):a.directives[c]},mount(c,m,y){if(!i){const h=u._ceVNode||d(o,r);return h.appContext=a,y===!0?y="svg":y===!1&&(y=void 0),e(h,c,y),i=!0,u._container=c,c.__vue_app__=u,Ir(h.component)}},onUnmount(c){s.push(c)},unmount(){i&&(Zt(s,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,m){return a.provides[c]=m,u},runWithContext(c){const m=Hn;Hn=u;try{return c()}finally{Hn=m}}};return u}}let Hn=null;function Ha(e,t){if(et){let n=et.provides;const o=et.parent&&et.parent.provides;o===n&&(n=et.provides=Object.create(o)),n[e]=t}}function Kn(e,t,n=!1){const o=et||Ze;if(o||Hn){const r=Hn?Hn._context.provides:o?o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&_e(t)?t.call(o&&o.proxy):t}}const Qs={},Xs=()=>Object.create(Qs),Zs=e=>Object.getPrototypeOf(e)===Qs;function Nd(e,t,n,o=!1){const r={},a=Xs();e.propsDefaults=Object.create(null),ei(e,t,r,a);for(const l in e.propsOptions[0])l in r||(r[l]=void 0);n?e.props=o?r:Hu(r):e.type.props?e.props=r:e.props=a,e.attrs=a}function Md(e,t,n,o){const{props:r,attrs:a,vnode:{patchFlag:l}}=e,s=Ae(r),[i]=e.propsOptions;let u=!1;if((o||l>0)&&!(l&16)){if(l&8){const c=e.vnode.dynamicProps;for(let m=0;m<c.length;m++){let y=c[m];if(Er(e.emitsOptions,y))continue;const h=t[y];if(i)if(Te(a,y))h!==a[y]&&(a[y]=h,u=!0);else{const j=xt(y);r[j]=Ca(i,s,j,h,e,!1)}else h!==a[y]&&(a[y]=h,u=!0)}}}else{ei(e,t,r,a)&&(u=!0);let c;for(const m in s)(!t||!Te(t,m)&&((c=wn(m))===m||!Te(t,c)))&&(i?n&&(n[m]!==void 0||n[c]!==void 0)&&(r[m]=Ca(i,s,m,void 0,e,!0)):delete r[m]);if(a!==s)for(const m in a)(!t||!Te(t,m))&&(delete a[m],u=!0)}u&&ln(e.attrs,"set","")}function ei(e,t,n,o){const[r,a]=e.propsOptions;let l=!1,s;if(t)for(let i in t){if(wo(i))continue;const u=t[i];let c;r&&Te(r,c=xt(i))?!a||!a.includes(c)?n[c]=u:(s||(s={}))[c]=u:Er(e.emitsOptions,i)||(!(i in o)||u!==o[i])&&(o[i]=u,l=!0)}if(a){const i=Ae(n),u=s||Oe;for(let c=0;c<a.length;c++){const m=a[c];n[m]=Ca(r,i,m,u[m],e,!Te(u,m))}}return l}function Ca(e,t,n,o,r,a){const l=e[n];if(l!=null){const s=Te(l,"default");if(s&&o===void 0){const i=l.default;if(l.type!==Function&&!l.skipFactory&&_e(i)){const{propsDefaults:u}=r;if(n in u)o=u[n];else{const c=Uo(r);o=u[n]=i.call(null,t),c()}}else o=i;r.ce&&r.ce._setProp(n,o)}l[0]&&(a&&!s?o=!1:l[1]&&(o===""||o===wn(n))&&(o=!0))}return o}const Ad=new WeakMap;function ti(e,t,n=!1){const o=n?Ad:t.propsCache,r=o.get(e);if(r)return r;const a=e.props,l={},s=[];let i=!1;if(!_e(e)){const c=m=>{i=!0;const[y,h]=ti(m,t,!0);nt(l,y),h&&s.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!a&&!i)return Ye(e)&&o.set(e,Un),Un;if(ge(a))for(let c=0;c<a.length;c++){const m=xt(a[c]);kl(m)&&(l[m]=Oe)}else if(a)for(const c in a){const m=xt(c);if(kl(m)){const y=a[c],h=l[m]=ge(y)||_e(y)?{type:y}:nt({},y),j=h.type;let C=!1,$=!0;if(ge(j))for(let F=0;F<j.length;++F){const R=j[F],ne=_e(R)&&R.name;if(ne==="Boolean"){C=!0;break}else ne==="String"&&($=!1)}else C=_e(j)&&j.name==="Boolean";h[0]=C,h[1]=$,(C||Te(h,"default"))&&s.push(m)}}const u=[l,s];return Ye(e)&&o.set(e,u),u}function kl(e){return e[0]!=="$"&&!wo(e)}const ni=e=>e[0]==="_"||e==="$stable",Ka=e=>ge(e)?e.map(Gt):[Gt(e)],Od=(e,t,n)=>{if(t._n)return t;const o=f((...r)=>Ka(t(...r)),n);return o._c=!1,o},oi=(e,t,n)=>{const o=e._ctx;for(const r in e){if(ni(r))continue;const a=e[r];if(_e(a))t[r]=Od(r,a,o);else if(a!=null){const l=Ka(a);t[r]=()=>l}}},ri=(e,t)=>{const n=Ka(t);e.slots.default=()=>n},ai=(e,t,n)=>{for(const o in t)(n||o!=="_")&&(e[o]=t[o])},Td=(e,t,n)=>{const o=e.slots=Xs();if(e.vnode.shapeFlag&32){const r=t._;r?(ai(o,t,n),n&&fs(o,"_",r,!0)):oi(t,o)}else t&&ri(e,t)},Fd=(e,t,n)=>{const{vnode:o,slots:r}=e;let a=!0,l=Oe;if(o.shapeFlag&32){const s=t._;s?n&&s===1?a=!1:ai(r,t,n):(a=!t.$stable,oi(t,r)),l=t}else t&&(ri(e,t),l={default:1});if(a)for(const s in r)!ni(s)&&l[s]==null&&delete r[s]},mt=zd;function Ed(e){return Pd(e)}function Pd(e,t){const n=$r();n.__VUE__=!0;const{insert:o,remove:r,patchProp:a,createElement:l,createText:s,createComment:i,setText:u,setElementText:c,parentNode:m,nextSibling:y,setScopeId:h=Ut,insertStaticContent:j}=e,C=(w,S,T,J=null,Y=null,L=null,Z=void 0,G=null,X=!!S.dynamicChildren)=>{if(w===S)return;w&&!co(w,S)&&(J=Ct(w),Be(w,Y,L,!0),w=null),S.patchFlag===-2&&(X=!1,S.dynamicChildren=null);const{type:q,ref:me,shapeFlag:re}=S;switch(q){case Pr:$(w,S,T,J);break;case bn:F(w,S,T,J);break;case So:w==null&&R(S,T,J,Z);break;case W:gt(w,S,T,J,Y,L,Z,G,X);break;default:re&1?A(w,S,T,J,Y,L,Z,G,X):re&6?dt(w,S,T,J,Y,L,Z,G,X):(re&64||re&128)&&q.process(w,S,T,J,Y,L,Z,G,X,tn)}me!=null&&Y&&wr(me,w&&w.ref,L,S||w,!S)},$=(w,S,T,J)=>{if(w==null)o(S.el=s(S.children),T,J);else{const Y=S.el=w.el;S.children!==w.children&&u(Y,S.children)}},F=(w,S,T,J)=>{w==null?o(S.el=i(S.children||""),T,J):S.el=w.el},R=(w,S,T,J)=>{[w.el,w.anchor]=j(w.children,S,T,J,w.el,w.anchor)},ne=({el:w,anchor:S},T,J)=>{let Y;for(;w&&w!==S;)Y=y(w),o(w,T,J),w=Y;o(S,T,J)},M=({el:w,anchor:S})=>{let T;for(;w&&w!==S;)T=y(w),r(w),w=T;r(S)},A=(w,S,T,J,Y,L,Z,G,X)=>{S.type==="svg"?Z="svg":S.type==="math"&&(Z="mathml"),w==null?ae(S,T,J,Y,L,Z,G,X):he(w,S,Y,L,Z,G,X)},ae=(w,S,T,J,Y,L,Z,G)=>{let X,q;const{props:me,shapeFlag:re,transition:pe,dirs:be}=w;if(X=w.el=l(w.type,L,me&&me.is,me),re&8?c(X,w.children):re&16&&oe(w.children,X,null,J,Y,ra(w,L),Z,G),be&&xn(w,null,J,"created"),de(X,w,w.scopeId,Z,J),me){for(const Ie in me)Ie!=="value"&&!wo(Ie)&&a(X,Ie,null,me[Ie],L,J);"value"in me&&a(X,"value",null,me.value,L),(q=me.onVnodeBeforeMount)&&Ht(q,J,w)}be&&xn(w,null,J,"beforeMount");const je=Id(Y,pe);je&&pe.beforeEnter(X),o(X,S,T),((q=me&&me.onVnodeMounted)||je||be)&&mt(()=>{q&&Ht(q,J,w),je&&pe.enter(X),be&&xn(w,null,J,"mounted")},Y)},de=(w,S,T,J,Y)=>{if(T&&h(w,T),J)for(let L=0;L<J.length;L++)h(w,J[L]);if(Y){let L=Y.subTree;if(S===L||di(L.type)&&(L.ssContent===S||L.ssFallback===S)){const Z=Y.vnode;de(w,Z,Z.scopeId,Z.slotScopeIds,Y.parent)}}},oe=(w,S,T,J,Y,L,Z,G,X=0)=>{for(let q=X;q<w.length;q++){const me=w[q]=G?hn(w[q]):Gt(w[q]);C(null,me,S,T,J,Y,L,Z,G)}},he=(w,S,T,J,Y,L,Z)=>{const G=S.el=w.el;let{patchFlag:X,dynamicChildren:q,dirs:me}=S;X|=w.patchFlag&16;const re=w.props||Oe,pe=S.props||Oe;let be;if(T&&jn(T,!1),(be=pe.onVnodeBeforeUpdate)&&Ht(be,T,S,w),me&&xn(S,w,T,"beforeUpdate"),T&&jn(T,!0),(re.innerHTML&&pe.innerHTML==null||re.textContent&&pe.textContent==null)&&c(G,""),q?Ve(w.dynamicChildren,q,G,T,J,ra(S,Y),L):Z||H(w,S,G,null,T,J,ra(S,Y),L,!1),X>0){if(X&16)Ee(G,re,pe,T,Y);else if(X&2&&re.class!==pe.class&&a(G,"class",null,pe.class,Y),X&4&&a(G,"style",re.style,pe.style,Y),X&8){const je=S.dynamicProps;for(let Ie=0;Ie<je.length;Ie++){const Me=je[Ie],x=re[Me],V=pe[Me];(V!==x||Me==="value")&&a(G,Me,x,V,Y,T)}}X&1&&w.children!==S.children&&c(G,S.children)}else!Z&&q==null&&Ee(G,re,pe,T,Y);((be=pe.onVnodeUpdated)||me)&&mt(()=>{be&&Ht(be,T,S,w),me&&xn(S,w,T,"updated")},J)},Ve=(w,S,T,J,Y,L,Z)=>{for(let G=0;G<S.length;G++){const X=w[G],q=S[G],me=X.el&&(X.type===W||!co(X,q)||X.shapeFlag&70)?m(X.el):T;C(X,q,me,null,J,Y,L,Z,!0)}},Ee=(w,S,T,J,Y)=>{if(S!==T){if(S!==Oe)for(const L in S)!wo(L)&&!(L in T)&&a(w,L,S[L],null,Y,J);for(const L in T){if(wo(L))continue;const Z=T[L],G=S[L];Z!==G&&L!=="value"&&a(w,L,G,Z,Y,J)}"value"in T&&a(w,"value",S.value,T.value,Y)}},gt=(w,S,T,J,Y,L,Z,G,X)=>{const q=S.el=w?w.el:s(""),me=S.anchor=w?w.anchor:s("");let{patchFlag:re,dynamicChildren:pe,slotScopeIds:be}=S;be&&(G=G?G.concat(be):be),w==null?(o(q,T,J),o(me,T,J),oe(S.children||[],T,me,Y,L,Z,G,X)):re>0&&re&64&&pe&&w.dynamicChildren?(Ve(w.dynamicChildren,pe,T,Y,L,Z,G),(S.key!=null||Y&&S===Y.subTree)&&za(w,S,!0)):H(w,S,T,me,Y,L,Z,G,X)},dt=(w,S,T,J,Y,L,Z,G,X)=>{S.slotScopeIds=G,w==null?S.shapeFlag&512?Y.ctx.activate(S,T,J,Z,X):Qe(S,T,J,Y,L,Z,X):Pe(w,S,X)},Qe=(w,S,T,J,Y,L,Z)=>{const G=w.component=tc(w,J,Y);if(Ls(w)&&(G.ctx.renderer=tn),nc(G,!1,Z),G.asyncDep){if(Y&&Y.registerDep(G,z,Z),!w.el){const X=G.subTree=d(bn);F(null,X,S,T)}}else z(G,w,S,T,Y,L,Z)},Pe=(w,S,T)=>{const J=S.component=w.component;if(Hd(w,S,T))if(J.asyncDep&&!J.asyncResolved){ue(J,S,T);return}else J.next=S,J.update();else S.el=w.el,J.vnode=S},z=(w,S,T,J,Y,L,Z)=>{const G=()=>{if(w.isMounted){let{next:re,bu:pe,u:be,parent:je,vnode:Ie}=w;{const ee=li(w);if(ee){re&&(re.el=Ie.el,ue(w,re,Z)),ee.asyncDep.then(()=>{w.isUnmounted||G()});return}}let Me=re,x;jn(w,!1),re?(re.el=Ie.el,ue(w,re,Z)):re=Ie,pe&&sr(pe),(x=re.props&&re.props.onVnodeBeforeUpdate)&&Ht(x,je,re,Ie),jn(w,!0);const V=Cl(w),P=w.subTree;w.subTree=V,C(P,V,m(P.el),Ct(P),w,Y,L),re.el=V.el,Me===null&&Kd(w,V.el),be&&mt(be,Y),(x=re.props&&re.props.onVnodeUpdated)&&mt(()=>Ht(x,je,re,Ie),Y)}else{let re;const{el:pe,props:be}=S,{bm:je,m:Ie,parent:Me,root:x,type:V}=w,P=qn(S);jn(w,!1),je&&sr(je),!P&&(re=be&&be.onVnodeBeforeMount)&&Ht(re,Me,S),jn(w,!0);{x.ce&&x.ce._injectChildStyle(V);const ee=w.subTree=Cl(w);C(null,ee,T,J,w,Y,L),S.el=ee.el}if(Ie&&mt(Ie,Y),!P&&(re=be&&be.onVnodeMounted)){const ee=S;mt(()=>Ht(re,Me,ee),Y)}(S.shapeFlag&256||Me&&qn(Me.vnode)&&Me.vnode.shapeFlag&256)&&w.a&&mt(w.a,Y),w.isMounted=!0,S=T=J=null}};w.scope.on();const X=w.effect=new gs(G);w.scope.off();const q=w.update=X.run.bind(X),me=w.job=X.runIfDirty.bind(X);me.i=w,me.id=w.uid,X.scheduler=()=>Wa(me),jn(w,!0),q()},ue=(w,S,T)=>{S.component=w;const J=w.vnode.props;w.vnode=S,w.next=null,Md(w,S.props,J,T),Fd(w,S.children,T),kn(),pl(w),_n()},H=(w,S,T,J,Y,L,Z,G,X=!1)=>{const q=w&&w.children,me=w?w.shapeFlag:0,re=S.children,{patchFlag:pe,shapeFlag:be}=S;if(pe>0){if(pe&128){D(q,re,T,J,Y,L,Z,G,X);return}else if(pe&256){O(q,re,T,J,Y,L,Z,G,X);return}}be&8?(me&16&&ft(q,Y,L),re!==q&&c(T,re)):me&16?be&16?D(q,re,T,J,Y,L,Z,G,X):ft(q,Y,L,!0):(me&8&&c(T,""),be&16&&oe(re,T,J,Y,L,Z,G,X))},O=(w,S,T,J,Y,L,Z,G,X)=>{w=w||Un,S=S||Un;const q=w.length,me=S.length,re=Math.min(q,me);let pe;for(pe=0;pe<re;pe++){const be=S[pe]=X?hn(S[pe]):Gt(S[pe]);C(w[pe],be,T,null,Y,L,Z,G,X)}q>me?ft(w,Y,L,!0,!1,re):oe(S,T,J,Y,L,Z,G,X,re)},D=(w,S,T,J,Y,L,Z,G,X)=>{let q=0;const me=S.length;let re=w.length-1,pe=me-1;for(;q<=re&&q<=pe;){const be=w[q],je=S[q]=X?hn(S[q]):Gt(S[q]);if(co(be,je))C(be,je,T,null,Y,L,Z,G,X);else break;q++}for(;q<=re&&q<=pe;){const be=w[re],je=S[pe]=X?hn(S[pe]):Gt(S[pe]);if(co(be,je))C(be,je,T,null,Y,L,Z,G,X);else break;re--,pe--}if(q>re){if(q<=pe){const be=pe+1,je=be<me?S[be].el:J;for(;q<=pe;)C(null,S[q]=X?hn(S[q]):Gt(S[q]),T,je,Y,L,Z,G,X),q++}}else if(q>pe)for(;q<=re;)Be(w[q],Y,L,!0),q++;else{const be=q,je=q,Ie=new Map;for(q=je;q<=pe;q++){const le=S[q]=X?hn(S[q]):Gt(S[q]);le.key!=null&&Ie.set(le.key,q)}let Me,x=0;const V=pe-je+1;let P=!1,ee=0;const fe=new Array(V);for(q=0;q<V;q++)fe[q]=0;for(q=be;q<=re;q++){const le=w[q];if(x>=V){Be(le,Y,L,!0);continue}let $e;if(le.key!=null)$e=Ie.get(le.key);else for(Me=je;Me<=pe;Me++)if(fe[Me-je]===0&&co(le,S[Me])){$e=Me;break}$e===void 0?Be(le,Y,L,!0):(fe[$e-je]=q+1,$e>=ee?ee=$e:P=!0,C(le,S[$e],T,null,Y,L,Z,G,X),x++)}const De=P?Bd(fe):Un;for(Me=De.length-1,q=V-1;q>=0;q--){const le=je+q,$e=S[le],Je=le+1<me?S[le+1].el:J;fe[q]===0?C(null,$e,T,Je,Y,L,Z,G,X):P&&(Me<0||q!==De[Me]?K($e,T,Je,2):Me--)}}},K=(w,S,T,J,Y=null)=>{const{el:L,type:Z,transition:G,children:X,shapeFlag:q}=w;if(q&6){K(w.component.subTree,S,T,J);return}if(q&128){w.suspense.move(S,T,J);return}if(q&64){Z.move(w,S,T,tn);return}if(Z===W){o(L,S,T);for(let re=0;re<X.length;re++)K(X[re],S,T,J);o(w.anchor,S,T);return}if(Z===So){ne(w,S,T);return}if(J!==2&&q&1&&G)if(J===0)G.beforeEnter(L),o(L,S,T),mt(()=>G.enter(L),Y);else{const{leave:re,delayLeave:pe,afterLeave:be}=G,je=()=>o(L,S,T),Ie=()=>{re(L,()=>{je(),be&&be()})};pe?pe(L,je,Ie):Ie()}else o(L,S,T)},Be=(w,S,T,J=!1,Y=!1)=>{const{type:L,props:Z,ref:G,children:X,dynamicChildren:q,shapeFlag:me,patchFlag:re,dirs:pe,cacheIndex:be}=w;if(re===-2&&(Y=!1),G!=null&&wr(G,null,T,w,!0),be!=null&&(S.renderCache[be]=void 0),me&256){S.ctx.deactivate(w);return}const je=me&1&&pe,Ie=!qn(w);let Me;if(Ie&&(Me=Z&&Z.onVnodeBeforeUnmount)&&Ht(Me,S,w),me&6)Hr(w.component,T,J);else{if(me&128){w.suspense.unmount(T,J);return}je&&xn(w,null,S,"beforeUnmount"),me&64?w.type.remove(w,S,T,tn,J):q&&!q.hasOnce&&(L!==W||re>0&&re&64)?ft(q,S,T,!1,!0):(L===W&&re&384||!Y&&me&16)&&ft(X,S,T),J&&ct(w)}(Ie&&(Me=Z&&Z.onVnodeUnmounted)||je)&&mt(()=>{Me&&Ht(Me,S,w),je&&xn(w,null,S,"unmounted")},T)},ct=w=>{const{type:S,el:T,anchor:J,transition:Y}=w;if(S===W){En(T,J);return}if(S===So){M(w);return}const L=()=>{r(T),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(w.shapeFlag&1&&Y&&!Y.persisted){const{leave:Z,delayLeave:G}=Y,X=()=>Z(T,L);G?G(w.el,L,X):X()}else L()},En=(w,S)=>{let T;for(;w!==S;)T=y(w),r(w),w=T;r(S)},Hr=(w,S,T)=>{const{bum:J,scope:Y,job:L,subTree:Z,um:G,m:X,a:q}=w;_l(X),_l(q),J&&sr(J),Y.stop(),L&&(L.flags|=8,Be(Z,w,S,T)),G&&mt(G,S),mt(()=>{w.isUnmounted=!0},S),S&&S.pendingBranch&&!S.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===S.pendingId&&(S.deps--,S.deps===0&&S.resolve())},ft=(w,S,T,J=!1,Y=!1,L=0)=>{for(let Z=L;Z<w.length;Z++)Be(w[Z],S,T,J,Y)},Ct=w=>{if(w.shapeFlag&6)return Ct(w.component.subTree);if(w.shapeFlag&128)return w.suspense.next();const S=y(w.anchor||w.el),T=S&&S[Bs];return T?y(T):S};let lo=!1;const Pn=(w,S,T)=>{w==null?S._vnode&&Be(S._vnode,null,null,!0):C(S._vnode||null,w,S,null,null,null,T),S._vnode=w,lo||(lo=!0,pl(),Es(),lo=!1)},tn={p:C,um:Be,m:K,r:ct,mt:Qe,mc:oe,pc:H,pbc:Ve,n:Ct,o:e};return{render:Pn,hydrate:void 0,createApp:$d(Pn)}}function ra({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function jn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Id(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function za(e,t,n=!1){const o=e.children,r=t.children;if(ge(o)&&ge(r))for(let a=0;a<o.length;a++){const l=o[a];let s=r[a];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=r[a]=hn(r[a]),s.el=l.el),!n&&s.patchFlag!==-2&&za(l,s)),s.type===Pr&&(s.el=l.el)}}function Bd(e){const t=e.slice(),n=[0];let o,r,a,l,s;const i=e.length;for(o=0;o<i;o++){const u=e[o];if(u!==0){if(r=n[n.length-1],e[r]<u){t[o]=r,n.push(o);continue}for(a=0,l=n.length-1;a<l;)s=a+l>>1,e[n[s]]<u?a=s+1:l=s;u<e[n[a]]&&(a>0&&(t[o]=n[a-1]),n[a]=o)}}for(a=n.length,l=n[a-1];a-- >0;)n[a]=l,l=t[l];return n}function li(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:li(t)}function _l(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Rd=Symbol.for("v-scx"),Yd=()=>Kn(Rd);function oo(e,t){return Fr(e,null,t)}function Ud(e,t){return Fr(e,null,{flush:"sync"})}function ut(e,t,n){return Fr(e,t,n)}function Fr(e,t,n=Oe){const{immediate:o,deep:r,flush:a,once:l}=n,s=nt({},n),i=t&&o||!t&&a!=="post";let u;if(Oo){if(a==="sync"){const h=Yd();u=h.__watcherHandles||(h.__watcherHandles=[])}else if(!i){const h=()=>{};return h.stop=Ut,h.resume=Ut,h.pause=Ut,h}}const c=et;s.call=(h,j,C)=>Zt(h,c,j,C);let m=!1;a==="post"?s.scheduler=h=>{mt(h,c&&c.suspense)}:a!=="sync"&&(m=!0,s.scheduler=(h,j)=>{j?h():Wa(h)}),s.augmentJob=h=>{t&&(h.flags|=4),m&&(h.flags|=2,c&&(h.id=c.uid,h.i=c))};const y=ad(e,t,s);return Oo&&(u?u.push(y):i&&y()),y}function Ld(e,t,n){const o=this.proxy,r=Ke(e)?e.includes(".")?si(o,e):()=>o[e]:e.bind(o,o);let a;_e(t)?a=t:(a=t.handler,n=t);const l=Uo(this),s=Fr(r,a.bind(o),n);return l(),s}function si(e,t){const n=t.split(".");return()=>{let o=e;for(let r=0;r<n.length&&o;r++)o=o[n[r]];return o}}function Bt(e,t,n=Oe){const o=mi(),r=xt(t),a=wn(t),l=ii(e,r),s=Xu((i,u)=>{let c,m=Oe,y;return Ud(()=>{const h=e[r];bt(c,h)&&(c=h,u())}),{get(){return i(),n.get?n.get(c):c},set(h){const j=n.set?n.set(h):h;if(!bt(j,c)&&!(m!==Oe&&bt(h,m)))return;const C=o.vnode.props;C&&(t in C||r in C||a in C)&&(`onUpdate:${t}`in C||`onUpdate:${r}`in C||`onUpdate:${a}`in C)||(c=h,u()),o.emit(`update:${t}`,j),bt(h,j)&&bt(h,m)&&!bt(j,y)&&u(),m=h,y=j}}});return s[Symbol.iterator]=()=>{let i=0;return{next(){return i<2?{value:i++?l||Oe:s,done:!1}:{done:!0}}}},s}const ii=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${xt(t)}Modifiers`]||e[`${wn(t)}Modifiers`];function Wd(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||Oe;let r=n;const a=t.startsWith("update:"),l=a&&ii(o,t.slice(7));l&&(l.trim&&(r=n.map(c=>Ke(c)?c.trim():c)),l.number&&(r=n.map(vr)));let s,i=o[s=Xr(t)]||o[s=Xr(xt(t))];!i&&a&&(i=o[s=Xr(wn(t))]),i&&Zt(i,e,6,r);const u=o[s+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,Zt(u,e,6,r)}}function ui(e,t,n=!1){const o=t.emitsCache,r=o.get(e);if(r!==void 0)return r;const a=e.emits;let l={},s=!1;if(!_e(e)){const i=u=>{const c=ui(u,t,!0);c&&(s=!0,nt(l,c))};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return!a&&!s?(Ye(e)&&o.set(e,null),null):(ge(a)?a.forEach(i=>l[i]=null):nt(l,a),Ye(e)&&o.set(e,l),l)}function Er(e,t){return!e||!Vr(t)?!1:(t=t.slice(2).replace(/Once$/,""),Te(e,t[0].toLowerCase()+t.slice(1))||Te(e,wn(t))||Te(e,t))}function Cl(e){const{type:t,vnode:n,proxy:o,withProxy:r,propsOptions:[a],slots:l,attrs:s,emit:i,render:u,renderCache:c,props:m,data:y,setupState:h,ctx:j,inheritAttrs:C}=e,$=br(e);let F,R;try{if(n.shapeFlag&4){const M=r||o,A=M;F=Gt(u.call(A,M,c,m,h,y,j)),R=s}else{const M=t;F=Gt(M.length>1?M(m,{attrs:s,slots:l,emit:i}):M(m,null)),R=t.props?s:Jd(s)}}catch(M){Vo.length=0,Ar(M,e,1),F=d(bn)}let ne=F;if(R&&C!==!1){const M=Object.keys(R),{shapeFlag:A}=ne;M.length&&A&7&&(a&&M.some(Aa)&&(R=qd(R,a)),ne=Gn(ne,R,!1,!0))}return n.dirs&&(ne=Gn(ne,null,!1,!0),ne.dirs=ne.dirs?ne.dirs.concat(n.dirs):n.dirs),n.transition&&Ja(ne,n.transition),F=ne,br($),F}const Jd=e=>{let t;for(const n in e)(n==="class"||n==="style"||Vr(n))&&((t||(t={}))[n]=e[n]);return t},qd=(e,t)=>{const n={};for(const o in e)(!Aa(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n};function Hd(e,t,n){const{props:o,children:r,component:a}=e,{props:l,children:s,patchFlag:i}=t,u=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&i>=0){if(i&1024)return!0;if(i&16)return o?Dl(o,l,u):!!l;if(i&8){const c=t.dynamicProps;for(let m=0;m<c.length;m++){const y=c[m];if(l[y]!==o[y]&&!Er(u,y))return!0}}}else return(r||s)&&(!s||!s.$stable)?!0:o===l?!1:o?l?Dl(o,l,u):!0:!!l;return!1}function Dl(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let r=0;r<o.length;r++){const a=o[r];if(t[a]!==e[a]&&!Er(n,a))return!0}return!1}function Kd({vnode:e,parent:t},n){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=n,t=t.parent;else break}}const di=e=>e.__isSuspense;function zd(e,t){t&&t.pendingBranch?ge(e)?t.effects.push(...e):t.effects.push(e):Fs(e)}const W=Symbol.for("v-fgt"),Pr=Symbol.for("v-txt"),bn=Symbol.for("v-cmt"),So=Symbol.for("v-stc"),Vo=[];let St=null;function p(e=!1){Vo.push(St=e?null:[])}function Gd(){Vo.pop(),St=Vo[Vo.length-1]||null}let Ao=1;function Sl(e,t=!1){Ao+=e,e<0&&St&&t&&(St.hasOnce=!0)}function ci(e){return e.dynamicChildren=Ao>0?St||Un:null,Gd(),Ao>0&&St&&St.push(e),e}function k(e,t,n,o,r,a){return ci(v(e,t,n,o,r,a,!0))}function E(e,t,n,o,r){return ci(d(e,t,n,o,r,!0))}function Ga(e){return e?e.__v_isVNode===!0:!1}function co(e,t){return e.type===t.type&&e.key===t.key}const fi=({key:e})=>e??null,ur=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Ke(e)||ce(e)||_e(e)?{i:Ze,r:e,k:t,f:!!n}:e:null);function v(e,t=null,n=null,o=0,r=null,a=e===W?0:1,l=!1,s=!1){const i={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&fi(t),ref:t&&ur(t),scopeId:Is,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:o,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Ze};return s?(Qa(i,n),a&128&&e.normalize(i)):n&&(i.shapeFlag|=Ke(n)?8:16),Ao>0&&!l&&St&&(i.patchFlag>0||a&6)&&i.patchFlag!==32&&St.push(i),i}const d=Qd;function Qd(e,t=null,n=null,o=0,r=null,a=!1){if((!e||e===qs)&&(e=bn),Ga(e)){const s=Gn(e,t,!0);return n&&Qa(s,n),Ao>0&&!a&&St&&(s.shapeFlag&6?St[St.indexOf(e)]=s:St.push(s)),s.patchFlag=-2,s}if(sc(e)&&(e=e.__vccOpts),t){t=Xd(t);let{class:s,style:i}=t;s&&!Ke(s)&&(t.class=kt(s)),Ye(i)&&(Ua(i)&&!ge(i)&&(i=nt({},i)),t.style=no(i))}const l=Ke(e)?1:di(e)?128:id(e)?64:Ye(e)?4:_e(e)?2:0;return v(e,t,n,o,r,l,a,!0)}function Xd(e){return e?Ua(e)||Zs(e)?nt({},e):e:null}function Gn(e,t,n=!1,o=!1){const{props:r,ref:a,patchFlag:l,children:s,transition:i}=e,u=t?xe(r||{},t):r,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&fi(u),ref:t&&t.ref?n&&a?ge(a)?a.concat(ur(t)):[a,ur(t)]:ur(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==W?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:i,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Gn(e.ssContent),ssFallback:e.ssFallback&&Gn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return i&&o&&Ja(c,i.clone(c)),c}function _(e=" ",t=0){return d(Pr,null,e,t)}function pi(e,t){const n=d(So,null,e);return n.staticCount=t,n}function U(e="",t=!1){return t?(p(),E(bn,null,e)):d(bn,null,e)}function Gt(e){return e==null||typeof e=="boolean"?d(bn):ge(e)?d(W,null,e.slice()):Ga(e)?hn(e):d(Pr,null,String(e))}function hn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Gn(e)}function Qa(e,t){let n=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(ge(t))n=16;else if(typeof t=="object")if(o&65){const r=t.default;r&&(r._c&&(r._d=!1),Qa(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!Zs(t)?t._ctx=Ze:r===3&&Ze&&(Ze.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else _e(t)?(t={default:t,_ctx:Ze},n=32):(t=String(t),o&64?(n=16,t=[_(t)]):n=8);e.children=t,e.shapeFlag|=n}function xe(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const r in o)if(r==="class")t.class!==o.class&&(t.class=kt([t.class,o.class]));else if(r==="style")t.style=no([t.style,o.style]);else if(Vr(r)){const a=t[r],l=o[r];l&&a!==l&&!(ge(a)&&a.includes(l))&&(t[r]=a?[].concat(a,l):l)}else r!==""&&(t[r]=o[r])}return t}function Ht(e,t,n,o=null){Zt(e,t,7,[n,o])}const Zd=Gs();let ec=0;function tc(e,t,n){const o=e.type,r=(t?t.appContext:e.appContext)||Zd,a={uid:ec++,vnode:e,type:o,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Vu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ti(o,r),emitsOptions:ui(o,r),emit:null,emitted:null,propsDefaults:Oe,inheritAttrs:o.inheritAttrs,ctx:Oe,data:Oe,props:Oe,attrs:Oe,slots:Oe,refs:Oe,setupState:Oe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Wd.bind(null,a),e.ce&&e.ce(a),a}let et=null;const mi=()=>et||Ze;let Cr,Da;{const e=$r(),t=(n,o)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(o),a=>{r.length>1?r.forEach(l=>l(a)):r[0](a)}};Cr=t("__VUE_INSTANCE_SETTERS__",n=>et=n),Da=t("__VUE_SSR_SETTERS__",n=>Oo=n)}const Uo=e=>{const t=et;return Cr(e),e.scope.on(),()=>{e.scope.off(),Cr(t)}},Vl=()=>{et&&et.scope.off(),Cr(null)};function vi(e){return e.vnode.shapeFlag&4}let Oo=!1;function nc(e,t=!1,n=!1){t&&Da(t);const{props:o,children:r}=e.vnode,a=vi(e);Nd(e,o,a,t),Td(e,r,n);const l=a?oc(e,t):void 0;return t&&Da(!1),l}function oc(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,_d);const{setup:o}=n;if(o){kn();const r=e.setupContext=o.length>1?ac(e):null,a=Uo(e),l=Ro(o,e,0,[e.props,r]),s=us(l);if(_n(),a(),(s||e.sp)&&!qn(e)&&Us(e),s){if(l.then(Vl,Vl),t)return l.then(i=>{xl(e,i)}).catch(i=>{Ar(i,e,0)});e.asyncDep=l}else xl(e,l)}else hi(e)}function xl(e,t,n){_e(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ye(t)&&(e.setupState=As(t)),hi(e)}function hi(e,t,n){const o=e.type;e.render||(e.render=o.render||Ut);{const r=Uo(e);kn();try{Cd(e)}finally{_n(),r()}}}const rc={get(e,t){return at(e,"get",""),e[t]}};function ac(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,rc),slots:e.slots,emit:e.emit,expose:t}}function Ir(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(As(Ku(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Do)return Do[n](e)},has(t,n){return n in t||n in Do}})):e.proxy}function lc(e,t=!0){return _e(e)?e.displayName||e.name:e.name||t&&e.__name}function sc(e){return _e(e)&&"__vccOpts"in e}const g=(e,t)=>od(e,t,Oo),ic="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Sa;const jl=typeof window<"u"&&window.trustedTypes;if(jl)try{Sa=jl.createPolicy("vue",{createHTML:e=>e})}catch{}const gi=Sa?e=>Sa.createHTML(e):e=>e,uc="http://www.w3.org/2000/svg",dc="http://www.w3.org/1998/Math/MathML",an=typeof document<"u"?document:null,$l=an&&an.createElement("template"),cc={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const r=t==="svg"?an.createElementNS(uc,e):t==="mathml"?an.createElementNS(dc,e):n?an.createElement(e,{is:n}):an.createElement(e);return e==="select"&&o&&o.multiple!=null&&r.setAttribute("multiple",o.multiple),r},createText:e=>an.createTextNode(e),createComment:e=>an.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>an.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,r,a){const l=n?n.previousSibling:t.lastChild;if(r&&(r===a||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===a||!(r=r.nextSibling)););else{$l.innerHTML=gi(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const s=$l.content;if(o==="svg"||o==="mathml"){const i=s.firstChild;for(;i.firstChild;)s.appendChild(i.firstChild);s.removeChild(i)}t.insertBefore(s,n)}return[l?l.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},fc=Symbol("_vtc");function pc(e,t,n){const o=e[fc];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Nl=Symbol("_vod"),mc=Symbol("_vsh"),yi=Symbol("");function Cn(e){const t=mi();if(!t)return;const n=t.ut=(r=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(a=>Dr(a,r))},o=()=>{const r=e(t.proxy);t.ce?Dr(t.ce,r):Va(t.subTree,r),n(r)};Js(()=>{Fs(o)}),_t(()=>{ut(o,Ut,{flush:"post"});const r=new MutationObserver(o);r.observe(t.subTree.el.parentNode,{childList:!0}),Tr(()=>r.disconnect())})}function Va(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Va(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)Dr(e.el,t);else if(e.type===W)e.children.forEach(n=>Va(n,t));else if(e.type===So){let{el:n,anchor:o}=e;for(;n&&(Dr(n,t),n!==o);)n=n.nextSibling}}function Dr(e,t){if(e.nodeType===1){const n=e.style;let o="";for(const r in t)n.setProperty(`--${r}`,t[r]),o+=`--${r}: ${t[r]};`;n[yi]=o}}const vc=/(^|;)\s*display\s*:/;function hc(e,t,n){const o=e.style,r=Ke(n);let a=!1;if(n&&!r){if(t)if(Ke(t))for(const l of t.split(";")){const s=l.slice(0,l.indexOf(":")).trim();n[s]==null&&dr(o,s,"")}else for(const l in t)n[l]==null&&dr(o,l,"");for(const l in n)l==="display"&&(a=!0),dr(o,l,n[l])}else if(r){if(t!==n){const l=o[yi];l&&(n+=";"+l),o.cssText=n,a=vc.test(n)}}else t&&e.removeAttribute("style");Nl in e&&(e[Nl]=a?o.display:"",e[mc]&&(o.display="none"))}const Ml=/\s*!important$/;function dr(e,t,n){if(ge(n))n.forEach(o=>dr(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=gc(e,t);Ml.test(n)?e.setProperty(wn(o),n.replace(Ml,""),"important"):e[o]=n}}const Al=["Webkit","Moz","ms"],aa={};function gc(e,t){const n=aa[t];if(n)return n;let o=xt(t);if(o!=="filter"&&o in e)return aa[t]=o;o=jr(o);for(let r=0;r<Al.length;r++){const a=Al[r]+o;if(a in e)return aa[t]=a}return t}const Ol="http://www.w3.org/1999/xlink";function Tl(e,t,n,o,r,a=Du(t)){o&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Ol,t.slice(6,t.length)):e.setAttributeNS(Ol,t,n):n==null||a&&!ps(n)?e.removeAttribute(t):e.setAttribute(t,a?"":Wt(n)?String(n):n)}function Fl(e,t,n,o,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?gi(n):n);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const s=a==="OPTION"?e.getAttribute("value")||"":e.value,i=n==null?e.type==="checkbox"?"on":"":String(n);(s!==i||!("_value"in e))&&(e.value=i),n==null&&e.removeAttribute(t),e._value=n;return}let l=!1;if(n===""||n==null){const s=typeof e[t];s==="boolean"?n=ps(n):n==null&&s==="string"?(n="",l=!0):s==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(r||t)}function gn(e,t,n,o){e.addEventListener(t,n,o)}function yc(e,t,n,o){e.removeEventListener(t,n,o)}const El=Symbol("_vei");function bc(e,t,n,o,r=null){const a=e[El]||(e[El]={}),l=a[t];if(o&&l)l.value=o;else{const[s,i]=wc(t);if(o){const u=a[t]=Cc(o,r);gn(e,s,u,i)}else l&&(yc(e,s,l,i),a[t]=void 0)}}const Pl=/(?:Once|Passive|Capture)$/;function wc(e){let t;if(Pl.test(e)){t={};let o;for(;o=e.match(Pl);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):wn(e.slice(2)),t]}let la=0;const kc=Promise.resolve(),_c=()=>la||(kc.then(()=>la=0),la=Date.now());function Cc(e,t){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;Zt(Dc(o,n.value),t,5,[o])};return n.value=e,n.attached=_c(),n}function Dc(e,t){if(ge(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>r=>!r._stopped&&o&&o(r))}else return t}const Il=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Sc=(e,t,n,o,r,a)=>{const l=r==="svg";t==="class"?pc(e,o,l):t==="style"?hc(e,n,o):Vr(t)?Aa(t)||bc(e,t,n,o,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Vc(e,t,o,l))?(Fl(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Tl(e,t,o,l,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ke(o))?Fl(e,xt(t),o,a,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),Tl(e,t,o,l))};function Vc(e,t,n,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&Il(t)&&_e(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Il(t)&&Ke(n)?!1:t in e}const Qn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ge(t)?n=>sr(t,n):t};function xc(e){e.target.composing=!0}function Bl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const dn=Symbol("_assign"),Lo={created(e,{modifiers:{lazy:t,trim:n,number:o}},r){e[dn]=Qn(r);const a=o||r.props&&r.props.type==="number";gn(e,t?"change":"input",l=>{if(l.target.composing)return;let s=e.value;n&&(s=s.trim()),a&&(s=vr(s)),e[dn](s)}),n&&gn(e,"change",()=>{e.value=e.value.trim()}),t||(gn(e,"compositionstart",xc),gn(e,"compositionend",Bl),gn(e,"change",Bl))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:o,trim:r,number:a}},l){if(e[dn]=Qn(l),e.composing)return;const s=(a||e.type==="number")&&!/^0\d/.test(e.value)?vr(e.value):e.value,i=t??"";s!==i&&(document.activeElement===e&&e.type!=="range"&&(o&&t===n||r&&e.value.trim()===i)||(e.value=i))}},jc={deep:!0,created(e,t,n){e[dn]=Qn(n),gn(e,"change",()=>{const o=e._modelValue,r=To(e),a=e.checked,l=e[dn];if(ge(o)){const s=Fa(o,r),i=s!==-1;if(a&&!i)l(o.concat(r));else if(!a&&i){const u=[...o];u.splice(s,1),l(u)}}else if(to(o)){const s=new Set(o);a?s.add(r):s.delete(r),l(s)}else l(bi(e,a))})},mounted:Rl,beforeUpdate(e,t,n){e[dn]=Qn(n),Rl(e,t,n)}};function Rl(e,{value:t,oldValue:n},o){e._modelValue=t;let r;if(ge(t))r=Fa(t,o.props.value)>-1;else if(to(t))r=t.has(o.props.value);else{if(t===n)return;r=Bo(t,bi(e,!0))}e.checked!==r&&(e.checked=r)}const $c={deep:!0,created(e,{value:t,modifiers:{number:n}},o){const r=to(t);gn(e,"change",()=>{const a=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>n?vr(To(l)):To(l));e[dn](e.multiple?r?new Set(a):a:a[0]),e._assigning=!0,Dt(()=>{e._assigning=!1})}),e[dn]=Qn(o)},mounted(e,{value:t}){Yl(e,t)},beforeUpdate(e,t,n){e[dn]=Qn(n)},updated(e,{value:t}){e._assigning||Yl(e,t)}};function Yl(e,t){const n=e.multiple,o=ge(t);if(!(n&&!o&&!to(t))){for(let r=0,a=e.options.length;r<a;r++){const l=e.options[r],s=To(l);if(n)if(o){const i=typeof s;i==="string"||i==="number"?l.selected=t.some(u=>String(u)===String(s)):l.selected=Fa(t,s)>-1}else l.selected=t.has(s);else if(Bo(To(l),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function To(e){return"_value"in e?e._value:e.value}function bi(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Nc=["ctrl","shift","alt","meta"],Mc={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Nc.some(n=>e[`${n}Key`]&&!t.includes(n))},qt=(e,t)=>{const n=e._withMods||(e._withMods={}),o=t.join(".");return n[o]||(n[o]=(r,...a)=>{for(let l=0;l<t.length;l++){const s=Mc[t[l]];if(s&&s(r,t))return}return e(r,...a)})},Ac=nt({patchProp:Sc},cc);let Ul;function Oc(){return Ul||(Ul=Ed(Ac))}const ro=(...e)=>{const t=Oc().createApp(...e),{mount:n}=t;return t.mount=o=>{const r=Fc(o);if(!r)return;const a=t._component;!_e(a)&&!a.render&&!a.template&&(a.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const l=n(r,!1,Tc(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),l},t};function Tc(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Fc(e){return Ke(e)?document.querySelector(e):e}const Ec={trailing:!0};function Pc(e,t=25,n={}){if(n={...Ec,...n},!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");let o,r,a=[],l,s;const i=(u,c)=>(l=Ic(e,u,c),l.finally(()=>{if(l=null,n.trailing&&s&&!r){const m=i(u,s);return s=null,m}}),l);return function(...u){return l?(n.trailing&&(s=u),l):new Promise(c=>{const m=!r&&n.leading;clearTimeout(r),r=setTimeout(()=>{r=null;const y=n.leading?o:i(this,u);for(const h of a)h(y);a=[]},t),m?(o=i(this,u),c(o)):a.push(c)})}}async function Ic(e,t,n){return await e.apply(t,n)}function Bc(){const e=te.moment.localeData();return{...e._config,ordinal:e._config.ordinal,meridiem:e._config.meridiem,meridiemParse:e._config.meridiemParse,dayOfMonthOrdinalParse:e._config.dayOfMonthOrdinalParse,isPM:e._config.isPM}}const Bn=te.moment.localeData(),sa=new Map([["o",String(Bn._config.dayOfMonthOrdinalParse).replace(String.raw`/\d{1,2}`,"").slice(0,-1)],["M","([1-9]|1[0-2])"],["MM","(0[1-9]|1[0-2])"],["MMM","("+Bn.monthsShort().join("|")+")"],["MMMM","("+Bn.months().join("|")+")"],["Q","[1-4]"],["D","[0-9]{1,2}"],["DD","[0-9]{2}"],["DDD","[1-9]{1,3}"],["DDDD","[1-9]{3}"],["d","[0-6]"],["dd","("+Bn.weekdaysMin().join("|")+")"],["ddd","("+Bn.weekdaysShort().join("|")+")"],["dddd","("+Bn.weekdays().join("|")+")"],["w","[0-9]{1,2}"],["ww","[0-9]{2}"],["W","[0-9]{1,2}"],["WW","[0-9]{2}"],["YY","[0-9]{2}"],["YYYY","[0-9]{4}"]]),Rc=new Set(["o","M","Q","D","d","w","W","Y"]);function Yc(e){const t=[];let n="",o=0,r=!1,a="";for(const l of e)if(r)l==="]"?(t.push(a),r=!1,a=""):a+=l;else if(l==="[")r=!0;else if(Rc.has(l))if(n===l)o++;else{if(o>0){const s=sa.get(n.repeat(o));s&&t.push(s)}o=1,n=l}else{if(o>0){const s=sa.get(n.repeat(o));s&&t.push(s),o=0,n=""}t.push(l)}if(o>0){const l=sa.get(n.repeat(o));l&&t.push(l),o=0,n=""}return new RegExp(t.join(""))}const Xn="custom-journal-locale";let xa;function Uc(){if(!te.moment.locales().includes(Xn)){const e=te.moment.locale(),t=Bc();xa=t.week,te.moment.defineLocale(Xn,t),te.moment.locale(e)}}function wi(e,t){return 7+e-t}function ki(e,t){return 7+e-t}const _i=(e,t)=>{const n=te.moment.locale();te.moment.updateLocale(Xn,{week:{dow:e,doy:t}}),te.moment.locale(n)},Ci=()=>{if(xa){const e=te.moment.locale();te.moment.updateLocale(Xn,xa),te.moment.locale(e)}};function Q(e,t){const n=e?te.moment(e,t):te.moment();return n.locale(Xn),n}function Ne(){const e=te.moment();return e.locale(Xn),e.startOf("day")}function Xa(e,t,n){const o=typeof t=="string"?Q(t):t,r=typeof n=="string"?Q(n):n;return o.isSame(r,e)}const Lc={day:Wc,week:Jc,month:qc,quarter:Hc,year:Kc};function Wc(e){const t=Q(e);return t.calendar(Ne(),{lastWeek:"[Last] dddd",lastDay:"[Yesterday]",sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",sameElse:function(){return"["+t.from(Ne())+"]"}})}function Jc(e){const t=Ne(),n=Q(e).diff(t,"week");switch(n){case 0:return"This week";case-1:return"Last week";case 1:return"Next week"}return n<0?`${Math.abs(n)} weeks ago`:`${n} weeks from now`}function qc(e){const t=Ne().startOf("month"),n=Q(e).diff(t,"month");switch(n){case 0:return"This month";case-1:return"Last month";case 1:return"Next month"}return n<0?`${Math.abs(n)} months ago`:`${n} months from now`}function Hc(e){const t=Ne().startOf("quarter"),n=Q(e).diff(t,"quarter");switch(n){case 0:return"This quarter";case-1:return"Last quarter";case 1:return"Next quarter"}return n<0?`${Math.abs(n)} quarters ago`:`${n} quarters from now`}function Kc(e){const t=Ne().startOf("year"),n=Q(e).diff(t,"year");switch(n){case 0:return"This year";case-1:return"Last year";case 1:return"Next year"}return n<0?`${Math.abs(n)} years ago`:`${n} years from now`}function Di(e,t){return Lc[e](t)}const Si=[{name:"ISO 8601",description:`Week starts on Monday.
First week of year includes 1st Thursday (Jan 4th)`,used:"EU (exc. Portugal) and most of other European countries, most of Asia and Oceania",dow:1,doy:4},{name:"Western traditional",description:`Week starts on Sunday.
First week of year includes 1st Saturday (Jan 1st)`,used:"Canada, United States, Iceland, Portugal, Japan, Taiwan, Thailand, Hong Kong, Macau, Israel, Egypt, South Africa, the Philippines, and most of Latin America",dow:0,doy:6},{name:"Middle Eastern",description:`Week starts on Saturday.
First week of year includes 1st Friday (Jan 1st)`,used:"Much of the Middle East",dow:6,doy:12}];function Vi(e){let{dow:t,doy:n}=e;t===-1&&(t=te.moment().localeData().firstDayOfWeek(),n=te.moment().localeData().firstDayOfYear());const o=Si.find(l=>l.dow===t&&l.doy===n);if(o)return o;const r=te.moment().locale("en").localeData().weekdays()[t],a=ki(t,n);return{name:"custom",description:`Week starts on ${r}.
First week of year includes Jan ${a}`,used:"",dow:t,doy:n}}const zc={key:0,class:"setting-item-info"},Gc={class:"setting-item-name"},Qc={class:"setting-item-description"},Xc={key:1,class:"setting-item-control"},N=B({__name:"ObsidianSetting",props:{name:{},description:{},heading:{type:Boolean},controlsOnly:{type:Boolean},noControls:{type:Boolean}},setup(e){return(t,n)=>(p(),k("div",{class:kt(["setting-item",{"setting-item--heading":t.heading}])},[t.controlsOnly?U("",!0):(p(),k("div",zc,[v("div",Gc,[ze(t.$slots,"name",{},()=>[_(I(t.name??""),1)])]),v("div",Qc,[ze(t.$slots,"description",{},()=>[_(I(t.description??""),1)])])])),t.noControls?U("",!0):(p(),k("div",Xc,[ze(t.$slots,"default")]))],2))}}),Zc=["disabled"],Se=B({__name:"ObsidianDropdown",props:It({disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Bt(e,"modelValue");return(n,o)=>Tn((p(),k("select",{"onUpdate:modelValue":o[0]||(o[0]=r=>t.value=r),class:"dropdown",disabled:n.disabled},[ze(n.$slots,"default")],8,Zc)),[[$c,t.value]])}}),ef=["aria-label"],Ge=B({__name:"ObsidianToggle",props:It({disabled:{type:Boolean},tooltip:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Bt(e,"modelValue");return(n,o)=>(p(),k("div",{class:kt(["checkbox-container",{"is-enabled":t.value,"is-disabled":n.disabled}]),"aria-label":n.tooltip,onClick:o[0]||(o[0]=r=>t.value=!t.value)},o[1]||(o[1]=[v("input",{type:"checkbox",tabindex:"0"},null,-1)]),10,ef))}}),tf=["disabled","type","aria-label"],nf=B({__name:"ObsidianButton",props:{disabled:{type:Boolean},cta:{type:Boolean},warning:{type:Boolean},type:{},tooltip:{},flat:{type:Boolean}},setup(e){return(t,n)=>(p(),k("button",{class:kt({"mod-cta":t.cta,"mod-warning":t.warning,"clickable-icon":t.flat&&!t.cta}),disabled:t.disabled,type:t.type??"button","aria-label":t.tooltip},[ze(t.$slots,"default",{},void 0,!0)],10,tf))}}),ye=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n},se=ye(nf,[["__scopeId","data-v-ff188d28"]]),of=["aria-label"],rf=B({__name:"ObsidianIcon",props:{name:{},tooltip:{}},setup(e){const t=e,n=ie();_t(()=>{ut(()=>t.name,r=>o(r),{immediate:!0})});function o(r){if(n.value?.empty(),!r)return;const a=te.getIcon(r);a&&n.value&&n.value.append(a)}return(r,a)=>(p(),k("span",{ref_key:"element",ref:n,"aria-label":r.tooltip},null,8,of))}}),Dn=ye(rf,[["__scopeId","data-v-37c08292"]]),af=B({__name:"ObsidianIconButton",props:{icon:{},tooltip:{}},setup(e){return(t,n)=>(p(),E(se,{tooltip:t.tooltip,flat:"",class:"icon-button"},{default:f(()=>[d(Dn,{name:t.icon},null,8,["name"])]),_:1},8,["tooltip"]))}}),ke=ye(af,[["__scopeId","data-v-3dd8502b"]]),on="journal-calendar",we="YYYY-MM-DD",st="journal",Br="journal-date",Xt="journal-start-date",cn="journal-end-date",Rr="journal-index",Fn=Symbol(),xi=Symbol(),lf=1*60*60*1e3,ji={day:"D",week:"[W]w",month:"MMMM",quarter:"[Q]Q",year:"YYYY",custom:""};class Fe extends te.Modal{constructor(t,n,o,r={},a){super(t.app),this.plugin=t,this.title=n,this.component=o,this.componentProps=r,this.customWidth=a,t.register(()=>{this.close()})}_vueApp;onOpen(){this.titleEl.setText(this.title),this.customWidth&&this.modalEl.setCssProps({"--dialog-width":`${this.customWidth}px`}),this._vueApp=ro(this.component,{onClose:()=>{this.close()},...this.componentProps}),this._vueApp.provide(Fn,this.plugin),this._vueApp.mount(this.contentEl)}onClose(){this._vueApp?.unmount(),this.contentEl.empty()}}const sf=B({__name:"RemoveJournal.modal",emits:["close","remove"],setup(e,{emit:t}){const n=t,o=ie("keep");function r(){n("remove",o.value),n("close")}return(a,l)=>(p(),k(W,null,[d(N,{name:"Journal notes",description:"What to do with notes connected to this journal"},{default:f(()=>[d(Se,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=s=>o.value=s)},{default:f(()=>l[2]||(l[2]=[v("option",{value:"keep"},"Keep",-1),v("option",{value:"clear"},"Clear journal data",-1),v("option",{value:"delete"},"Delete",-1)])),_:1},8,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(se,{onClick:l[1]||(l[1]=s=>a.$emit("close"))},{default:f(()=>l[3]||(l[3]=[_("Cancel")])),_:1}),d(se,{cta:"",onClick:r},{default:f(()=>l[4]||(l[4]=[_("Remove")])),_:1})]),_:1})],64))}});function ve(){const e=Kn(Fn);if(!e)throw new Error("Plugin not provided or composable used outside of vue context");return e}const uf={class:"flair"},Za=B({__name:"JournalSettingsList",props:{journals:{}},emits:["edit","bulk-add"],setup(e){const t=ve();function n(o){new Fe(t,`Remove ${o} journal`,sf,{onRemove(r){t.removeJournal(o,r).catch(console.error)}}).open()}return(o,r)=>o.journals.length===0?(p(),E(N,{key:0},{description:f(()=>r[0]||(r[0]=[_(" No journals created yet. ")])),_:1})):(p(!0),k(W,{key:1},Ce(o.journals,a=>(p(),E(N,{key:a.name},{name:f(()=>[_(I(a.name)+" ",1),v("span",uf,I(a.type),1)]),default:f(()=>[d(ke,{icon:"import",tooltip:"Add existing notes to "+a.name,onClick:l=>o.$emit("bulk-add",a.name)},null,8,["tooltip","onClick"]),d(ke,{icon:"pencil",tooltip:"Edit "+a.name,onClick:l=>o.$emit("edit",a.name)},null,8,["tooltip","onClick"]),d(ke,{icon:"trash-2",tooltip:"Delete "+a.name,onClick:l=>n(a.name)},null,8,["tooltip","onClick"])]),_:2},1024))),128))}}),df=["placeholder","disabled"],He=B({__name:"ObsidianTextInput",props:It({placeholder:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Bt(e,"modelValue");return(n,o)=>Tn((p(),k("input",{"onUpdate:modelValue":o[0]||(o[0]=r=>t.value=r),type:"text",placeholder:n.placeholder,disabled:n.disabled,spellcheck:"false"},null,8,df)),[[Lo,t.value]])}});/**
  * vee-validate v4.13.2
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function Rt(e){return typeof e=="function"}function $i(e){return e==null}const Zn=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function el(e){return Number(e)>=0}function cf(e){return typeof e=="object"&&e!==null}function ff(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function Ll(e){if(!cf(e)||ff(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Fo(e,t){return Object.keys(t).forEach(n=>{if(Ll(t[n])&&Ll(e[n])){e[n]||(e[n]={}),Fo(e[n],t[n]);return}e[n]=t[n]}),e}function tr(e){const t=e.split(".");if(!t.length)return"";let n=String(t[0]);for(let o=1;o<t.length;o++){if(el(t[o])){n+=`[${t[o]}]`;continue}n+=`.${t[o]}`}return n}const pf={};function mf(e){return pf[e]}function Wl(e,t,n){typeof n.value=="object"&&(n.value=Le(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function Le(e){if(typeof e!="object")return e;var t=0,n,o,r,a=Object.prototype.toString.call(e);if(a==="[object Object]"?r=Object.create(e.__proto__||null):a==="[object Array]"?r=Array(e.length):a==="[object Set]"?(r=new Set,e.forEach(function(l){r.add(Le(l))})):a==="[object Map]"?(r=new Map,e.forEach(function(l,s){r.set(Le(s),Le(l))})):a==="[object Date]"?r=new Date(+e):a==="[object RegExp]"?r=new RegExp(e.source,e.flags):a==="[object DataView]"?r=new e.constructor(Le(e.buffer)):a==="[object ArrayBuffer]"?r=e.slice(0):a.slice(-6)==="Array]"&&(r=new e.constructor(e)),r){for(o=Object.getOwnPropertySymbols(e);t<o.length;t++)Wl(r,o[t],Object.getOwnPropertyDescriptor(e,o[t]));for(t=0,o=Object.getOwnPropertyNames(e);t<o.length;t++)Object.hasOwnProperty.call(r,n=o[t])&&r[n]===e[n]||Wl(r,n,Object.getOwnPropertyDescriptor(e,n))}return r||e}const vf=Symbol("vee-validate-form"),hf=typeof window<"u";function gf(e){return Rt(e)&&!!e.__locatorRef}function yn(e){return!!e&&Rt(e.parse)&&e.__type==="VVTypedSchema"}function Ni(e){return!!e&&Rt(e.validate)}function yf(e){return e==="checkbox"||e==="radio"}function bf(e){return Zn(e)||Array.isArray(e)}function wf(e){return Array.isArray(e)?e.length===0:Zn(e)&&Object.keys(e).length===0}function Wo(e){return/^\[.+\]$/i.test(e)}function kf(e){return Mi(e)&&e.multiple}function Mi(e){return e.tagName==="SELECT"}function _f(e){return Ai(e)&&e.target&&"submit"in e.target}function Ai(e){return e?!!(typeof Event<"u"&&Rt(Event)&&e instanceof Event||e&&e.srcElement):!1}function xo(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,o,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(o=n;o--!==0;)if(!xo(e[o],t[o]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;for(o of e.entries())if(!xo(o[1],t.get(o[0])))return!1;return!0}if(Jl(e)&&Jl(t))return!(e.size!==t.size||e.name!==t.name||e.lastModified!==t.lastModified||e.type!==t.type);if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(o=n;o--!==0;)if(e[o]!==t[o])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();for(r=Object.keys(e),n=r.length,o=n;o--!==0;){var a=r[o];if(!xo(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Jl(e){return hf?e instanceof File:!1}function Yr(e){return Wo(e)?e.replace(/\[|\]/gi,""):e}function un(e,t,n){return e?Wo(t)?e[Yr(t)]:(t||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((r,a)=>bf(r)&&a in r?r[a]:n,e):n}function rn(e,t,n){if(Wo(t)){e[Yr(t)]=n;return}const o=t.split(/\.|\[(\d+)\]/).filter(Boolean);let r=e;for(let a=0;a<o.length;a++){if(a===o.length-1){r[o[a]]=n;return}(!(o[a]in r)||$i(r[o[a]]))&&(r[o[a]]=el(o[a+1])?[]:{}),r=r[o[a]]}}function ia(e,t){if(Array.isArray(e)&&el(t)){e.splice(Number(t),1);return}Zn(e)&&delete e[t]}function ql(e,t){if(Wo(t)){delete e[Yr(t)];return}const n=t.split(/\.|\[(\d+)\]/).filter(Boolean);let o=e;for(let a=0;a<n.length;a++){if(a===n.length-1){ia(o,n[a]);break}if(!(n[a]in o)||$i(o[n[a]]))break;o=o[n[a]]}const r=n.map((a,l)=>un(e,n.slice(0,l).join(".")));for(let a=r.length-1;a>=0;a--)if(wf(r[a])){if(a===0){ia(e,n[0]);continue}ia(r[a-1],n[a-1])}}function Mt(e){return Object.keys(e)}function Hl(e,t=0){let n=null,o=[];return function(...r){return n&&clearTimeout(n),n=setTimeout(()=>{const a=e(...r);o.forEach(l=>l(a)),o=[]},t),new Promise(a=>o.push(a))}}function Cf(e,t){let n;return async function(...r){const a=e(...r);n=a;const l=await a;return a!==n?l:(n=void 0,t(l,r))}}function Kl(e){return Array.isArray(e)?e:e?[e]:[]}function nr(e,t){const n={};for(const o in e)t.includes(o)||(n[o]=e[o]);return n}function Df(e){let t=null,n=[];return function(...o){const r=Dt(()=>{if(t!==r)return;const a=e(...o);n.forEach(l=>l(a)),n=[],t=null});return t=r,new Promise(a=>n.push(a))}}function ua(e){if(Oi(e))return e._value}function Oi(e){return"_value"in e}function Sf(e){return e.type==="number"||e.type==="range"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function zl(e){if(!Ai(e))return e;const t=e.target;if(yf(t.type)&&Oi(t))return ua(t);if(t.type==="file"&&t.files){const n=Array.from(t.files);return t.multiple?n:n[0]}if(kf(t))return Array.from(t.options).filter(n=>n.selected&&!n.disabled).map(ua);if(Mi(t)){const n=Array.from(t.options).find(o=>o.selected);return n?ua(n):t.value}return Sf(t)}function Vf(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?Zn(e)&&e._$$isNormalized?e:Zn(e)?Object.keys(e).reduce((n,o)=>{const r=xf(e[o]);return e[o]!==!1&&(n[o]=Gl(r)),n},t):typeof e!="string"?t:e.split("|").reduce((n,o)=>{const r=jf(o);return r.name&&(n[r.name]=Gl(r.params)),n},t):t}function xf(e){return e===!0?[]:Array.isArray(e)||Zn(e)?e:[e]}function Gl(e){const t=n=>typeof n=="string"&&n[0]==="@"?$f(n.slice(1)):n;return Array.isArray(e)?e.map(t):e instanceof RegExp?[e]:Object.keys(e).reduce((n,o)=>(n[o]=t(e[o]),n),{})}const jf=e=>{let t=[];const n=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:n,params:t}};function $f(e){const t=n=>un(n,e)||n[e];return t.__locatorRef=e,t}const Nf={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let Mf=Object.assign({},Nf);const yo=()=>Mf;async function Af(e,t,n={}){const o=n?.bails,r={name:n?.name||"{field}",rules:t,label:n?.label,bails:o??!0,formData:n?.values||{}},a=await Of(r,e);return Object.assign(Object.assign({},a),{valid:!a.errors.length})}async function Of(e,t){const n=e.rules;if(yn(n)||Ni(n))return Ff(t,Object.assign(Object.assign({},e),{rules:n}));if(Rt(n)||Array.isArray(n)){const s={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:t},i=Array.isArray(n)?n:[n],u=i.length,c=[];for(let m=0;m<u;m++){const y=i[m],h=await y(t,s);if(!(typeof h!="string"&&!Array.isArray(h)&&h)){if(Array.isArray(h))c.push(...h);else{const C=typeof h=="string"?h:Fi(s);c.push(C)}if(e.bails)return{errors:c}}}return{errors:c}}const o=Object.assign(Object.assign({},e),{rules:Vf(n)}),r=[],a=Object.keys(o.rules),l=a.length;for(let s=0;s<l;s++){const i=a[s],u=await Ef(o,t,{name:i,params:o.rules[i]});if(u.error&&(r.push(u.error),e.bails))return{errors:r}}return{errors:r}}function Tf(e){return!!e&&e.name==="ValidationError"}function Ti(e){return{__type:"VVTypedSchema",async parse(n,o){var r;try{return{output:await e.validate(n,{abortEarly:!1,context:o?.formData||{}}),errors:[]}}catch(a){if(!Tf(a))throw a;if(!(!((r=a.inner)===null||r===void 0)&&r.length)&&a.errors.length)return{errors:[{path:a.path,errors:a.errors}]};const l=a.inner.reduce((s,i)=>{const u=i.path||"";return s[u]||(s[u]={errors:[],path:u}),s[u].errors.push(...i.errors),s},{});return{errors:Object.values(l)}}}}}async function Ff(e,t){const o=await(yn(t.rules)?t.rules:Ti(t.rules)).parse(e,{formData:t.formData}),r=[];for(const a of o.errors)a.errors.length&&r.push(...a.errors);return{value:o.value,errors:r}}async function Ef(e,t,n){const o=mf(n.name);if(!o)throw new Error(`No such validator '${n.name}' exists.`);const r=Pf(n.params,e.formData),a={field:e.label||e.name,name:e.name,label:e.label,value:t,form:e.formData,rule:Object.assign(Object.assign({},n),{params:r})},l=await o(t,r,a);return typeof l=="string"?{error:l}:{error:l?void 0:Fi(a)}}function Fi(e){const t=yo().generateMessage;return t?t(e):"Field is invalid"}function Pf(e,t){const n=o=>gf(o)?o(t):o;return Array.isArray(e)?e.map(n):Object.keys(e).reduce((o,r)=>(o[r]=n(e[r]),o),{})}async function If(e,t){const o=await(yn(e)?e:Ti(e)).parse(Le(t)),r={},a={};for(const l of o.errors){const s=l.errors,i=(l.path||"").replace(/\["(\d+)"\]/g,(u,c)=>`[${c}]`);r[i]={valid:!s.length,errors:s},s.length&&(a[i]=s[0])}return{valid:!o.errors.length,results:r,errors:a,values:o.value,source:"schema"}}async function Bf(e,t,n){const r=Mt(e).map(async u=>{var c,m,y;const h=(c=n?.names)===null||c===void 0?void 0:c[u],j=await Af(un(t,u),e[u],{name:h?.name||u,label:h?.label,values:t,bails:(y=(m=n?.bailsMap)===null||m===void 0?void 0:m[u])!==null&&y!==void 0?y:!0});return Object.assign(Object.assign({},j),{path:u})});let a=!0;const l=await Promise.all(r),s={},i={};for(const u of l)s[u.path]={valid:u.valid,errors:u.errors},u.valid||(a=!1,i[u.path]=u.errors[0]);return{valid:a,results:s,errors:i,source:"schema"}}let Rf=0;const or=["bails","fieldsCount","id","multiple","type","validate"];function Ei(e){const t=e?.initialValues||{},n=Object.assign({},We(t)),o=b(e?.validationSchema);return o&&yn(o)&&Rt(o.cast)?Le(o.cast(n)||{}):Le(n)}function Sn(e){var t;const n=Rf++;let o=0;const r=ie(!1),a=ie(!1),l=ie(0),s=[],i=An(Ei(e)),u=ie([]),c=ie({}),m=ie({}),y=Df(()=>{m.value=u.value.reduce((x,V)=>(x[tr(We(V.path))]=V,x),{})});function h(x,V){const P=z(x);if(!P){typeof x=="string"&&(c.value[tr(x)]=Kl(V));return}if(typeof x=="string"){const ee=tr(x);c.value[ee]&&delete c.value[ee]}P.errors=Kl(V),P.valid=!P.errors.length}function j(x){Mt(x).forEach(V=>{h(V,x[V])})}e?.initialErrors&&j(e.initialErrors);const C=g(()=>{const x=u.value.reduce((V,P)=>(P.errors.length&&(V[P.path]=P.errors),V),{});return Object.assign(Object.assign({},c.value),x)}),$=g(()=>Mt(C.value).reduce((x,V)=>{const P=C.value[V];return P?.length&&(x[V]=P[0]),x},{})),F=g(()=>u.value.reduce((x,V)=>(x[V.path]={name:V.path||"",label:V.label||""},x),{})),R=g(()=>u.value.reduce((x,V)=>{var P;return x[V.path]=(P=V.bails)!==null&&P!==void 0?P:!0,x},{})),ne=Object.assign({},e?.initialErrors||{}),M=(t=e?.keepValuesOnUnmount)!==null&&t!==void 0?t:!1,{initialValues:A,originalInitialValues:ae,setInitialValues:de}=Uf(u,i,e),oe=Yf(u,i,ae,$),he=g(()=>u.value.reduce((x,V)=>{const P=un(i,V.path);return rn(x,V.path,P),x},{})),Ve=e?.validationSchema;function Ee(x,V){var P,ee;const fe=g(()=>un(A.value,We(x))),De=m.value[We(x)],le=V?.type==="checkbox"||V?.type==="radio";if(De&&le){De.multiple=!0;const $t=o++;return Array.isArray(De.id)?De.id.push($t):De.id=[De.id,$t],De.fieldsCount++,De.__flags.pendingUnmount[$t]=!1,De}const $e=g(()=>un(i,We(x))),Je=We(x),ot=H.findIndex($t=>$t===Je);ot!==-1&&H.splice(ot,1);const Ue=g(()=>{var $t,io,Kr,zr;const Gr=We(Ve);if(yn(Gr))return(io=($t=Gr.describe)===null||$t===void 0?void 0:$t.call(Gr,We(x)).required)!==null&&io!==void 0?io:!1;const Qr=We(V?.schema);return yn(Qr)&&(zr=(Kr=Qr.describe)===null||Kr===void 0?void 0:Kr.call(Qr).required)!==null&&zr!==void 0?zr:!1}),rt=o++,yt=An({id:rt,path:x,touched:!1,pending:!1,valid:!0,validated:!!(!((P=ne[Je])===null||P===void 0)&&P.length),required:Ue,initialValue:fe,errors:La([]),bails:(ee=V?.bails)!==null&&ee!==void 0?ee:!1,label:V?.label,type:V?.type||"default",value:$e,multiple:!1,__flags:{pendingUnmount:{[rt]:!1},pendingReset:!1},fieldsCount:1,validate:V?.validate,dirty:g(()=>!xo(b($e),b(fe)))});return u.value.push(yt),m.value[Je]=yt,y(),$.value[Je]&&!ne[Je]&&Dt(()=>{G(Je,{mode:"silent"})}),ce(x)&&ut(x,$t=>{y();const io=Le($e.value);m.value[$t]=yt,Dt(()=>{rn(i,$t,io)})}),yt}const gt=Hl(re,5),dt=Hl(re,5),Qe=Cf(async x=>await(x==="silent"?gt():dt()),(x,[V])=>{const P=Mt(ft.errorBag.value),fe=[...new Set([...Mt(x.results),...u.value.map(De=>De.path),...P])].sort().reduce((De,le)=>{var $e;const Je=le,ot=z(Je)||ue(Je),Ue=(($e=x.results[Je])===null||$e===void 0?void 0:$e.errors)||[],rt=We(ot?.path)||Je,yt=Lf({errors:Ue,valid:!Ue.length},De.results[rt]);return De.results[rt]=yt,yt.valid||(De.errors[rt]=yt.errors[0]),ot&&c.value[rt]&&delete c.value[rt],ot?(ot.valid=yt.valid,V==="silent"||V==="validated-only"&&!ot.validated||h(ot,yt.errors),De):(h(rt,Ue),De)},{valid:x.valid,results:{},errors:{},source:x.source});return x.values&&(fe.values=x.values,fe.source=x.source),Mt(fe.results).forEach(De=>{var le;const $e=z(De);$e&&V!=="silent"&&(V==="validated-only"&&!$e.validated||h($e,(le=fe.results[De])===null||le===void 0?void 0:le.errors))}),fe});function Pe(x){u.value.forEach(x)}function z(x){const V=typeof x=="string"?tr(x):x;return typeof V=="string"?m.value[V]:V}function ue(x){return u.value.filter(P=>x.startsWith(P.path)).reduce((P,ee)=>P?ee.path.length>P.path.length?ee:P:ee,void 0)}let H=[],O;function D(x){return H.push(x),O||(O=Dt(()=>{[...H].sort().reverse().forEach(P=>{ql(i,P)}),H=[],O=null})),O}function K(x){return function(P,ee){return function(De){return De instanceof Event&&(De.preventDefault(),De.stopPropagation()),Pe(le=>le.touched=!0),r.value=!0,l.value++,Z().then(le=>{const $e=Le(i);if(le.valid&&typeof P=="function"){const Je=Le(he.value);let ot=x?Je:$e;return le.values&&(ot=le.source==="schema"?le.values:Object.assign({},ot,le.values)),P(ot,{evt:De,controlledValues:Je,setErrors:j,setFieldError:h,setTouched:J,setFieldTouched:so,setValues:Pn,setFieldValue:Ct,resetForm:L,resetField:Y})}!le.valid&&typeof ee=="function"&&ee({values:$e,evt:De,errors:le.errors,results:le.results})}).then(le=>(r.value=!1,le),le=>{throw r.value=!1,le})}}}const ct=K(!1);ct.withControlled=K(!0);function En(x,V){const P=u.value.findIndex(fe=>fe.path===x&&(Array.isArray(fe.id)?fe.id.includes(V):fe.id===V)),ee=u.value[P];if(!(P===-1||!ee)){if(Dt(()=>{G(x,{mode:"silent",warn:!1})}),ee.multiple&&ee.fieldsCount&&ee.fieldsCount--,Array.isArray(ee.id)){const fe=ee.id.indexOf(V);fe>=0&&ee.id.splice(fe,1),delete ee.__flags.pendingUnmount[V]}(!ee.multiple||ee.fieldsCount<=0)&&(u.value.splice(P,1),X(x),y(),delete m.value[x])}}function Hr(x){Mt(m.value).forEach(V=>{V.startsWith(x)&&delete m.value[V]}),u.value=u.value.filter(V=>!V.path.startsWith(x)),Dt(()=>{y()})}const ft={formId:n,values:i,controlledValues:he,errorBag:C,errors:$,schema:Ve,submitCount:l,meta:oe,isSubmitting:r,isValidating:a,fieldArrays:s,keepValuesOnUnmount:M,validateSchema:b(Ve)?Qe:void 0,validate:Z,setFieldError:h,validateField:G,setFieldValue:Ct,setValues:Pn,setErrors:j,setFieldTouched:so,setTouched:J,resetForm:L,resetField:Y,handleSubmit:ct,useFieldModel:je,defineInputBinds:Ie,defineComponentBinds:Me,defineField:be,stageInitialValue:q,unsetInitialValue:X,setFieldInitialValue:me,createPathState:Ee,getPathState:z,unsetPathValue:D,removePathState:En,initialValues:A,getAllPathStates:()=>u.value,destroyPath:Hr,isFieldTouched:w,isFieldDirty:S,isFieldValid:T};function Ct(x,V,P=!0){const ee=Le(V),fe=typeof x=="string"?x:x.path;z(fe)||Ee(fe),rn(i,fe,ee),P&&G(fe)}function lo(x,V=!0){Mt(i).forEach(P=>{delete i[P]}),Mt(x).forEach(P=>{Ct(P,x[P],!1)}),V&&Z()}function Pn(x,V=!0){Fo(i,x),s.forEach(P=>P&&P.reset()),V&&Z()}function tn(x,V){const P=z(We(x))||Ee(x);return g({get(){return P.value},set(ee){var fe;const De=We(x);Ct(De,ee,(fe=We(V))!==null&&fe!==void 0?fe:!1)}})}function so(x,V){const P=z(x);P&&(P.touched=V)}function w(x){const V=z(x);return V?V.touched:u.value.filter(P=>P.path.startsWith(x)).some(P=>P.touched)}function S(x){const V=z(x);return V?V.dirty:u.value.filter(P=>P.path.startsWith(x)).some(P=>P.dirty)}function T(x){const V=z(x);return V?V.valid:u.value.filter(P=>P.path.startsWith(x)).every(P=>P.valid)}function J(x){if(typeof x=="boolean"){Pe(V=>{V.touched=x});return}Mt(x).forEach(V=>{so(V,!!x[V])})}function Y(x,V){var P;const ee=V&&"value"in V?V.value:un(A.value,x),fe=z(x);fe&&(fe.__flags.pendingReset=!0),me(x,Le(ee),!0),Ct(x,ee,!1),so(x,(P=V?.touched)!==null&&P!==void 0?P:!1),h(x,V?.errors||[]),Dt(()=>{fe&&(fe.__flags.pendingReset=!1)})}function L(x,V){let P=Le(x?.values?x.values:ae.value);P=V?.force?P:Fo(ae.value,P),P=yn(Ve)&&Rt(Ve.cast)?Ve.cast(P):P,de(P,{force:V?.force}),Pe(ee=>{var fe;ee.__flags.pendingReset=!0,ee.validated=!1,ee.touched=((fe=x?.touched)===null||fe===void 0?void 0:fe[ee.path])||!1,Ct(ee.path,un(P,ee.path),!1),h(ee.path,void 0)}),V?.force?lo(P,!1):Pn(P,!1),j(x?.errors||{}),l.value=x?.submitCount||0,Dt(()=>{Z({mode:"silent"}),Pe(ee=>{ee.__flags.pendingReset=!1})})}async function Z(x){const V=x?.mode||"force";if(V==="force"&&Pe(le=>le.validated=!0),ft.validateSchema)return ft.validateSchema(V);a.value=!0;const P=await Promise.all(u.value.map(le=>le.validate?le.validate(x).then($e=>({key:le.path,valid:$e.valid,errors:$e.errors,value:$e.value})):Promise.resolve({key:le.path,valid:!0,errors:[],value:void 0})));a.value=!1;const ee={},fe={},De={};for(const le of P)ee[le.key]={valid:le.valid,errors:le.errors},le.value&&rn(De,le.key,le.value),le.errors.length&&(fe[le.key]=le.errors[0]);return{valid:P.every(le=>le.valid),results:ee,errors:fe,values:De,source:"fields"}}async function G(x,V){var P;const ee=z(x);if(ee&&V?.mode!=="silent"&&(ee.validated=!0),Ve){const{results:fe}=await Qe(V?.mode||"validated-only");return fe[x]||{errors:[],valid:!0}}return ee?.validate?ee.validate(V):(!ee&&(P=V?.warn),Promise.resolve({errors:[],valid:!0}))}function X(x){ql(A.value,x)}function q(x,V,P=!1){me(x,V),rn(i,x,V),P&&!e?.initialValues&&rn(ae.value,x,Le(V))}function me(x,V,P=!1){rn(A.value,x,Le(V)),P&&rn(ae.value,x,Le(V))}async function re(){const x=b(Ve);if(!x)return{valid:!0,results:{},errors:{},source:"none"};a.value=!0;const V=Ni(x)||yn(x)?await If(x,i):await Bf(x,i,{names:F.value,bailsMap:R.value});return a.value=!1,V}const pe=ct((x,{evt:V})=>{_f(V)&&V.target.submit()});_t(()=>{if(e?.initialErrors&&j(e.initialErrors),e?.initialTouched&&J(e.initialTouched),e?.validateOnMount){Z();return}ft.validateSchema&&ft.validateSchema("silent")}),ce(Ve)&&ut(Ve,()=>{var x;(x=ft.validateSchema)===null||x===void 0||x.call(ft,"validated-only")}),Ha(vf,ft);function be(x,V){const P=Rt(V)?void 0:V?.label,ee=z(We(x))||Ee(x,{label:P}),fe=()=>Rt(V)?V(nr(ee,or)):V||{};function De(){var Ue;ee.touched=!0,((Ue=fe().validateOnBlur)!==null&&Ue!==void 0?Ue:yo().validateOnBlur)&&G(ee.path)}function le(){var Ue;((Ue=fe().validateOnInput)!==null&&Ue!==void 0?Ue:yo().validateOnInput)&&Dt(()=>{G(ee.path)})}function $e(){var Ue;((Ue=fe().validateOnChange)!==null&&Ue!==void 0?Ue:yo().validateOnChange)&&Dt(()=>{G(ee.path)})}const Je=g(()=>{const Ue={onChange:$e,onInput:le,onBlur:De};return Rt(V)?Object.assign(Object.assign({},Ue),V(nr(ee,or)).props||{}):V?.props?Object.assign(Object.assign({},Ue),V.props(nr(ee,or))):Ue});return[tn(x,()=>{var Ue,rt,yt;return(yt=(Ue=fe().validateOnModelUpdate)!==null&&Ue!==void 0?Ue:(rt=yo())===null||rt===void 0?void 0:rt.validateOnModelUpdate)!==null&&yt!==void 0?yt:!0}),Je]}function je(x){return Array.isArray(x)?x.map(V=>tn(V,!0)):tn(x)}function Ie(x,V){const[P,ee]=be(x,V);function fe(){ee.value.onBlur()}function De($e){const Je=zl($e);Ct(We(x),Je,!1),ee.value.onInput()}function le($e){const Je=zl($e);Ct(We(x),Je,!1),ee.value.onChange()}return g(()=>Object.assign(Object.assign({},ee.value),{onBlur:fe,onInput:De,onChange:le,value:P.value}))}function Me(x,V){const[P,ee]=be(x,V),fe=z(We(x));function De(le){P.value=le}return g(()=>{const le=Rt(V)?V(nr(fe,or)):V||{};return Object.assign({[le.model||"modelValue"]:P.value,[`onUpdate:${le.model||"modelValue"}`]:De},ee.value)})}return Object.assign(Object.assign({},ft),{values:Ra(i),handleReset:()=>L(),submitForm:pe})}function Yf(e,t,n,o){const r={touched:"some",pending:"some",valid:"every"},a=g(()=>!xo(t,b(n)));function l(){const i=e.value;return Mt(r).reduce((u,c)=>{const m=r[c];return u[c]=i[m](y=>y[c]),u},{})}const s=An(l());return oo(()=>{const i=l();s.touched=i.touched,s.valid=i.valid,s.pending=i.pending}),g(()=>Object.assign(Object.assign({initialValues:b(n)},s),{valid:s.valid&&!Mt(o.value).length,dirty:a.value}))}function Uf(e,t,n){const o=Ei(n),r=ie(o),a=ie(Le(o));function l(s,i){i?.force?(r.value=Le(s),a.value=Le(s)):(r.value=Fo(Le(r.value)||{},Le(s)),a.value=Fo(Le(a.value)||{},Le(s))),i?.updateFields&&e.value.forEach(u=>{if(u.touched)return;const m=un(r.value,u.path);rn(t,u.path,Le(m))})}return{initialValues:r,originalInitialValues:a,setInitialValues:l}}function Lf(e,t){return t?{valid:e.valid&&t.valid,errors:[...e.errors,...t.errors]}:e}var da;function Pi(e){return{lang:e?.lang??da?.lang,message:e?.message,abortEarly:e?.abortEarly??da?.abortEarly,abortPipeEarly:e?.abortPipeEarly??da?.abortPipeEarly}}function Wf(e){if(e.path){let t="";for(const n of e.path)if("key"in n&&(typeof n.key=="string"||typeof n.key=="number"))t?t+=`.${n.key}`:t+=n.key;else return null;return t}return null}function Ii(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function Bi(e,...t){const n={kind:"schema",type:"optional",reference:Bi,expects:`${e.expects} | undefined`,async:!1,wrapped:e,_run(o,r){return o.value===void 0&&("default"in this&&(o.value=Ii(this,o,r)),o.value===void 0)?(o.typed=!0,o):this.wrapped._run(o,r)}};return 0 in t&&(n.default=t[0]),n}function Jf(e,t,n){const o=e._run({typed:!1,value:t},Pi(n));return{typed:o.typed,success:!o.issues,output:o.value,issues:o.issues}}async function qf(e,t,n){const o=await e._run({typed:!1,value:t},Pi(n));return{typed:o.typed,success:!o.issues,output:o.value,issues:o.issues}}/**
  * vee-validate v4.13.2
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */const Sr=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function Ri(e){return Number(e)>=0}function Hf(e){return typeof e=="object"&&e!==null}function Kf(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function Ql(e){if(!Hf(e)||Kf(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Yi(e,t){return Object.keys(t).forEach(n=>{if(Ql(t[n])&&Ql(e[n])){e[n]||(e[n]={}),Yi(e[n],t[n]);return}e[n]=t[n]}),e}function zf(e){const t=e.split(".");if(!t.length)return"";let n=String(t[0]);for(let o=1;o<t.length;o++){if(Ri(t[o])){n+=`[${t[o]}]`;continue}n+=`.${t[o]}`}return n}function Vn(e){return{__type:"VVTypedSchema",async parse(n){const o=await qf(e,n);if(o.success)return{value:o.output,errors:[]};const r={};return Ui(o.issues,r),{errors:Object.values(r)}},cast(n){if(e.async)return n;const o=Jf(e,n);if(o.success)return o.output;const r=Ii(Bi(e));return Sr(r)&&Sr(n)?Yi(r,n):n},describe(n){try{if(!n)return{required:!Xl(e),exists:!0};const o=Gf(n,e);return o?{required:!Xl(o),exists:!0}:{required:!1,exists:!1}}catch{return{required:!1,exists:!1}}}}}function Ui(e,t){e.forEach(n=>{const o=zf(Wf(n)||"");n.issues&&(Ui(n.issues.flatMap(r=>r.issues||[]),t),!o)||(t[o]||(t[o]={errors:[],path:o}),t[o].errors.push(n.message))})}function Gf(e,t){if(!Zl(t))return null;if(Wo(e))return t.entries[Yr(e)];const n=(e||"").split(/\.|\[(\d+)\]/).filter(Boolean);let o=t;for(let r=0;r<=n.length;r++){const a=n[r];if(!a||!o)return o;if(Zl(o)){o=o.entries[a]||null;continue}Ri(a)&&Qf(o)&&(o=o.item)}return null}function Xl(e){return e.type==="optional"}function Qf(e){return Sr(e)&&"item"in e}function Zl(e){return Sr(e)&&"entries"in e}var Xf;function Zf(e){return Xf?.get(e)}var ep;function tp(e){return ep?.get(e)}var np;function op(e,t){return np?.get(e)?.get(t)}function tl(e){const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function Jt(e,t,n,o,r){const a=r&&"input"in r?r.input:n.value,l=r?.expected??e.expects??null,s=r?.received??tl(a),i={kind:e.kind,type:e.type,input:a,expected:l,received:s,message:`Invalid ${t}: ${l?`Expected ${l} but r`:"R"}eceived ${s}`,requirement:e.requirement,path:r?.path,issues:r?.issues,lang:o.lang,abortEarly:o.abortEarly,abortPipeEarly:o.abortPipeEarly},u=e.kind==="schema",c=r?.message??e.message??op(e.reference,i.lang)??(u?tp(i.lang):null)??o.message??Zf(i.lang);c&&(i.message=typeof c=="function"?c(i):c),u&&(n.typed=!1),n.issues?n.issues.push(i):n.issues=[i]}function Li(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}function Jo(e,t){return{kind:"validation",type:"check",reference:Jo,async:!1,expects:null,requirement:e,message:t,_run(n,o){return n.typed&&!this.requirement(n.value)&&Jt(this,"input",n,o),n}}}function en(e){return{kind:"validation",type:"non_empty",reference:en,async:!1,expects:"!0",message:e,_run(t,n){return t.typed&&t.value.length===0&&Jt(this,"length",t,n,{received:"0"}),t}}}function rp(e,t){if(e.issues)for(const n of t)for(const o of e.issues){let r=!1;const a=Math.min(n.length,o.path?.length??0);for(let l=0;l<a;l++)if(n[l]!==o.path[l].key){r=!0;break}if(!r)return!1}return!0}function qo(e,t,n){return{kind:"validation",type:"partial_check",reference:qo,async:!1,expects:null,requirement:t,message:n,_run(o,r){return rp(o,e)&&!this.requirement(o.value)&&Jt(this,"input",o,r),o}}}function Ur(e,t){return{...e,_run(n,o){const r=n.issues&&[...n.issues];if(e._run(n,o),n.issues){for(const a of n.issues)if(!r?.includes(a)){let l=n.value;for(const s of t){const i=l[s],u={type:"unknown",origin:"value",input:l,key:s,value:i};if(a.path?a.path.push(u):a.path=[u],!i)break;l=i}}}return n}}}function fn(e){return{kind:"schema",type:"boolean",reference:fn,expects:"boolean",async:!1,message:e,_run(t,n){return typeof t.value=="boolean"?t.typed=!0:Jt(this,"type",t,n),t}}}function cr(e,t){return{kind:"schema",type:"literal",reference:cr,expects:tl(e),async:!1,literal:e,message:t,_run(n,o){return n.value===this.literal?n.typed=!0:Jt(this,"type",n,o),n}}}function nl(e){return{kind:"schema",type:"number",reference:nl,expects:"number",async:!1,message:e,_run(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:Jt(this,"type",t,n),t}}}function Pt(e,t){return{kind:"schema",type:"object",reference:Pt,expects:"Object",async:!1,entries:e,message:t,_run(n,o){const r=n.value;if(r&&typeof r=="object"){n.typed=!0,n.value={};for(const a in this.entries){const l=r[a],s=this.entries[a]._run({typed:!1,value:l},o);if(s.issues){const i={type:"object",origin:"value",input:r,key:a,value:l};for(const u of s.issues)u.path?u.path.unshift(i):u.path=[i],n.issues?.push(u);if(n.issues||(n.issues=s.issues),o.abortEarly){n.typed=!1;break}}s.typed||(n.typed=!1),(s.value!==void 0||a in r)&&(n.value[a]=s.value)}}else Jt(this,"type",n,o);return n}}}function Tt(e,t){return{kind:"schema",type:"picklist",reference:Tt,expects:Li(e.map(tl),"|"),async:!1,options:e,message:t,_run(n,o){return this.options.includes(n.value)?n.typed=!0:Jt(this,"type",n,o),n}}}function tt(e){return{kind:"schema",type:"string",reference:tt,expects:"string",async:!1,message:e,_run(t,n){return typeof t.value=="string"?t.typed=!0:Jt(this,"type",t,n),t}}}function Wi(e,t,n){return{kind:"schema",type:"variant",reference:Wi,expects:"Object",async:!1,key:e,options:t,message:n,_run(o,r){const a=o.value;if(a&&typeof a=="object"){let l,s=0,i=this.key,u=[];const c=(m,y)=>{for(const h of m.options){if(h.type==="variant")c(h,new Set(y).add(h.key));else{let j=!0,C=0;for(const $ of y){if(h.entries[$]._run({typed:!1,value:a[$]},r).issues){j=!1,i!==$&&(s<C||s===C&&$ in a&&!(i in a))&&(s=C,i=$,u=[]),i===$&&u.push(h.entries[$].expects);break}C++}if(j){const $=h._run({typed:!1,value:a},r);(!l||!l.typed&&$.typed)&&(l=$)}}if(l&&!l.issues)break}};if(c(this,new Set([this.key])),l)return l;Jt(this,"type",o,r,{input:a[i],expected:Li(u,"|"),path:[{type:"object",origin:"value",input:a,key:i,value:a[i]}]})}else Jt(this,"type",o,r);return o}}}function jt(...e){return{...e[0],pipe:e,_run(t,n){for(const o of e)if(o.kind!=="metadata"){if(t.issues&&(o.kind==="schema"||o.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=o._run(t,n))}return t}}}const ap=["placeholder","disabled","min","max"],lp=B({__name:"ObsidianNumberInput",props:It({placeholder:{},disabled:{type:Boolean},min:{},max:{},narrow:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Bt(e,"modelValue");return(n,o)=>Tn((p(),k("input",{"onUpdate:modelValue":o[0]||(o[0]=r=>t.value=r),type:"number",class:kt({"narrow-input":n.narrow}),placeholder:n.placeholder,disabled:n.disabled,min:n.min,max:n.max,spellcheck:"false"},null,10,ap)),[[Lo,t.value]])}}),pn=ye(lp,[["__scopeId","data-v-d49aaf69"]]);function Ji(e,t,n){const o=ie([]),r=ve();return oo(()=>{const a=Q(e.value);if(!a.isValid())return;const l=Ne(),s=a.clone().startOf("month").startOf("week"),i=a.clone().endOf("month").endOf("week"),u=r.calendarViewSettings.weeks||"left",c=t?.value?Q(t.value):null,m=n?.value?Q(n.value):null,y=[],h=s.clone();for(;h.isSameOrBefore(i);)u==="left"&&h.isSame(h.clone().startOf("week"),"day")&&y.push({date:h.format("[W]w"),key:h.format(we),outside:!1,isWeekNumber:!0,disabled:!!c&&h.clone().endOf("week").isBefore(c,"day")||!!m&&h.clone().startOf("week").isAfter(m,"day")}),y.push({date:h.format("D"),key:h.format(we),today:h.isSame(l,"day"),outside:!a.isSame(h,"month"),isWeekNumber:!1,disabled:!!c&&h.isBefore(c,"day")||!!m&&h.isAfter(m,"day")}),u==="right"&&h.isSame(h.clone().endOf("week"),"day")&&y.push({date:h.format("[W]w"),key:h.format(we),outside:!1,isWeekNumber:!0,disabled:!!c&&h.clone().endOf("week").isBefore(c,"day")||!!m&&h.clone().startOf("week").isAfter(m,"day")}),h.add(1,"day");o.value=y}),{grid:o}}const eo=B({__name:"FormattedDate",props:{date:{},format:{}},setup(e){const t=g(()=>typeof e.date=="string"?Q(e.date):e.date);return(n,o)=>(p(),k("span",null,I(t.value.format(n.format)),1))}}),es=Wi("type",[Pt({type:cr("transparent")}),Pt({type:cr("theme"),name:tt()}),Pt({type:cr("custom"),color:tt()})]);function wt(e){switch(e.type){case"transparent":return"transparent";case"theme":return`var(--${e.name})`;case"custom":return e.color}}const sp={class:"calendar"},ip={class:"calendar-header"},up={class:"calendar-grid"},dp=B({__name:"CalendarGrid",props:{columns:{},compactFirstLine:{type:Boolean}},setup(e){Cn(s=>({"3ff9bc46":s.columns,"6a4faaac":l.value,"5e19d0ce":n.value,"7ca31eb8":o.value,"2d860834":r.value,"83663aea":a.value}));const t=ve(),n=g(()=>wt(t.calendarViewSettings.todayStyle.color)),o=g(()=>wt(t.calendarViewSettings.todayStyle.background)),r=g(()=>wt(t.calendarViewSettings.activeStyle.color)),a=g(()=>wt(t.calendarViewSettings.activeStyle.background)),l=g(()=>e.compactFirstLine?"1.2em repeat(auto-fill, 28px)":"repeat(auto-fill, 28px)");return(s,i)=>(p(),k("div",sp,[v("div",ip,[ze(s.$slots,"header",{},void 0,!0)]),v("div",up,[ze(s.$slots,"default",{},void 0,!0)])]))}}),ao=ye(dp,[["__scopeId","data-v-022112ed"]]),cp=["disabled"],fp=B({__name:"CalendarButton",props:{disabled:{type:Boolean},clickable:{type:Boolean}},setup(e){return(t,n)=>(p(),k("button",{disabled:t.disabled,class:kt({clickable:t.clickable})},[ze(t.$slots,"default",{},void 0,!0)],10,cp))}}),Ho=ye(fp,[["__scopeId","data-v-55c8ecf1"]]);function pp(){const e=ie([]),t=ve();return ut(()=>t.calendarSettings.dow,()=>{const n=Ne().startOf("week"),o=n.clone().endOf("week"),r=[];for(;n.isSameOrBefore(o);)r.push(n.format("ddd")),n.add(1,"day");e.value=r},{immediate:!0}),e}const mp={key:0},vp={key:1},hp=B({__name:"CalendarWeekdays",setup(e){const t=ve(),n=pp();return(o,r)=>(p(),k(W,null,[b(t).calendarViewSettings.weeks==="left"?(p(),k("div",mp)):U("",!0),(p(!0),k(W,null,Ce(b(n),a=>(p(),k("div",{key:a,class:"week-day"},[v("span",null,I(a),1)]))),128)),b(t).calendarViewSettings.weeks==="right"?(p(),k("div",vp)):U("",!0)],64))}}),ol=ye(hp,[["__scopeId","data-v-aa55b3de"]]),gp=B({__name:"CalendarMonthView",props:{refDate:{},selectedDate:{},min:{},max:{}},emits:["select"],setup(e){const t=ve(),n=g(()=>t.calendarViewSettings.weeks==="none"?7:8),{grid:o}=Ji(g(()=>e.refDate),g(()=>e.min),g(()=>e.max));return(r,a)=>(p(),E(ao,{columns:n.value,"compact-first-line":""},{header:f(()=>[ze(r.$slots,"header",{},()=>[d(eo,{date:r.refDate,format:"MMMM YYYY"},null,8,["date"])])]),default:f(()=>[d(ol),(p(!0),k(W,null,Ce(b(o),l=>(p(),E(Ho,{key:l.key+(l.isWeekNumber?"week":"day"),clickable:!l.disabled,disabled:l.disabled,"data-outside":l.outside||null,"data-today":l.today||null,"data-selected":r.selectedDate===l.key||null,onClick:s=>r.$emit("select",l.key,s)},{default:f(()=>[_(I(l.date),1)]),_:2},1032,["clickable","disabled","data-outside","data-today","data-selected","onClick"]))),128))]),_:3},8,["columns"]))}});function yp(e,t,n){const o=ie([]),r=g(()=>Q(e.value));return oo(()=>{if(!r.value.isValid())return;const a=[],l=t?.value?Q(t.value):null,s=n?.value?Q(n.value):null;for(let i=0;i<4;i++){const u=r.value.clone().quarter(i);a.push({date:u.format(ji.quarter),key:u.format(we),disabled:!!l&&u.clone().endOf("quarter").isBefore(l)||!!s&&u.isAfter(s)})}o.value=a}),{grid:o}}const bp={class:"calendar-quarter-grid"},wp=B({__name:"CalendarQuarterView",props:{refDate:{},min:{},max:{}},emits:["select"],setup(e){const{grid:t}=yp(g(()=>e.refDate),g(()=>e.min),g(()=>e.max));return(n,o)=>(p(),E(ao,{columns:2},{header:f(()=>[ze(n.$slots,"header",{},()=>[d(eo,{date:n.refDate,format:"YYYY"},null,8,["date"])])]),default:f(()=>[v("div",bp,[(p(!0),k(W,null,Ce(b(t),r=>(p(),E(Ho,{key:r.key,clickable:"","data-selected":b(Xa)("quarter",r.date,n.refDate)||null,onClick:a=>n.$emit("select",r.key)},{default:f(()=>[_(I(r.date),1)]),_:2},1032,["data-selected","onClick"]))),128))])]),_:3}))}});function kp(e,t,n){const o=ie([]);return oo(()=>{const r=Q(e.value);if(!r.isValid())return;const a=r.clone().startOf("year"),l=r.clone().endOf("year"),s=t?.value?Q(t.value):void 0,i=n?.value?Q(n.value):void 0,u=[],c=a.clone();for(;c.isSameOrBefore(l);)u.push({date:c.format("MMMM"),key:c.format(we),disabled:!!s&&c.clone().endOf("year").isBefore(s)||!!i&&c.clone().startOf("year").isAfter(i)}),c.add(1,"month");o.value=u}),{grid:o}}const _p=B({__name:"CalendarYearView",props:{refDate:{},min:{},max:{}},emits:["select"],setup(e){const{grid:t}=kp(g(()=>e.refDate),g(()=>e.min),g(()=>e.max));return(n,o)=>(p(),E(ao,{columns:3},{header:f(()=>[ze(n.$slots,"header",{},()=>[d(eo,{date:n.refDate,format:"YYYY"},null,8,["date"])])]),default:f(()=>[(p(!0),k(W,null,Ce(b(t),r=>(p(),E(Ho,{key:r.key,clickable:"","data-selected":b(Xa)("month",r.date,n.refDate)||null,onClick:a=>n.$emit("select",r.key)},{default:f(()=>[_(I(r.date),1)]),_:2},1032,["data-selected","onClick"]))),128))]),_:3}))}});function Cp(e,t,n){const o=ie([]),r=g(()=>Q(e.value)),a=g(()=>r.value.year()-r.value.year()%10),l=g(()=>a.value+9);return oo(()=>{if(!r.value.isValid())return;const s=[];for(let i=a.value-1;i<=l.value+1;i++){const u=r.value.clone().year(i);s.push({date:u.format("YYYY"),key:u.format(we),outside:i<a.value||i>l.value,disabled:!1})}o.value=s}),{grid:o,startYear:a,endYear:l}}const Dp=B({__name:"CalendarDecadeView",props:{refDate:{},min:{},max:{}},emits:["select"],setup(e){const{grid:t,startYear:n,endYear:o}=Cp(g(()=>e.refDate));return(r,a)=>(p(),E(ao,{columns:4},{header:f(()=>[ze(r.$slots,"header",{startYear:b(n),endYear:b(o)},()=>[v("div",null,I(b(n))+" - "+I(b(o)),1)])]),default:f(()=>[(p(!0),k(W,null,Ce(b(t),l=>(p(),E(Ho,{key:l.key,clickable:"","data-selected":b(Xa)("year",l.date,r.refDate)||null,"data-outside":l.outside||null,onClick:s=>r.$emit("select",l.key)},{default:f(()=>[_(I(l.date),1)]),_:2},1032,["data-selected","data-outside","onClick"]))),128))]),_:3}))}}),qi=B({__name:"DatePicker.modal",props:{selectedDate:{},picking:{},min:{},max:{}},emits:["select","close"],setup(e,{emit:t}){const n=e,o=t,r=ie("month");switch(n.picking){case"day":{r.value="month";break}case"week":{r.value="month";break}case"month":{r.value="month";break}case"quarter":{r.value="quarter";break}case"year":{r.value="decade";break}}const a=ie(n.selectedDate??Ne().format("YYYY-MM-DD")),l=g(()=>Q(a.value).startOf("month"));function s(C="month"){a.value=C==="decade"?l.value.subtract(10,"year").format("YYYY-MM-DD"):l.value.subtract(1,C).format("YYYY-MM-DD")}function i(C="month"){if(!n.min)return!0;const $=Q(n.min);return C==="decade"?l.value.clone().subtract(10,"year").isAfter($,"year"):l.value.clone().subtract(1,C).endOf(C).isAfter($)}function u(C="month"){a.value=C==="decade"?l.value.add(10,"year").format("YYYY-MM-DD"):l.value.add(1,C).format("YYYY-MM-DD")}function c(C="month"){if(!n.max)return!0;const $=Q(n.max);return C==="decade"?l.value.clone().add(10,"year").isBefore($,"year"):l.value.clone().add(1,C).startOf(C).isBefore($)}function m(C){n.picking==="week"?o("select",Q(a.value).startOf("week").format("YYYY-MM-DD")):o("select",C),o("close")}function y(C){n.picking==="month"?(o("select",C),o("close")):(a.value=C,r.value="month")}function h(C){n.picking==="quarter"?(o("select",C),o("close")):(a.value=C,r.value="month")}function j(C){n.picking==="year"?(o("select",C),o("close")):(a.value=C,r.value=n.picking==="quarter"?"quarter":"year")}return(C,$)=>r.value==="decade"?(p(),E(Dp,{key:0,"ref-date":a.value,min:C.min,max:C.max,onSelect:j},{header:f(({startYear:F,endYear:R})=>[d(ke,{icon:"arrow-left",tooltip:"Previous decade",onClick:$[0]||($[0]=ne=>s("decade"))}),_(" "+I(F)+" - "+I(R)+" ",1),d(ke,{icon:"arrow-right",tooltip:"Next decade",onClick:$[1]||($[1]=ne=>u("decade"))})]),_:1},8,["ref-date","min","max"])):r.value==="year"?(p(),E(_p,{key:1,"ref-date":a.value,min:C.min,max:C.max,onSelect:y},{header:f(()=>[i("year")?(p(),E(ke,{key:0,icon:"arrow-left",tooltip:"Previous year",onClick:$[2]||($[2]=F=>s("year"))})):U("",!0),d(se,{onClick:$[3]||($[3]=F=>r.value="decade")},{default:f(()=>[_(I(l.value.format("YYYY")),1)]),_:1}),c("year")?(p(),E(ke,{key:1,icon:"arrow-right",tooltip:"Next year",onClick:$[4]||($[4]=F=>u("year"))})):U("",!0)]),_:1},8,["ref-date","min","max"])):r.value==="quarter"?(p(),E(wp,{key:2,"ref-date":a.value,min:C.min,max:C.max,onSelect:h},{header:f(()=>[i("quarter")?(p(),E(ke,{key:0,icon:"arrow-left",tooltip:"Previous quarter",onClick:$[5]||($[5]=F=>s("quarter"))})):U("",!0),d(se,{onClick:$[6]||($[6]=F=>r.value="year")},{default:f(()=>[d(eo,{date:a.value,format:"YYYY"},null,8,["date"])]),_:1}),c("quarter")?(p(),E(ke,{key:1,icon:"arrow-right",tooltip:"Next quarter",onClick:$[7]||($[7]=F=>u("quarter"))})):U("",!0)]),_:1},8,["ref-date","min","max"])):(p(),E(gp,{key:3,"ref-date":a.value,"selected-date":C.selectedDate,min:C.min,max:C.max,onSelect:m},{header:f(()=>[i("month")?(p(),E(ke,{key:0,icon:"arrow-left",tooltip:"Previous month",onClick:$[8]||($[8]=F=>s("month"))})):U("",!0),d(se,{onClick:$[9]||($[9]=F=>r.value="year")},{default:f(()=>[d(eo,{date:a.value,format:"MMMM YYYY"},null,8,["date"])]),_:1}),c("month")?(p(),E(ke,{key:1,icon:"arrow-right",tooltip:"Next month",onClick:$[10]||($[10]=F=>u("month"))})):U("",!0)]),_:1},8,["ref-date","selected-date","min","max"]))}}),Sp=B({__name:"DatePicker",props:It({picking:{default:"day"},placeholder:{default:"Pick a date"},previewFormat:{default:"YYYY-MM-DD"},disabled:{type:Boolean},tooltip:{default:"Pick a date"},min:{default:""},max:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,n=ve(),o=Bt(e,"modelValue"),r=g(()=>o.value?Q(o.value):null),a=g(()=>r.value?r.value.format(t.previewFormat):t.placeholder);function l(){new Fe(n,"Pick a date",qi,{selectedDate:o.value,picking:t.picking,min:t.min,max:t.max,onSelect(s){o.value=s}},400).open()}return(s,i)=>(p(),E(se,{class:"date-picker",disabled:s.disabled,tooltip:s.tooltip,onClick:l},{default:f(()=>[d(Dn,{name:"calendar"}),i[0]||(i[0]=_()),v("span",null,I(a.value),1)]),_:1},8,["disabled","tooltip"]))}}),jo=ye(Sp,[["__scopeId","data-v-a9348bd1"]]),Vp={key:0,class:"journal-errors"},xp=B({__name:"FormErrors",props:{errors:{}},setup(e){return(t,n)=>t.errors?(p(),k("ul",Vp,[(p(!0),k(W,null,Ce(t.errors,o=>(p(),k("li",{key:o},I(o),1))),128))])):U("",!0)}}),it=ye(xp,[["__scopeId","data-v-c3a13f6e"]]);const rl=B({__name:"CreateJournal.modal",emits:["create","close"],setup(e,{emit:t}){const n=t,o=ve();function r(ne){return!o.hasJournal(ne)}const{defineField:a,errorBag:l,handleSubmit:s}=Sn({initialValues:{journalName:"",write:"day",every:"day",duration:1,anchorDate:""},validationSchema:Vn(jt(Pt({journalName:jt(tt(),en("Journal name is required"),Jo(r,"Journal name should be unique")),write:Tt(["day","week","month","quarter","year","custom"]),every:Tt(["day","week","month","quarter","year"]),duration:nl(),anchorDate:tt()}),Ur(qo([["write"],["anchorDate"]],ne=>ne.write==="custom"?!!ne.anchorDate:!0,"Please select an anchor date."),["anchorDate"])))}),[i,u]=a("journalName"),[c,m]=a("write"),[y,h]=a("every"),[j,C]=a("duration"),[$,F]=a("anchorDate"),R=s(ne=>{n("create",ne.journalName,ne.write==="custom"?{type:"custom",every:ne.every,duration:ne.duration,anchorDate:ne.anchorDate}:{type:ne.write}),n("close")});return(ne,M)=>(p(),k("form",{onSubmit:M[6]||(M[6]=qt((...A)=>b(R)&&b(R)(...A),["prevent"]))},[d(N,{name:"Journal name"},{description:f(()=>[d(it,{errors:b(l).journalName},null,8,["errors"])]),default:f(()=>[d(He,xe({modelValue:b(i),"onUpdate:modelValue":M[0]||(M[0]=A=>ce(i)?i.value=A:null),placeholder:"ex. Work"},b(u)),null,16,["modelValue"])]),_:1}),d(N,{name:"I'll be writing"},{default:f(()=>[d(Se,xe({modelValue:b(c),"onUpdate:modelValue":M[1]||(M[1]=A=>ce(c)?c.value=A:null)},b(m)),{default:f(()=>M[7]||(M[7]=[v("option",{value:"day"},"Daily",-1),v("option",{value:"week"},"Weekly",-1),v("option",{value:"month"},"Monthly",-1),v("option",{value:"quarter"},"Quarterly",-1),v("option",{value:"year"},"Annually",-1),v("option",{value:"custom"},"In custom intervals",-1)])),_:1},16,["modelValue"])]),_:1}),b(c)==="custom"?(p(),E(N,{key:0,name:"Every"},{default:f(()=>[d(pn,xe({modelValue:b(j),"onUpdate:modelValue":M[2]||(M[2]=A=>ce(j)?j.value=A:null)},b(C),{min:1}),null,16,["modelValue"]),d(Se,xe({modelValue:b(y),"onUpdate:modelValue":M[3]||(M[3]=A=>ce(y)?y.value=A:null)},b(h)),{default:f(()=>M[8]||(M[8]=[v("option",{value:"day"},"days",-1),v("option",{value:"week"},"weeks",-1),v("option",{value:"month"},"months",-1),v("option",{value:"quarter"},"quarters",-1),v("option",{value:"year"},"years",-1)])),_:1},16,["modelValue"])]),_:1})):U("",!0),b(c)==="custom"?(p(),E(N,{key:1,name:"Start date"},{description:f(()=>[M[9]||(M[9]=_(" This date will be used to start counting intervals. It cannot be changed after creating journal. ")),d(it,{errors:b(l).anchorDate},null,8,["errors"])]),default:f(()=>[d(jo,xe({modelValue:b($),"onUpdate:modelValue":M[4]||(M[4]=A=>ce($)?$.value=A:null)},b(F)),null,16,["modelValue"])]),_:1})):U("",!0),d(N,null,{default:f(()=>[d(se,{onClick:M[5]||(M[5]=A=>n("close"))},{default:f(()=>M[10]||(M[10]=[_("Close")])),_:1}),d(se,{cta:"",type:"submit",onClick:b(R)},{default:f(()=>M[11]||(M[11]=[_("Add")])),_:1},8,["onClick"])]),_:1})],32))}}),jp=["data-open"],$p={class:"collapsible-trigger-text"},Np=B({__name:"CollapsibleBlock",props:It({defaultExpanded:{type:Boolean}},{expanded:{type:Boolean},expandedModifiers:{}}),emits:["update:expanded"],setup(e){const t=Bt(e,"expanded");e.defaultExpanded&&(t.value=!0);const o=g(()=>t.value?"chevron-down":"chevron-right");function r(){t.value=!t.value}return(a,l)=>(p(),k("div",{class:"collapsible-root","data-open":t.value||null},[v("div",{class:"collapsible-trigger",onClick:r},[d(Dn,{name:o.value},null,8,["name"]),v("span",$p,[ze(a.$slots,"trigger",{},void 0,!0)]),v("span",{class:"collapsible-trigger-controls",onClick:l[0]||(l[0]=qt(()=>{},["stop"]))},[ze(a.$slots,"controls",{},void 0,!0)])]),t.value?ze(a.$slots,"default",{key:0},void 0,!0):U("",!0)],8,jp))}}),At=ye(Np,[["__scopeId","data-v-d5749829"]]),Mp={class:"iconed-row"},Ap=B({__name:"IconedRow",props:{icon:{}},setup(e){return(t,n)=>(p(),k("div",Mp,[d(Dn,{name:t.icon},null,8,["name"]),v("div",null,[ze(t.$slots,"default",{},void 0,!0)])]))}}),Ot=ye(Ap,[["__scopeId","data-v-faf0e4b0"]]),Op={class:"flair"},Tp=B({__name:"JournalSettingsWithoutShelves",emits:["edit","bulk-add"],setup(e,{emit:t}){const n=t,o=ve(),r=g(()=>o.journals);function a(){new Fe(o,"Add Journal",rl,{onCreate(l,s){o.createJournal(l,s),n("edit",l)}}).open()}return(l,s)=>(p(),E(At,{"default-expanded":r.value.length>0},{trigger:f(()=>[d(Ot,{icon:"book-open"},{default:f(()=>[s[2]||(s[2]=_(" Journals ")),v("span",Op,I(r.value.length),1)]),_:1})]),controls:f(()=>[d(ke,{icon:"plus",cta:"",tooltip:"Create new journal",onClick:a})]),default:f(()=>[d(Za,{journals:r.value,onEdit:s[0]||(s[0]=i=>l.$emit("edit",i)),onBulkAdd:s[1]||(s[1]=i=>l.$emit("bulk-add",i))},null,8,["journals"])]),_:1},8,["default-expanded"]))}}),Fp=B({__name:"CreateShelf.modal",emits:["create","close"],setup(e,{emit:t}){const n=t,o=ve();function r(m){return!o.hasShelf(m)}const{defineField:a,errorBag:l,handleSubmit:s}=Sn({initialValues:{name:""},validationSchema:Vn(Pt({name:jt(tt(),en("Shelf name is required"),Jo(r,"Shelf name should be unique"))}))}),[i,u]=a("name"),c=s(m=>{n("create",m.name),n("close")});return(m,y)=>(p(),k("form",{onSubmit:y[2]||(y[2]=qt((...h)=>b(c)&&b(c)(...h),["prevent"]))},[d(N,{name:"Shelf name"},{description:f(()=>[d(it,{errors:b(l).name},null,8,["errors"])]),default:f(()=>[d(He,xe({modelValue:b(i),"onUpdate:modelValue":y[0]||(y[0]=h=>ce(i)?i.value=h:null),placeholder:"ex. Work"},b(u)),null,16,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(se,{onClick:y[1]||(y[1]=h=>n("close"))},{default:f(()=>y[3]||(y[3]=[_("Close")])),_:1}),d(se,{cta:"",type:"submit",onClick:b(c)},{default:f(()=>y[4]||(y[4]=[_("Add")])),_:1},8,["onClick"])]),_:1})],32))}}),Ep=["value"],Pp={key:1},Ip=B({__name:"RemoveShelf.modal",props:{shelfName:{}},emits:["close","remove"],setup(e,{emit:t}){const n=t,o=ve(),r=ie(""),a=g(()=>Object.values(o.shelves).filter(s=>s.name!==e.shelfName));function l(){n("remove",r.value),n("close")}return(s,i)=>(p(),k(W,null,[a.value.length>0?(p(),E(N,{key:0,name:"Move journals to"},{default:f(()=>[d(Se,{modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=u=>r.value=u)},{default:f(()=>[i[2]||(i[2]=v("option",{value:""},"None",-1)),(p(!0),k(W,null,Ce(a.value,u=>(p(),k("option",{key:u.name,value:u.name},I(u.name),9,Ep))),128))]),_:1},8,["modelValue"])]),_:1})):(p(),k("p",Pp,"Journals will be moved out")),d(N,null,{default:f(()=>[d(se,{onClick:i[1]||(i[1]=u=>s.$emit("close"))},{default:f(()=>i[3]||(i[3]=[_("Cancel")])),_:1}),d(se,{cta:"",onClick:l},{default:f(()=>i[4]||(i[4]=[_("Remove")])),_:1})]),_:1})],64))}}),Bp={class:"flair"},Rp={class:"flair"},Yp=B({__name:"JournalSettingsWithShelves",emits:["organize","edit","bulk-add"],setup(e,{emit:t}){const n=t,o=ve(),r=g(()=>o.journals.filter(i=>!i.isOnShelf));function a(){new Fe(o,"Add Journal Shelf",Fp,{onCreate(i){o.createShelf(i),n("organize",i)}}).open()}function l(i){new Fe(o,`Remove ${i} shelf`,Ip,{shelfName:i,onRemove(u){o.removeShelf(i,u)}}).open()}function s(){new Fe(o,"Add Journal",rl,{onCreate(i,u){o.createJournal(i,u),n("edit",i)}}).open()}return(i,u)=>(p(),k(W,null,[d(At,{"default-expanded":b(o).shelves.length>0},{trigger:f(()=>[d(Ot,{icon:"library"},{default:f(()=>[u[2]||(u[2]=_(" Journal shelves ")),v("span",Bp,I(b(o).shelves.length),1)]),_:1})]),controls:f(()=>[d(ke,{icon:"plus",cta:"",tooltip:"Create new shelf",onClick:a})]),default:f(()=>[b(o).shelves.length===0?(p(),E(N,{key:0},{description:f(()=>u[3]||(u[3]=[_(" No shelves configured yet. ")])),_:1})):(p(!0),k(W,{key:1},Ce(b(o).shelves,c=>(p(),E(N,{key:c.name},{name:f(()=>[v("b",null,I(c.name),1),u[4]||(u[4]=v("br",null,null,-1)),_(" "+I(c.journals.length)+" journals ",1)]),default:f(()=>[d(ke,{icon:"library",tooltip:"Organize "+c.name,onClick:m=>i.$emit("organize",c.name)},null,8,["tooltip","onClick"]),d(ke,{icon:"trash-2",tooltip:"Delete "+c.name,onClick:m=>l(c.name)},null,8,["tooltip","onClick"])]),_:2},1024))),128))]),_:1},8,["default-expanded"]),d(At,{"default-expanded":r.value.length>0},{trigger:f(()=>[d(Ot,{icon:"book-open"},{default:f(()=>[u[5]||(u[5]=_(" Journals not on shelf ")),v("span",Rp,I(r.value.length),1)]),_:1})]),controls:f(()=>[d(ke,{icon:"plus",cta:"",tooltip:"Create new journal",onClick:s})]),default:f(()=>[d(Za,{journals:r.value,onEdit:u[0]||(u[0]=c=>i.$emit("edit",c)),onBulkAdd:u[1]||(u[1]=c=>i.$emit("bulk-add",c))},null,8,["journals"])]),_:1},8,["default-expanded"])],64))}}),Up=["disabled"],Lp=B({__name:"ObsidianColorPicker",props:It({disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Bt(e,"modelValue");return(n,o)=>Tn((p(),k("input",{"onUpdate:modelValue":o[0]||(o[0]=r=>t.value=r),type:"color",disabled:n.disabled,spellcheck:"false"},null,8,Up)),[[Lo,t.value]])}}),Wp={title:"Check title",tag:"Check tags",property:"Check frontmatter property",date:"Check date",weekday:"Check weekday",offset:"Check interval offset","has-note":"Check if note exists","has-open-task":"Check if note has open tasks","all-tasks-completed":"Check if all tasks are completed"},Jp={"background-primary":"Primary background","background-primary-alt":"Background for surfaces on top of primary background","background-secondary":"Secondary background","background-secondary-alt":"Background for surfaces on top of secondary background","background-modifier-hover":"Hovered elements","background-modifier-active-hover":"Active hovered elements","background-modifier-border":"Border color","background-modifier-border-hover":"Border color (hover)","background-modifier-border-focus":"Border color (focus)","background-modifier-error-rgb":"Error background, RGB value","background-modifier-error":"Error background","background-modifier-error-hover":"Error background (hover)","background-modifier-success-rgb":"Success background, RGB value","background-modifier-success":"Success background","background-modifier-message":"Messages background","interactive-normal":"Background for standard interactive elements","interactive-hover":"Background for standard interactive elements (hover)","interactive-accent":"Background for accented interactive elements","interactive-accent-hover":"Background for accented interactive elements (hover)","text-normal":"Normal text","text-muted":"Muted text","text-faint":"Faint text","text-on-accent":"Text on accent background when accent is dark","text-on-accent-inverted":"Text on accent background when accent is light","text-success":"Success text","text-warning":"Warning text","text-error":"Error text","text-accent":"Accent text","text-accent-hover":"Accent text (hover)","text-selection":"Selected text background","text-highlight-bg":"Highlighted text background","caret-color":"Caret color"},qp={class:"color-picker"},Hp=["value"],Kp=B({__name:"ColorPicker",props:{modelValue:{default:()=>({type:"transparent"})},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Bt(e,"modelValue"),n=g({get:()=>t.value.type,set(l){switch(l){case"transparent":{t.value={type:"transparent"};break}case"custom":{t.value={type:"custom",color:"#000000"};break}case"theme":{t.value={type:"theme",name:"text-normal"};break}}}}),o=g({get:()=>t.value.type==="theme"?t.value.name:"",set(l){t.value.type==="theme"&&(t.value={type:"theme",name:l})}}),r=g({get:()=>t.value.type==="custom"?t.value.color:"",set(l){t.value.type==="custom"&&(t.value={type:"custom",color:l})}}),a=g(()=>t.value.type==="theme"?{background:`var(--${t.value.name})`}:{});return(l,s)=>(p(),k("div",qp,[d(Se,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=i=>n.value=i)},{default:f(()=>s[3]||(s[3]=[v("option",{value:"transparent"},"Transparent",-1),v("option",{value:"theme"},"Theme",-1),v("option",{value:"custom"},"Custom",-1)])),_:1},8,["modelValue"]),n.value==="theme"?(p(),E(Se,{key:0,modelValue:o.value,"onUpdate:modelValue":s[1]||(s[1]=i=>o.value=i),class:"theme-dropdown"},{default:f(()=>[(p(!0),k(W,null,Ce(b(Jp),(i,u)=>(p(),k("option",{key:u,value:u},I(i),9,Hp))),128))]),_:1},8,["modelValue"])):U("",!0),n.value==="theme"?(p(),k("div",{key:1,class:"theme-preview",style:no(a.value)},null,4)):U("",!0),n.value==="custom"?(p(),E(Lp,{key:2,modelValue:r.value,"onUpdate:modelValue":s[2]||(s[2]=i=>r.value=i)},null,8,["modelValue"])):U("",!0)]))}}),Ft=ye(Kp,[["__scopeId","data-v-67b2b8ef"]]);function Vt(e){return JSON.parse(JSON.stringify(e))}function zp(e){return new Promise(t=>setTimeout(t,e))}function Lr(e){throw new Error("Unexpected value")}function Gp(e){if(e.type==="custom")return`every ${e.duration} ${e.every}s`;switch(e.type){case"day":return"daily";case"week":return"weekly";case"month":return"monthly";case"quarter":return"quarterly";case"year":return"annually"}return""}function Qp(e){switch(e.type){case"title":return`title ${e.condition} ${e.value}`;case"tag":return`tag ${e.condition} ${e.value}`;case"property":return`property ${e.name} ${e.condition} ${e.value}`;case"date":return`date is ${e.day}-${e.month}-${e.year??"any year"}`;case"weekday":return`weekday is any of ${e.weekdays.map(t=>te.moment().localeData().weekdaysShort()[t]).join(", ")}`;case"offset":return`date is ${e.offset<0?-e.offset:e.offset} days away from interval ${e.offset<0?"end":"start"}`;case"has-note":return"there is a note connected to a date";case"has-open-task":return"note connected to a date has an open task";case"all-tasks-completed":return"all tasks in note connected to date are completed";default:return Lr(),""}}async function Xp(e,t){for(const[n,o]of t){const r=e.getJournal(n);if(r)for(const{year:a,weeks:l,path:s}of o){const i=Ne().year(a).week(l).format("YYYY-MM-DD"),u=r.resolveAnchorDate(i);u&&await e.notesManager.updateNoteFrontmatter(s,c=>{c[r.frontmatterDate]=u,r.config.value.frontmatter.addStartDate&&(c[r.frontmatterStartDate]=r.resolveStartDate(u)),r.config.value.frontmatter.addEndDate&&(c[r.frontmatterEndDate]=r.resolveEndDate(u))})}}}const Zp={key:0},em={class:"whitespace"},tm={key:0},nm=B({__name:"CalendarWeekSettings.modal",emits:["close"],setup(e,{emit:t}){const n=t,o=ve(),r=ie(),a=ie("0"),l=ie(1);_t(()=>{s(Vi(o.calendarSettings))});function s(c){r.value=Vt(c),a.value=String(c.dow),l.value=ki(c.dow,c.doy)}function i(){r.value&&(r.value.name="custom")}async function u(){if(!r.value)return;const c=o.journals.filter($=>$.type==="week"),m=new Map;for(const $ of c){const F=[];for(const[R,ne]of o.index.getJournalIndex($.name)){const M=Q(R);F.push({year:M.year(),weeks:M.week(),path:ne})}m.set($.name,F)}r.value.name==="custom"&&(r.value.dow=Number.parseInt(a.value,10),r.value.doy=wi(r.value.dow,l.value));const{dow:y,doy:h}=r.value,j=te.moment().localeData().firstDayOfWeek(),C=te.moment().localeData().firstDayOfYear();y===j&&h===C?(o.calendarSettings.dow=-1,Ci()):(o.calendarSettings.dow=y,o.calendarSettings.doy=h,_i(y,h)),await Xp(o,m),n("close")}return(c,m)=>r.value?(p(),k("div",Zp,[(p(!0),k(W,null,Ce(b(Si),y=>(p(),E(N,{key:y.name},{name:f(()=>[_(I(y.name),1)]),description:f(()=>[v("div",em,I(y.description),1),v("div",null,"Used in: "+I(y.used),1)]),default:f(()=>[y.name===r.value.name?(p(),k("div",tm,"Currently used")):(p(),E(se,{key:1,onClick:h=>s(y)},{default:f(()=>m[3]||(m[3]=[_("Use")])),_:2},1032,["onClick"]))]),_:2},1024))),128)),d(N,{name:"Custom settings"},{description:f(()=>m[4]||(m[4]=[v("div",null,[_(" Here you can define what day of week should be used"),v("br"),_(" as first and how first week of year should be defined"),v("br"),_(" if none of standard presets suits your needs. ")],-1)])),default:f(()=>[r.value.name!=="custom"?(p(),E(se,{key:0,onClick:m[0]||(m[0]=y=>i())},{default:f(()=>m[5]||(m[5]=[_("Use")])),_:1})):U("",!0)]),_:1}),r.value.name==="custom"?(p(),k(W,{key:0},[d(N,{name:"Start week on",description:"Which day to consider as first day of week."},{default:f(()=>[d(Se,{modelValue:a.value,"onUpdate:modelValue":m[1]||(m[1]=y=>a.value=y)},{default:f(()=>m[6]||(m[6]=[v("option",{value:"0"},"Sunday",-1),v("option",{value:"1"},"Monday",-1),v("option",{value:"2"},"Tuesday",-1),v("option",{value:"3"},"Wednesday",-1),v("option",{value:"4"},"Thursday",-1),v("option",{value:"5"},"Friday",-1),v("option",{value:"6"},"Saturday",-1)])),_:1},8,["modelValue"])]),_:1}),d(N,{name:"First week of year",description:"Define what date in January a week should contain to be considered first week of a year."},{default:f(()=>[d(pn,{modelValue:l.value,"onUpdate:modelValue":m[2]||(m[2]=y=>l.value=y)},null,8,["modelValue"])]),_:1})],64)):U("",!0),d(N,null,{description:f(()=>m[7]||(m[7]=[_(" This will update all weekly notes to use current settings - week number of notes will be kept but dates will be updated. ")])),default:f(()=>[d(se,{onClick:u},{default:f(()=>m[8]||(m[8]=[_("Update")])),_:1})]),_:1})])):U("",!0)}}),om={class:"column"},rm={class:"whitespace"},am=B({__name:"CalendarWeekSettings",setup(e){const t=ve(),n=g(()=>Vi(t.calendarSettings));function o(){new Fe(t,"Week configuration",nm,{}).open()}return(r,a)=>(p(),k(W,null,[d(N,{heading:"",name:"Week configuration"},{description:f(()=>a[0]||(a[0]=[_(" Here you can define what day of week should be used"),v("br",null,null,-1),_(" as first and how first week of year should be defined"),v("br",null,null,-1),_(" (influences week numbers). ")])),default:f(()=>[v("div",om,[v("div",rm,I(n.value.description),1),d(se,{class:"self-end",onClick:o},{default:f(()=>a[1]||(a[1]=[_("Change")])),_:1})])]),_:1}),d(N,{name:"Currently in use"})],64))}}),lm=ye(am,[["__scopeId","data-v-7c2cc715"]]),sm=B({__name:"ShelfDecision",emits:["next"],setup(e,{emit:t}){const n=t,o=ve(),r=ie(!1);function a(){r.value&&(o.usesShelves=!0),n("next")}return(l,s)=>(p(),k("div",null,[d(N,{heading:"",name:"Use shelves?"}),d(N,{"no-controls":""},{description:f(()=>s[1]||(s[1]=[_(" Shelves can be used to organize several journals into one logical group (like work or personal)."),v("br",null,null,-1),_(" Enabling shelves before migration will convert all calendar journals that have more than one section enabled into a shelf."),v("br",null,null,-1),_(" You can always change this decision later. ")])),_:1}),d(N,{name:"Enable shelves?"},{default:f(()=>[d(Ge,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=i=>r.value=i)},null,8,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(se,{onClick:a},{default:f(()=>s[2]||(s[2]=[_("Next")])),_:1})]),_:1})]))}}),Hi=2,Ki={version:Hi,ui:{calendarShelf:null},pendingMigrations:[],useShelves:!1,showReloadHint:!1,openOnStartup:"",journals:{},shelves:{},calendar:{dow:-1,doy:1},calendarView:{display:"month",leaf:"right",weeks:"left",todayMode:"navigate",pickMode:"create",todayStyle:{color:{type:"theme",name:"text-accent"},background:{type:"transparent"}},activeStyle:{color:{type:"theme",name:"text-on-accent"},background:{type:"theme",name:"interactive-accent"}}}},al={name:"",shelves:[],write:{type:"day"},confirmCreation:!1,nameTemplate:"",dateFormat:"",folder:"",templates:[],start:"",end:{type:"never"},index:{enabled:!1,anchorDate:"",anchorIndex:1,allowBefore:!1,type:"increment",resetAfter:2},autoCreate:!1,commands:[],decorations:[{mode:"and",conditions:[{type:"has-note"}],styles:[{type:"shape",shape:"circle",color:{type:"theme",name:"interactive-accent"},placement_x:"center",placement_y:"bottom"}]}],navBlock:{type:"create",rows:[],decorateWholeBlock:!1},calendarViewBlock:{rows:[],decorateWholeBlock:!1},frontmatter:{dateField:"",addStartDate:!1,startDateField:"",addEndDate:!1,endDateField:"",indexField:""}},im={dateField:Br,indexField:Rr,startDateField:Xt,endDateField:cn},um={icon:"",name:"",type:"same",context:"today",showInRibbon:!1,openMode:"active"},zi={date:{type:"date",day:-1,month:-1,year:null},title:{type:"title",condition:"contains",value:""},tag:{type:"tag",condition:"contains",value:""},property:{type:"property",name:"",condition:"contains",value:""},weekday:{type:"weekday",weekdays:[]},offset:{type:"offset",offset:0},"has-note":{type:"has-note"},"has-open-task":{type:"has-open-task"},"all-tasks-completed":{type:"all-tasks-completed"}},dm={background:{type:"background",color:{type:"transparent"}},color:{type:"color",color:{type:"theme",name:"text-normal"}},border:{type:"border",border:"uniform",left:{show:!0,width:1,color:{type:"transparent"},style:"solid"},right:{show:!1,width:1,color:{type:"transparent"},style:"solid"},top:{show:!1,width:1,color:{type:"transparent"},style:"solid"},bottom:{show:!1,width:1,color:{type:"transparent"},style:"solid"}},shape:{type:"shape",shape:"circle",color:{type:"transparent"},placement_x:"center",placement_y:"bottom"},corner:{type:"corner",placement:"top-left",color:{type:"transparent"}},icon:{type:"icon",icon:"",color:{type:"transparent"},placement_x:"center",placement_y:"top"}},cm={day:"{{date}}",week:"{{date}}",month:"{{date}}",quarter:"{{date}}",year:"{{date}}",custom:"{{journal_name}} {{index}}"},Gi={day:"YYYY-MM-DD",week:"YYYY-[W]w",month:"YYYY-MM",quarter:"YYYY-[Q]Q",year:"YYYY",custom:"YYYY-MM-DD"},Xe={template:"",fontSize:1,bold:!1,italic:!1,link:"none",journal:"",color:{type:"theme",name:"text-normal"},background:{type:"transparent"},addDecorations:!1},ts={...Xe,template:"{{date:[W]w}}",link:"week"},ca={...Xe,template:"{{date:MMMM}}",link:"month"},fo={...Xe,template:"{{date:YYYY}}",link:"year"},po={...Xe,template:"{{relative_date}}",fontSize:.7},fm={day:{type:"create",decorateWholeBlock:!1,rows:[{...Xe,template:"{{date:ddd}}"},{...Xe,template:"{{date:D}}",fontSize:3,bold:!0,link:"self",addDecorations:!0},po,ts,ca,fo]},week:{type:"create",decorateWholeBlock:!1,rows:[{...ts,fontSize:3,bold:!0,link:"self",addDecorations:!0},po,ca,fo]},month:{type:"create",decorateWholeBlock:!1,rows:[{...ca,fontSize:3,bold:!0,link:"self",addDecorations:!0},po,fo]},quarter:{type:"create",decorateWholeBlock:!1,rows:[{...Xe,template:"{{date:[Q]Q}}",fontSize:3,bold:!0,link:"self",addDecorations:!0},po,fo]},year:{type:"create",decorateWholeBlock:!1,rows:[{...fo,fontSize:3,bold:!0,link:"self",addDecorations:!0},po]},custom:{type:"create",decorateWholeBlock:!1,rows:[{...Xe,template:"{{journal_name}} {{index}}",link:"self",fontSize:3,bold:!0,addDecorations:!0},{...Xe,template:"{{start_date}}"},{...Xe,template:"to"},{...Xe,template:"{{end_date}}"}]}};function ll(e){const t={nameTemplate:cm[e.type],dateFormat:Gi[e.type],navBlock:fm[e.type]};return e.type==="custom"&&(t.start=e.anchorDate,t.index={enabled:!0,anchorDate:e.anchorDate,anchorIndex:1,allowBefore:!1,type:"increment",resetAfter:1},t.calendarViewBlock={decorateWholeBlock:!0,rows:[{...Xe,template:"{{journal_name}} {{index}}",link:"self",fontSize:1.2,bold:!0},{...Xe,template:"{{start_date}} to {{end_date}}"}]},t.decorations=[{mode:"and",conditions:[{type:"has-note"}],styles:[{type:"border",border:"different",left:{show:!0,width:2,color:{type:"theme",name:"interactive-accent"},style:"solid"},right:{show:!1,width:1,color:{type:"transparent"},style:"solid"},top:{show:!1,width:1,color:{type:"transparent"},style:"solid"},bottom:{show:!1,width:1,color:{type:"transparent"},style:"solid"}}]}]),t}const fa="journal-section",fr="journal-interval-index",pm={day:"Open today's note",week:"Open this week's note",month:"Open this month's note",quarter:"Open this quarter's note",year:"Open this year's note"};function Qi(e){let t=0;return e.day.enabled&&t++,e.week.enabled&&t++,e.month.enabled&&t++,e.quarter.enabled&&t++,e.year.enabled&&t++,t}function mm(e){const t=Vt(Ki);return t.calendar.dow=e.calendar.firstDayOfWeek,t.calendar.doy=e.calendar.firstDayOfWeek===-1?1:wi(e.calendar.firstDayOfWeek,e.calendar.firstWeekOfYear),t.calendarView.leaf=e.calendar_view.leaf,t.calendarView.weeks=e.calendar_view.weeks,t.pendingMigrations.push({type:"v1-v2",shelfDecided:!1,frontmatterDecided:!1,journals:Object.values(e.journals)}),t}function vm(e,t){const n={type:"custom",anchorDate:e.start_date,every:e.granularity,duration:e.duration},o=Vt({...al,...ll(n),write:n});if(o.name=e.name,o.autoCreate=e.createOnStartup,o.nameTemplate=e.nameTemplate||"{{journal_name}} {{index}}",o.dateFormat=e.dateFormat||"YYYY-MM-DD",o.folder=e.folder,e.template&&o.templates.push(e.template),o.start=e.start_date,e.end_type==="date"?o.end={type:"date",date:e.end_date}:e.end_type==="repeats"&&(o.end={type:"repeats",repeats:e.repeats}),o.index={enabled:!0,anchorDate:e.start_date,anchorIndex:e.start_index,allowBefore:!1,type:"increment",resetAfter:0},e.numeration_type==="year"){o.index.type="reset_after";const r=e.duration;switch(e.granularity){case"month":{o.index.resetAfter=Math.floor(12/r);break}case"week":{o.index.resetAfter=Math.floor(52/r);break}case"day":{o.index.resetAfter=Math.floor(365/r);break}}}if(e.navNameTemplate||e.navDatesTemplate)if(o.navBlock.rows=[{...Xe,template:e.navNameTemplate||"{{journal_name}} {{index}}",link:"self",fontSize:3,bold:!0,addDecorations:!0}],e.navDatesTemplate)for(const r of e.navDatesTemplate.split("|"))o.navBlock.rows.push({...Xe,template:r});else o.navBlock.rows.push({...Xe,template:"{{start_date}}"},{...Xe,template:"to"},{...Xe,template:"{{end_date}}"});return t&&(o.frontmatter.addStartDate=!0,o.frontmatter.addEndDate=!0),e.ribbon.show&&o.commands.push({icon:e.ribbon.icon||"calendar-range",name:e.ribbon.tooltip||`Open current ${e.name} note`,type:"same",context:"today",showInRibbon:!0,openMode:e.openMode}),o}async function hm(e,t,n){const o=vm(t,n),r=e.registerJournal(o);await gm(e.notesManager,r,t)}async function gm(e,t,n){const o=e.getMarkdownFiles();for(const r of o){const a=e.getNoteMetadata(r.path);if(!a)continue;const{frontmatter:l}=a;!l||!(st in l)||l[st]!==n.id||await e.updateNoteFrontmatter(r.path,i=>{const u=i[Xt],c=i[cn],m=t.resolveAnchorDate(u);m?(i[st]=t.name,i[t.frontmatterDate]=u,t.config.value.frontmatter.addStartDate?i[t.frontmatterStartDate]=t.resolveStartDate(m):delete i[Xt],t.config.value.frontmatter.addEndDate||c!==t.resolveEndDate(m)?i[t.frontmatterEndDate]=c:delete i[cn],i[t.frontmatterIndex]=i[fr],delete i[fr]):(delete i[st],delete i[Xt],delete i[cn],delete i[fr])})}}async function ym(e,t,n,o){t.day.enabled&&await mo(e,t,"day",n,o),t.week.enabled&&await mo(e,t,"week",n,o),t.month.enabled&&await mo(e,t,"month",n,o),t.quarter.enabled&&await mo(e,t,"quarter",n,o),t.year.enabled&&await mo(e,t,"year",n,o)}function bm(e,t,n,o,r){const a={type:t},l=Vt({...al,...ll(a),write:a}),s=e[t];return l.name=n[t],l.autoCreate=s.createOnStartup,o&&n.shelf&&(l.shelves=[n.shelf]),l.nameTemplate=s.nameTemplate||"{{date}}",l.dateFormat=s.dateFormat||Gi[t],l.folder=e.rootFolder?e.rootFolder+"/"+s.folder:s.folder,s.template&&l.templates.push(s.template),s.ribbon.show&&l.commands.push({icon:s.ribbon.icon||"calendar-days",name:s.ribbon.tooltip||pm[t],type:"same",context:"today",showInRibbon:!0,openMode:s.openMode}),r&&(l.frontmatter.addStartDate=!0,l.frontmatter.addEndDate=!0),l}async function mo(e,t,n,o,r){const a=bm(t,n,o,e.usesShelves,r),l=e.registerJournal(a);await wm(e.notesManager,l,n,t)}async function wm(e,t,n,o){const r=e.getMarkdownFiles();for(const a of r){const l=e.getNoteMetadata(a.path);if(!l)continue;const{frontmatter:s}=l;!s||!(st in s)||s[st]!==o.id||s[fa]!==n||await e.updateNoteFrontmatter(a.path,c=>{const m=c[Xt],y=t.resolveAnchorDate(m);y?(c[st]=t.name,c[t.frontmatterDate]=m,t.config.value.frontmatter.addStartDate?c[t.frontmatterStartDate]=t.resolveStartDate(y):delete c[Xt],t.config.value.frontmatter.addEndDate?c[t.frontmatterEndDate]=t.resolveEndDate(y):delete c[cn],delete c[fa]):(delete c[st],delete c[fa],delete c[Xt],delete c[cn],delete c[fr])})}}const km={key:1,class:"loader-container"},_m=B({__name:"MigrateCalendar",props:{journal:{},keepFrontmatter:{type:Boolean}},emits:["next","finished"],setup(e,{emit:t}){const n=t,o=ve(),r=ie("names"),a=Qi(e.journal),l=ie(""),s=ie(""),i=ie(""),u=ie(""),c=ie(""),m=ie("");async function y(){r.value="processing",o.usesShelves&&l.value&&!o.hasShelf(l.value)&&o.createShelf(l.value),await ym(o,e.journal,{shelf:l.value,day:s.value,week:u.value,month:i.value,quarter:c.value,year:m.value},e.keepFrontmatter),o.reprocessNotes(),n("finished"),r.value="done"}return _t(async()=>{if(a===0){n("finished"),Dt(()=>{n("next")});return}a===1?(s.value=e.journal.name,u.value=e.journal.name,i.value=e.journal.name,c.value=e.journal.name,m.value=e.journal.name,await y()):(r.value="names",l.value=e.journal.name,s.value=`${e.journal.name} daily`,u.value=`${e.journal.name} weekly`,i.value=`${e.journal.name} monthly`,c.value=`${e.journal.name} quarterly`,m.value=`${e.journal.name} yearly`)}),(h,j)=>(p(),k("div",null,[d(N,{heading:""},{name:f(()=>[_("Migrating "+I(h.journal.name),1)]),_:1}),r.value==="names"?(p(),k(W,{key:0},[b(o).usesShelves?(p(),E(N,{key:0,name:"Shelf name"},{default:f(()=>[d(He,{modelValue:l.value,"onUpdate:modelValue":j[0]||(j[0]=C=>l.value=C)},null,8,["modelValue"])]),_:1})):U("",!0),h.journal.day.enabled?(p(),E(N,{key:1,name:"Daily journal name"},{default:f(()=>[d(He,{modelValue:s.value,"onUpdate:modelValue":j[1]||(j[1]=C=>s.value=C)},null,8,["modelValue"])]),_:1})):U("",!0),h.journal.week.enabled?(p(),E(N,{key:2,name:"Weekly journal name"},{default:f(()=>[d(He,{modelValue:u.value,"onUpdate:modelValue":j[2]||(j[2]=C=>u.value=C)},null,8,["modelValue"])]),_:1})):U("",!0),h.journal.month.enabled?(p(),E(N,{key:3,name:"Monthly journal name"},{default:f(()=>[d(He,{modelValue:i.value,"onUpdate:modelValue":j[3]||(j[3]=C=>i.value=C)},null,8,["modelValue"])]),_:1})):U("",!0),h.journal.quarter.enabled?(p(),E(N,{key:4,name:"Quarterly journal name"},{default:f(()=>[d(He,{modelValue:c.value,"onUpdate:modelValue":j[4]||(j[4]=C=>c.value=C)},null,8,["modelValue"])]),_:1})):U("",!0),h.journal.year.enabled?(p(),E(N,{key:5,name:"Yearly journal name"},{default:f(()=>[d(He,{modelValue:m.value,"onUpdate:modelValue":j[5]||(j[5]=C=>m.value=C)},null,8,["modelValue"])]),_:1})):U("",!0),d(N,null,{default:f(()=>[d(se,{cta:"",onClick:y},{default:f(()=>j[7]||(j[7]=[_("Migrate")])),_:1})]),_:1})],64)):r.value==="processing"?(p(),k("div",km,[d(Dn,{name:"loader"})])):(p(),E(N,{key:2,name:"Done!"},{default:f(()=>[d(se,{cta:"",onClick:j[6]||(j[6]=C=>h.$emit("next"))},{default:f(()=>j[8]||(j[8]=[_("Next")])),_:1})]),_:1}))]))}}),Cm=ye(_m,[["__scopeId","data-v-7e294ea2"]]),Dm={key:0,class:"loader-container"},Sm=B({__name:"MigrateInterval",props:{journal:{},keepFrontmatter:{type:Boolean}},emits:["next","finished"],setup(e,{emit:t}){const n=t,o=ve(),r=ie(!0);return _t(async()=>{r.value=!0,await hm(o,e.journal,e.keepFrontmatter),o.reprocessNotes(),n("finished"),r.value=!1}),(a,l)=>(p(),k("div",null,[d(N,{heading:""},{name:f(()=>[_(" Migrating "+I(a.journal.name),1)]),_:1}),r.value?(p(),k("div",Dm,[d(Dn,{name:"loader"})])):(p(),E(N,{key:1,name:"Done!"},{default:f(()=>[d(se,{cta:"",onClick:l[0]||(l[0]=s=>a.$emit("next"))},{default:f(()=>l[1]||(l[1]=[_("Next")])),_:1})]),_:1}))]))}}),Vm=ye(Sm,[["__scopeId","data-v-c1f36a5c"]]),xm=B({__name:"FrontMatterDecision",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:It(["next"],["update:modelValue"]),setup(e){const t=Bt(e,"modelValue");return(n,o)=>(p(),k("div",null,[d(N,{name:"Frontmatter data",heading:""}),d(N,{"no-controls":""},{description:f(()=>o[2]||(o[2]=[_(" New plugin version by default reduces frontmatter data."),v("br",null,null,-1),_(" Instead of having start and end dates in frontmatter there is only 1 date (usually first day of month or year for example)."),v("br",null,null,-1),_(" If you used start or end dates from frontmatter in some other plugins (like Dataview) you can configure plugin to keep start and end dates in frontmatter."),v("br",null,null,-1),_(" You can always change this decision later. ")])),_:1}),d(N,{name:"Keep start and end dates in frontmatter?"},{default:f(()=>[d(Ge,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=r=>t.value=r)},null,8,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(se,{onClick:o[1]||(o[1]=r=>n.$emit("next"))},{default:f(()=>o[3]||(o[3]=[_("Next")])),_:1})]),_:1})]))}}),jm={key:2},$m=B({__name:"v2-migration",props:{migration:{}},emits:["finished"],setup(e,{emit:t}){const n=t;let o=ie(!1),r=ie("decideFrontmatter"),a=ie();_t(()=>{e.migration.journals.length===0?n("finished"):e.migration.frontmatterDecided&&(e.migration.shelfDecided?(r.value="journal",a.value=e.migration.journals[0]):r.value="decideShelf")});function l(){if(a.value){const{journals:i}=e.migration;i.shift()}}function s(){if(r.value==="decideFrontmatter"&&(e.migration.frontmatterDecided=!0),r.value==="decideShelf"&&(e.migration.shelfDecided=!0),!e.migration.shelfDecided)if(e.migration.journals.some(u=>u.type==="calendar"?Qi(u)>1:!1)){r.value="decideShelf";return}else e.migration.shelfDecided=!0;a.value&&(a.value=null),e.migration.journals.length>0?(r.value="journal",a.value=e.migration.journals[0]):n("finished")}return(i,u)=>(p(),k("div",null,[b(r)==="decideFrontmatter"?(p(),E(xm,{key:0,modelValue:b(o),"onUpdate:modelValue":u[0]||(u[0]=c=>ce(o)?o.value=c:o=c),onNext:s},null,8,["modelValue"])):U("",!0),b(r)==="decideShelf"?(p(),E(sm,{key:1,onNext:s})):b(r)==="journal"&&b(a)?(p(),k("div",jm,[b(a).type==="calendar"?(p(),E(Cm,{key:b(a).id+"calendar",journal:b(a),"keep-frontmatter":b(o),onFinished:l,onNext:s},null,8,["journal","keep-frontmatter"])):b(a).type==="interval"?(p(),E(Vm,{key:b(a).id+"interval",journal:b(a),"keep-frontmatter":b(o),onFinished:l,onNext:s},null,8,["journal","keep-frontmatter"])):U("",!0)])):U("",!0)]))}}),Nm={key:0},Xi=B({__name:"MigrationModal",emits:["close"],setup(e,{emit:t}){const n=t,o=ve(),r=ie(null),a=g(()=>{if(!r.value)return null;switch(r.value.type){case"v1-v2":return $m}return null});function l(){r.value=null,o.pendingMigrations.shift(),o.pendingMigrations.length===0?n("close"):r.value=o.pendingMigrations[0]}return _t(()=>{o.pendingMigrations.length===0?n("close"):r.value=o.pendingMigrations[0]}),(s,i)=>r.value?(p(),k("div",Nm,[(p(),E(Yo(a.value),{migration:r.value,onFinished:l},null,40,["migration"]))])):U("",!0)}}),Mm={key:0,class:"journal-warning"},Am={key:1,class:"journal-warning"},Om=["value"],Tm=B({__name:"JournalSettingsDashboard",emits:["edit","organize","bulk-add"],setup(e,{emit:t}){const n=t,o=ve(),r=g(()=>{const l=new Map;for(const s of o.journals){const i=`${s.config.value.nameTemplate.replaceAll("{{journal_name}}",s.name)}-${s.config.value.folder}-${s.config.value.dateFormat}`,u=l.get(i)??[];u.push(s),l.set(i,u)}return[...l.values()].filter(s=>s.length>1)});function a(){new Fe(o,"Migrate plugin data",Xi).open()}return(l,s)=>(p(),k(W,null,[b(o).hasMigrations?(p(),k("div",Mm,[d(N,{name:"Some data is pending migration",heading:""},{default:f(()=>[d(se,{cta:"",onClick:a},{default:f(()=>s[15]||(s[15]=[_("Migrate")])),_:1})]),_:1})])):U("",!0),d(N,{name:"Use shelves?"},{description:f(()=>s[16]||(s[16]=[_(" Shelves can be used to organize several journals into one logical group (like work or personal)."),v("br",null,null,-1),_(" With shelves enabled: "),v("br",null,null,-1),v("ul",null,[v("li",null,"Calendar View can bi limited to display just one shelf"),v("li",null,"Navigation code block will show decorations from journals on current shelf only")],-1)])),default:f(()=>[d(Ge,{modelValue:b(o).usesShelves,"onUpdate:modelValue":s[0]||(s[0]=i=>b(o).usesShelves=i)},null,8,["modelValue"])]),_:1}),r.value.length>0?(p(),k("div",Am,[d(N,{name:"Colliding journal settings",heading:""}),(p(!0),k(W,null,Ce(r.value,(i,u)=>(p(),k("div",{key:u}," Journals "+I(i.map(c=>c.name).join(" and "))+" has colliding configurations so that notes will be overriding each other. Consider changing folder or name template in one of that journals. ",1))),128))])):U("",!0),b(o).usesShelves?(p(),E(Yp,{key:2,onOrganize:s[1]||(s[1]=i=>n("organize",i)),onEdit:s[2]||(s[2]=i=>n("edit",i)),onBulkAdd:s[3]||(s[3]=i=>n("bulk-add",i))})):(p(),E(Tp,{key:3,onEdit:s[4]||(s[4]=i=>n("edit",i)),onBulkAdd:s[5]||(s[5]=i=>n("bulk-add",i))})),d(N,{name:"Open on startup",description:"Open a note whenever you open this vault?"},{default:f(()=>[d(Se,{modelValue:b(o).openOnStartup,"onUpdate:modelValue":s[6]||(s[6]=i=>b(o).openOnStartup=i)},{default:f(()=>[s[17]||(s[17]=v("option",{value:""},"Don't open",-1)),(p(!0),k(W,null,Ce(b(o).journals,i=>(p(),k("option",{key:i.name,value:i.name},I(i.name),9,Om))),128))]),_:1},8,["modelValue"])]),_:1}),d(At,null,{trigger:f(()=>[d(Ot,{icon:"calendar"},{default:f(()=>s[18]||(s[18]=[_(" Calendar view ")])),_:1})]),default:f(()=>[d(lm),d(N,{name:"Show calendar in"},{default:f(()=>[d(Se,{modelValue:b(o).calendarViewSettings.leaf,"onUpdate:modelValue":s[7]||(s[7]=i=>b(o).calendarViewSettings.leaf=i)},{default:f(()=>s[19]||(s[19]=[v("option",{value:"left"},"Left sidebar",-1),v("option",{value:"right"},"Right sidebar",-1)])),_:1},8,["modelValue"])]),_:1}),d(N,{name:"Show weeks"},{default:f(()=>[d(Se,{modelValue:b(o).calendarViewSettings.weeks,"onUpdate:modelValue":s[8]||(s[8]=i=>b(o).calendarViewSettings.weeks=i)},{default:f(()=>s[20]||(s[20]=[v("option",{value:"none"},"Don't show",-1),v("option",{value:"left"},"Before weekdays",-1),v("option",{value:"right"},"After weekdays",-1)])),_:1},8,["modelValue"])]),_:1}),d(N,{name:"Today button"},{default:f(()=>[d(Se,{modelValue:b(o).calendarViewSettings.todayMode,"onUpdate:modelValue":s[9]||(s[9]=i=>b(o).calendarViewSettings.todayMode=i)},{default:f(()=>s[21]||(s[21]=[v("option",{value:"create"},"Creates today's note if doesn't exist",-1),v("option",{value:"navigate"},"Opens today's note if it exists",-1),v("option",{value:"switch_date"},"Just switch calendar view to current month",-1)])),_:1},8,["modelValue"])]),_:1}),d(N,{name:"Pick date button"},{default:f(()=>[d(Se,{modelValue:b(o).calendarViewSettings.pickMode,"onUpdate:modelValue":s[10]||(s[10]=i=>b(o).calendarViewSettings.pickMode=i)},{default:f(()=>s[22]||(s[22]=[v("option",{value:"create"},"Creates note for picked date if doesn't exist",-1),v("option",{value:"navigate"},"Opens note for picked date if it exists",-1),v("option",{value:"switch_date"},"Just switch calendar view to month containing corresponding date",-1)])),_:1},8,["modelValue"])]),_:1}),d(N,{name:"Highlighting today",header:""}),d(N,{name:"Text color"},{default:f(()=>[d(Ft,{modelValue:b(o).calendarViewSettings.todayStyle.color,"onUpdate:modelValue":s[11]||(s[11]=i=>b(o).calendarViewSettings.todayStyle.color=i)},null,8,["modelValue"])]),_:1}),d(N,{name:"Background color"},{default:f(()=>[d(Ft,{modelValue:b(o).calendarViewSettings.todayStyle.background,"onUpdate:modelValue":s[12]||(s[12]=i=>b(o).calendarViewSettings.todayStyle.background=i)},null,8,["modelValue"])]),_:1}),d(N,{name:"Highlighting active note",header:""}),d(N,{name:"Text color"},{default:f(()=>[d(Ft,{modelValue:b(o).calendarViewSettings.activeStyle.color,"onUpdate:modelValue":s[13]||(s[13]=i=>b(o).calendarViewSettings.activeStyle.color=i)},null,8,["modelValue"])]),_:1}),d(N,{name:"Background color"},{default:f(()=>[d(Ft,{modelValue:b(o).calendarViewSettings.activeStyle.background,"onUpdate:modelValue":s[14]||(s[14]=i=>b(o).calendarViewSettings.activeStyle.background=i)},null,8,["modelValue"])]),_:1})]),_:1})],64))}}),Fm=ye(Tm,[["__scopeId","data-v-8c2b8f56"]]);class Em extends te.AbstractInputSuggest{constructor(t,n){super(t,n),this.textInputElement=n}getSuggestions(t){const n=this.app.vault.getAllLoadedFiles(),o=t.toLocaleLowerCase();return n.filter(r=>{if(!(r instanceof te.TFolder))return!1;const a=r.path.toLocaleLowerCase();return a==="/"?!1:a.includes(o)})}renderSuggestion(t,n){n.setText(t.path)}selectSuggestion(t){this.textInputElement.value=t.path,this.textInputElement.trigger("input"),this.close()}}function sl(){return ve().app}const Pm=["placeholder","disabled"],Zi=B({__name:"FolderInput",props:It({placeholder:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Bt(e,"modelValue"),n=ie(),o=sl();let r;return _t(()=>{n.value&&(r=new Em(o,n.value))}),qa(()=>{r&&r.close()}),(a,l)=>Tn((p(),k("input",{ref_key:"element",ref:n,"onUpdate:modelValue":l[0]||(l[0]=s=>t.value=s),type:"text",placeholder:a.placeholder,disabled:a.disabled,spellcheck:"false"},null,8,Pm)),[[Lo,t.value]])}}),Im={},Bm={class:"warn"};function Rm(e,t){return p(),k("div",Bm,t[0]||(t[0]=[_(" You use `W` to format weeks which does not respect custom week settings. This might show week number different from what is displayed in Calendar view."),v("br",null,null,-1),_(" It is recommended to use `w` instaed (and change start of week using plugin settings if needed). ")]))}const eu=ye(Im,[["render",Rm],["__scopeId","data-v-65f300b9"]]),Ym={class:"u-pop"},tu=B({__name:"DateFormatPreview",props:{format:{}},setup(e){const t=e,n=g(()=>Ne().format(t.format)),o=g(()=>t.format.replaceAll(/\[.*?\]/gi,"").includes("W"));return(r,a)=>(p(),k("div",null,[a[0]||(a[0]=_(" Your current syntax looks like this: ")),v("b",Ym,I(n.value),1),o.value?(p(),E(eu,{key:0})):U("",!0)]))}}),Um=B({__name:"DisplayVariable",props:{name:{}},setup(e){const t=e,n=g(()=>`{{${t.name}}}`);async function o(r){const a=r.target.textContent;if(a)try{await navigator.clipboard.writeText(a),new te.Notice("Copied to clipboard")}catch(l){console.error(l)}}return(r,a)=>(p(),k("span",{class:"variable",onClick:o},I(n.value),1))}}),qe=ye(Um,[["__scopeId","data-v-bca8a59a"]]),Lm={class:"grid"},Wm=B({__name:"VariableReference.modal",props:{type:{},dateFormat:{}},emits:["close"],setup(e){const t=g(()=>e.type==="custom"?"interval":e.type);return(n,o)=>(p(),k(W,null,[o[57]||(o[57]=v("p",{class:"hint"},"Clicking on variable will copy it to clipboard.",-1)),v("div",Lm,[v("div",null,[d(qe,{name:"journal_name"})]),o[54]||(o[54]=v("div",null,"Name of corresponding journal",-1)),v("div",null,[d(qe,{name:"note_name"})]),o[55]||(o[55]=v("div",null,"Name of current note",-1)),v("div",null,[d(qe,{name:"title"})]),o[56]||(o[56]=v("div",null,"Name of current note (to support core template variable)",-1)),v("div",null,[d(qe,{name:"date"})]),v("div",null,[_(" Note reference date formatted using default format settings ("+I(n.dateFormat)+").",1),o[3]||(o[3]=v("br",null,null,-1)),n.type==="week"?(p(),k(W,{key:0},[o[0]||(o[0]=_(" Is usually the first day of the week. But for weeks that are considered part of next year but have several day of previous year it will be the last day of week")),o[1]||(o[1]=v("br",null,null,-1))],64)):n.type!=="day"?(p(),k(W,{key:1},[_(" Is same as first day of "+I(t.value)+". ",1),o[2]||(o[2]=v("br",null,null,-1))],64)):U("",!0),o[4]||(o[4]=_(" You can also use ")),d(qe,{name:"date:format"}),o[5]||(o[5]=_(" to override format once, and use ")),d(qe,{name:"date+5d:format"}),o[6]||(o[6]=_(" to add 5 days.")),o[7]||(o[7]=v("br",null,null,-1)),o[8]||(o[8]=v("a",{target:"_blank",href:"https://momentjs.com/docs/#/displaying/format/"},"Formatting reference.",-1)),o[9]||(o[9]=v("br",null,null,-1)),o[10]||(o[10]=v("a",{target:"_blank",href:"https://momentjs.com/docs/#/manipulating/add/"},"Date manipulation reference.",-1))]),n.type!=="day"?(p(),k(W,{key:0},[v("div",null,[d(qe,{name:"start_date"})]),v("div",null,[_(" First day of "+I(t.value)+" formatted using default format settings ("+I(n.dateFormat)+").",1),o[11]||(o[11]=v("br",null,null,-1)),o[12]||(o[12]=_(" You can also use ")),d(qe,{name:"start_date:format"}),o[13]||(o[13]=_(" to override format once, and use ")),d(qe,{name:"start_date+5d:format"}),o[14]||(o[14]=_(" to add 5 days.")),o[15]||(o[15]=v("br",null,null,-1)),o[16]||(o[16]=v("a",{target:"_blank",href:"https://momentjs.com/docs/#/displaying/format/"},"Formatting reference.",-1)),o[17]||(o[17]=v("br",null,null,-1)),o[18]||(o[18]=v("a",{target:"_blank",href:"https://momentjs.com/docs/#/manipulating/add/"},"Date manipulation reference.",-1))]),v("div",null,[d(qe,{name:"end_date"})]),v("div",null,[_(" Last day of "+I(t.value)+" formatted using default format settings ("+I(n.dateFormat)+").",1),o[19]||(o[19]=v("br",null,null,-1)),o[20]||(o[20]=_(" You can also use ")),d(qe,{name:"end_date:format"}),o[21]||(o[21]=_(" to override format once, and use ")),d(qe,{name:"end_date+5d:format"}),o[22]||(o[22]=_(" to add 5 days.")),o[23]||(o[23]=v("br",null,null,-1)),o[24]||(o[24]=v("a",{target:"_blank",href:"https://momentjs.com/docs/#/displaying/format/"},"Formatting reference.",-1)),o[25]||(o[25]=v("br",null,null,-1)),o[26]||(o[26]=v("a",{target:"_blank",href:"https://momentjs.com/docs/#/manipulating/add/"},"Date manipulation reference.",-1))])],64)):U("",!0),v("div",null,[d(qe,{name:"index"})]),v("div",null,"Index of current "+I(n.type==="custom"?"interval":n.type)+" if enabled.",1),v("div",null,[d(qe,{name:"current_date"})]),v("div",null,[o[27]||(o[27]=_(" Current date (in YYYY-MM-DD format)")),o[28]||(o[28]=v("br",null,null,-1)),o[29]||(o[29]=_(" You can also use ")),d(qe,{name:"current_date:format"}),o[30]||(o[30]=_(" to override format once, and use ")),d(qe,{name:"current_date+5d:format"}),o[31]||(o[31]=_(" to add 5 days.")),o[32]||(o[32]=v("br",null,null,-1)),o[33]||(o[33]=v("a",{target:"_blank",href:"https://momentjs.com/docs/#/displaying/format/"},"Formatting reference.",-1)),o[34]||(o[34]=v("br",null,null,-1)),o[35]||(o[35]=v("a",{target:"_blank",href:"https://momentjs.com/docs/#/manipulating/add/"},"Date manipulation reference.",-1))]),v("div",null,[d(qe,{name:"time"})]),v("div",null,[o[36]||(o[36]=_(" Current time (in HH:mm format) ")),o[37]||(o[37]=v("br",null,null,-1)),o[38]||(o[38]=_(" You can also use ")),d(qe,{name:"time:format"}),o[39]||(o[39]=_(" to override format once, and use ")),d(qe,{name:"time+5h:format"}),o[40]||(o[40]=_(" to add 5 hours.")),o[41]||(o[41]=v("br",null,null,-1)),o[42]||(o[42]=v("a",{target:"_blank",href:"https://momentjs.com/docs/#/displaying/format/"},"Formatting reference.",-1)),o[43]||(o[43]=v("br",null,null,-1)),o[44]||(o[44]=v("a",{target:"_blank",href:"https://momentjs.com/docs/#/manipulating/add/"},"Date manipulation reference.",-1))]),v("div",null,[d(qe,{name:"current_time"})]),v("div",null,[o[45]||(o[45]=_(" Current time (in HH:mm format) ")),o[46]||(o[46]=v("br",null,null,-1)),o[47]||(o[47]=_(" You can also use ")),d(qe,{name:"time:format"}),o[48]||(o[48]=_(" to override format once, and use ")),d(qe,{name:"time+5h:format"}),o[49]||(o[49]=_(" to add 5 hours.")),o[50]||(o[50]=v("br",null,null,-1)),o[51]||(o[51]=v("a",{target:"_blank",href:"https://momentjs.com/docs/#/displaying/format/"},"Formatting reference.",-1)),o[52]||(o[52]=v("br",null,null,-1)),o[53]||(o[53]=v("a",{target:"_blank",href:"https://momentjs.com/docs/#/manipulating/add/"},"Date manipulation reference.",-1))])])],64))}}),Jm=ye(Wm,[["__scopeId","data-v-570fd5f6"]]),pr=B({__name:"VariableReferenceHint",props:{type:{},dateFormat:{}},setup(e){const t=e,n=ve();function o(){new Fe(n,"Variable reference",Jm,{type:t.type,dateFormat:t.dateFormat}).open()}return(r,a)=>(p(),k("a",{href:"#",onClick:qt(o,["prevent"])},"Supported variables."))}});class qm extends te.AbstractInputSuggest{constructor(t,n){super(t,n),this.textInputElement=n}getSuggestions(t){const n=te.getIconIds(),o=t.toLocaleLowerCase();return n.filter(r=>r.toLocaleLowerCase().includes(o)).sort()}renderSuggestion(t,n){const o=te.getIcon(t);if(o){o.classList.add("suggestion-icon"),n.classList.add("mod-complex"),n.classList.add("journal-suggestion-icon"),n.append(o);const r=n.createSpan();r.classList.add("journal-suggestion-name"),r.style.marginLeft="8px",r.appendText(t)}}selectSuggestion(t){this.textInputElement.value=t,this.textInputElement.trigger("input"),this.close()}}const Hm={class:"icon-selector"},Km=B({__name:"IconSelector",props:It({placeholder:{}},{modelValue:{},modelModifiers:{}}),emits:It(["blur","change"],["update:modelValue"]),setup(e){const t=Bt(e,"modelValue"),n=ie(),o=sl();return _t(()=>{n.value&&new qm(o,n.value.$el)}),(r,a)=>(p(),k("div",Hm,[d(Dn,{name:t.value??""},null,8,["name"]),d(He,{ref_key:"inputCmp",ref:n,modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=l=>t.value=l),placeholder:r.placeholder,onBlur:a[1]||(a[1]=l=>r.$emit("blur")),onChange:a[2]||(a[2]=l=>r.$emit("change",l))},null,8,["modelValue","placeholder"])]))}}),nu=ye(Km,[["__scopeId","data-v-6d210595"]]),zm={day:["same","next","previous","same_next_week","same_previous_week","same_next_month","same_previous_month","same_next_year","same_previous_year"],week:["same","next","previous"],month:["same","next","previous","same_next_year","same_previous_year"],quarter:["same","next","previous","same_next_year","same_previous_year"],year:["same","next","previous"],custom:["same","next","previous"]},Gm=e=>zm[e],ou=(e,t,n)=>{switch(t){case"same":return e==="day"?"Open today's note":`Open current ${e}'s note`;case"previous":return e==="day"&&n==="today"?"Open yesterday's note":`Open last ${e}'s note`;case"next":return e==="day"&&n==="today"?"Open tomorrow's note":`Open next ${e}'s note`;case"same_next_week":return`Open same ${e} next week`;case"same_previous_week":return`Open same ${e} last week`;case"same_next_month":return`Open same ${e} next month`;case"same_previous_month":return`Open same ${e} last month`;case"same_next_year":return`Open same ${e} next year`;case"same_previous_year":return`Open same ${e} last year`}};function Qm(e,t,n){return t==="same"?"":n==="only_open_note"?"(using date of currently opened note)":n==="open_note"?"(using date of currently opened note or today's date)":""}const Xm=["value"],Zm={key:0},ev={key:1},ns=B({__name:"EditCommand.modal",props:{index:{},writeType:{},command:{},commands:{}},emits:["close","submit"],setup(e,{emit:t}){const n=t,o=new Set(te.getIconIds()),r=g(()=>Gm(e.writeType));function a(de){return de?!e.commands.some((oe,he)=>oe.name===de&&he!==e.index):!0}const{defineField:l,errorBag:s,handleSubmit:i}=Sn({initialValues:e.command?{...e.command}:{...um},validationSchema:Vn(jt(Pt({icon:tt(),name:jt(tt(),en("Command name is required"),Jo(a,"Command name should be unique in journal")),type:Tt(["same","next","previous","same_next_week","same_previous_week","same_next_month","same_previous_month","same_next_year","same_previous_year"]),context:Tt(["today","open_note","only_open_note"]),showInRibbon:fn(),openMode:Tt(["active","tab","split","window"])}),Ur(qo([["showInRibbon"],["icon"]],de=>de.showInRibbon?o.has(de.icon):!0,"Icon is required if command is added to ribbon."),["icon"])))}),[u,c]=l("name"),[m,y]=l("icon"),[h,j]=l("type"),[C,$]=l("context"),[F,R]=l("showInRibbon"),[ne,M]=l("openMode"),A=g(()=>r.value.map(de=>({value:de,label:ou(e.writeType,de,C.value)}))),ae=i(de=>{n("submit",de,e.index),n("close")});return(de,oe)=>(p(),k("form",{onSubmit:oe[7]||(oe[7]=(...he)=>b(ae)&&b(ae)(...he))},[d(N,{name:"Name"},{description:f(()=>[oe[8]||(oe[8]=_(" Journal name will be added to command name automatically. ")),d(it,{errors:b(s).name},null,8,["errors"])]),default:f(()=>[d(He,xe({modelValue:b(u),"onUpdate:modelValue":oe[0]||(oe[0]=he=>ce(u)?u.value=he:null)},b(c)),null,16,["modelValue"])]),_:1}),d(N,{name:"Show in ribbon?"},{default:f(()=>[d(Ge,xe({modelValue:b(F),"onUpdate:modelValue":oe[1]||(oe[1]=he=>ce(F)?F.value=he:null)},b(R)),null,16,["modelValue"])]),_:1}),b(F)?(p(),E(N,{key:0,name:"Icon"},{description:f(()=>[d(it,{errors:b(s).icon},null,8,["errors"])]),default:f(()=>[d(nu,xe({modelValue:b(m),"onUpdate:modelValue":oe[2]||(oe[2]=he=>ce(m)?m.value=he:null)},b(y)),null,16,["modelValue"])]),_:1})):U("",!0),d(N,{name:"When command runs"},{default:f(()=>[d(Se,xe({modelValue:b(h),"onUpdate:modelValue":oe[3]||(oe[3]=he=>ce(h)?h.value=he:null)},b(j)),{default:f(()=>[(p(!0),k(W,null,Ce(A.value,he=>(p(),k("option",{key:he.value,value:he.value},I(he.label),9,Xm))),128))]),_:1},16,["modelValue"])]),_:1}),b(h)!=="same"?(p(),E(N,{key:1,name:"Context"},{description:f(()=>[oe[9]||(oe[9]=_(" Allows to run command only in specific context.")),oe[10]||(oe[10]=v("br",null,null,-1)),b(C)=="open_note"?(p(),k("div",Zm," If there is an open journal note - its date will be takes as current, otherwise command will run relative to today. ")):U("",!0),b(C)=="only_open_note"?(p(),k("div",ev," Will only run when there is an open journal note using its date as current. ")):U("",!0)]),default:f(()=>[d(Se,xe({modelValue:b(C),"onUpdate:modelValue":oe[4]||(oe[4]=he=>ce(C)?C.value=he:null)},b($)),{default:f(()=>oe[11]||(oe[11]=[v("option",{value:"today"},"Today",-1),v("option",{value:"open_note"},"Currently opened note",-1),v("option",{value:"only_open_note"},"Only currently opened note",-1)])),_:1},16,["modelValue"])]),_:1})):U("",!0),d(N,{name:"Open note"},{default:f(()=>[d(Se,xe({modelValue:b(ne),"onUpdate:modelValue":oe[5]||(oe[5]=he=>ce(ne)?ne.value=he:null)},b(M)),{default:f(()=>oe[12]||(oe[12]=[v("option",{value:"active"},"Replacing active note",-1),v("option",{value:"tab"},"In new tab",-1),v("option",{value:"split"},"Adjacent to active note",-1),v("option",{value:"window"},"In popout window",-1)])),_:1},16,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(se,{onClick:oe[6]||(oe[6]=he=>de.$emit("close"))},{default:f(()=>oe[13]||(oe[13]=[_("Cancel")])),_:1}),d(se,{cta:"",type:"submit"},{default:f(()=>oe[14]||(oe[14]=[_("Save")])),_:1})]),_:1})],32))}}),tv=B({__name:"DecorationShape",props:{decoration:{}},setup(e){Cn(o=>({"07e32d8a":n.value}));const t=e,n=g(()=>wt(t.decoration.color));return(o,r)=>(p(),k("div",{class:kt(["shape-decoration",[`shape-${o.decoration.shape}`]])},null,2))}}),nv=ye(tv,[["__scopeId","data-v-02fb3778"]]),ov=B({__name:"DecorationCorner",props:{decoration:{}},setup(e){Cn(o=>({"2da80fea":n.value}));const t=e,n=g(()=>wt(t.decoration.color));return(o,r)=>(p(),k("div",{class:kt(["decoration-corner",[o.decoration.placement]])},null,2))}}),rv=ye(ov,[["__scopeId","data-v-a31b2a0a"]]),av=B({__name:"DecorationIcon",props:{decoration:{}},setup(e){Cn(o=>({"44eeddd4":n.value}));const t=e,n=g(()=>wt(t.decoration.color));return(o,r)=>(p(),E(Dn,{name:o.decoration.icon,class:"icon-decoration"},null,8,["name"]))}}),lv=ye(av,[["__scopeId","data-v-dce37e64"]]),sv={class:"calendar-decoration"},iv={class:"decoration-holder"},uv=B({__name:"CalendarDecoration",props:{styles:{}},setup(e){Cn(u=>({aeaf1af0:n.value,"6dc4fd9c":o.value}));const t=e,n=g(()=>{const u=t.styles.find(c=>c.type==="background");return u?wt(u.color):"inherit"}),o=g(()=>{const u=t.styles.find(c=>c.type==="color");return u?wt(u.color):"inherit"}),r=g(()=>t.styles.filter(u=>u.type==="corner")),a=g(()=>{const u={left_top:[],left_middle:[],left_bottom:[],center_top:[],center_middle:[],center_bottom:[],right_top:[],right_middle:[],right_bottom:[]};for(const c of t.styles)(c.type==="shape"||c.type==="icon")&&u[`${c.placement_x}_${c.placement_y}`].push(c);return u}),l=g(()=>t.styles.filter(u=>u.type==="border")),s=g(()=>{const u={borderTop:"none",borderBottom:"none",borderLeft:"none",borderRight:"none"};for(const c of l.value)if(c.border==="uniform"){const m=i(c.left);m!=="none"&&(u.borderTop=m,u.borderBottom=m,u.borderLeft=m,u.borderRight=m)}else{const m=i(c.left);m!=="none"&&(u.borderLeft=m);const y=i(c.right);y!=="none"&&(u.borderRight=y);const h=i(c.top);h!=="none"&&(u.borderTop=h);const j=i(c.bottom);j!=="none"&&(u.borderBottom=j)}return u});function i(u){return u.show?`${u.width}px ${u.style} ${wt(u.color)}`:"none"}return(u,c)=>(p(),k("span",sv,[v("span",{class:"decoration-border",style:no(s.value)},null,4),(p(!0),k(W,null,Ce(r.value,(m,y)=>(p(),E(rv,{key:y,decoration:m},null,8,["decoration"]))),128)),v("span",iv,[(p(!0),k(W,null,Ce(a.value,(m,y)=>(p(),k(W,{key:y},[m.length>0?(p(),k("span",{key:0,class:kt(`place place-${y}`)},[(p(!0),k(W,null,Ce(m,(h,j)=>(p(),k(W,{key:j},[h.type==="icon"?(p(),E(lv,{key:0,decoration:h},null,8,["decoration"])):h.type==="shape"?(p(),E(nv,{key:1,decoration:h},null,8,["decoration"])):U("",!0)],64))),128))],2)):U("",!0)],64))),128))]),ze(u.$slots,"default",{},void 0,!0)]))}}),Ko=ye(uv,[["__scopeId","data-v-59e6388b"]]);function dv(e){return hs()?(xu(e),!0):!1}const ru=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const cv=Object.prototype.toString,fv=e=>cv.call(e)==="[object Object]",Rn=()=>{},pv=mv();function mv(){var e,t;return ru&&((e=window?.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window?.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function pa(e){return Array.isArray(e)?e:[e]}function vv(e,t,n){return ut(e,t,{...n,immediate:!0})}const au=ru?window:void 0;function bo(e){var t;const n=We(e);return(t=n?.$el)!=null?t:n}function vo(...e){const t=[],n=()=>{t.forEach(s=>s()),t.length=0},o=(s,i,u,c)=>(s.addEventListener(i,u,c),()=>s.removeEventListener(i,u,c)),r=g(()=>{const s=pa(We(e[0])).filter(i=>i!=null);return s.every(i=>typeof i!="string")?s:void 0}),a=vv(()=>{var s,i;return[(i=(s=r.value)==null?void 0:s.map(u=>bo(u)))!=null?i:[au].filter(u=>u!=null),pa(We(r.value?e[1]:e[0])),pa(b(r.value?e[2]:e[1])),We(r.value?e[3]:e[2])]},([s,i,u,c])=>{if(n(),!s?.length||!i?.length||!u?.length)return;const m=fv(c)?{...c}:c;t.push(...s.flatMap(y=>i.flatMap(h=>u.map(j=>o(y,h,j,m)))))},{flush:"post"}),l=()=>{a(),n()};return dv(n),l}let os=!1;function hv(e,t,n={}){const{window:o=au,ignore:r=[],capture:a=!0,detectIframe:l=!1,controls:s=!1}=n;if(!o)return s?{stop:Rn,cancel:Rn,trigger:Rn}:Rn;if(pv&&!os){os=!0;const $={passive:!0};Array.from(o.document.body.children).forEach(F=>vo(F,"click",Rn,$)),vo(o.document.documentElement,"click",Rn,$)}let i=!0;const u=$=>We(r).some(F=>{if(typeof F=="string")return Array.from(o.document.querySelectorAll(F)).some(R=>R===$.target||$.composedPath().includes(R));{const R=bo(F);return R&&($.target===R||$.composedPath().includes(R))}});function c($){const F=We($);return F&&F.$.subTree.shapeFlag===16}function m($,F){const R=We($),ne=R.$.subTree&&R.$.subTree.children;return ne==null||!Array.isArray(ne)?!1:ne.some(M=>M.el===F.target||F.composedPath().includes(M.el))}const y=$=>{const F=bo(e);if($.target!=null&&!(!(F instanceof Element)&&c(e)&&m(e,$))&&!(!F||F===$.target||$.composedPath().includes(F))){if("detail"in $&&$.detail===0&&(i=!u($)),!i){i=!0;return}t($)}};let h=!1;const j=[vo(o,"click",$=>{h||(h=!0,setTimeout(()=>{h=!1},0),y($))},{passive:!0,capture:a}),vo(o,"pointerdown",$=>{const F=bo(e);i=!u($)&&!!(F&&!$.composedPath().includes(F))},{passive:!0}),l&&vo(o,"blur",$=>{setTimeout(()=>{var F;const R=bo(e);((F=o.document.activeElement)==null?void 0:F.tagName)==="IFRAME"&&!R?.contains(o.document.activeElement)&&t($)},0)},{passive:!0})].filter(Boolean),C=()=>j.forEach($=>$());return s?{stop:C,cancel:()=>{i=!1},trigger:$=>{i=!0,y($),i=!1}}:C}const gv={class:"button-dropdown"},yv=B({__name:"ButtonDropdown",props:{options:{}},emits:["select"],setup(e,{emit:t}){const n=t,o=ie(!1),r=ie(),a=ie(),l=ie({});hv(a,()=>{o.value=!1});function s(){if(!r.value)return;const u=r.value.$el.getBoundingClientRect();l.value={top:`${u.top+u.height}px`,left:`${u.left}px`},o.value=!0}function i(u){o.value=!1,n("select",u)}return(u,c)=>(p(),k("div",gv,[d(se,{ref_key:"buttonRef",ref:r,onClick:s},{default:f(()=>[ze(u.$slots,"default",{},void 0,!0)]),_:3},512),(p(),E(dd,{to:"body"},[o.value?(p(),k("div",{key:0,ref_key:"popoutRef",ref:a,class:"button-dropdown-popout",style:no(l.value)},[(p(!0),k(W,null,Ce(u.options,m=>(p(),E(se,{key:m.value,flat:"",class:"button-dropdown-option",onClick:y=>i(m.value)},{default:f(()=>[_(I(m.label),1)]),_:2},1032,["onClick"]))),128))],4)):U("",!0)]))]))}}),ja=ye(yv,[["__scopeId","data-v-9329b5b0"]]),bv={class:"condition-type"},wv=B({__name:"ConditionNoteName",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,r=g({get(){return n.condition.condition},set(l){o("change",{prop:"condition",value:l})}}),a=g({get(){return n.condition.value},set(l){o("change",{prop:"value",value:l})}});return(l,s)=>(p(),k(W,null,[v("span",bv,I(l.condition.type),1),d(Se,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=i=>r.value=i)},{default:f(()=>s[2]||(s[2]=[v("option",{value:"contains"},"contains",-1),v("option",{value:"starts-with"},"starts with",-1),v("option",{value:"ends-with"},"ends with",-1)])),_:1},8,["modelValue"]),d(He,{modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=i=>a.value=i)},null,8,["modelValue"])],64))}}),lu=ye(wv,[["__scopeId","data-v-2b66f529"]]),kv={class:"condition-type"},_v=B({__name:"ConditionTag",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,r=g({get(){return n.condition.condition},set(l){o("change",{prop:"condition",value:l})}}),a=g({get(){return n.condition.value},set(l){o("change",{prop:"value",value:l})}});return(l,s)=>(p(),k(W,null,[v("span",kv,I(l.condition.type),1),d(Se,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=i=>r.value=i)},{default:f(()=>s[2]||(s[2]=[v("option",{value:"contains"},"contains",-1),v("option",{value:"starts-with"},"starts with",-1),v("option",{value:"ends-with"},"ends with",-1)])),_:1},8,["modelValue"]),d(He,{modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=i=>a.value=i)},null,8,["modelValue"])],64))}}),su=ye(_v,[["__scopeId","data-v-bb471cda"]]),iu=B({__name:"ConditionProperty",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,r=g({get(){return n.condition.name},set(i){o("change",{prop:"name",value:i})}}),a=g({get(){return n.condition.condition},set(i){o("change",{prop:"condition",value:i})}}),l=g({get(){return n.condition.value},set(i){o("change",{prop:"value",value:i})}}),s=g(()=>n.condition.condition!=="exists"&&n.condition.condition!=="does-not-exist");return(i,u)=>(p(),k(W,null,[u[4]||(u[4]=_(" Property ")),d(He,{modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=c=>r.value=c)},null,8,["modelValue"]),d(Se,{modelValue:a.value,"onUpdate:modelValue":u[1]||(u[1]=c=>a.value=c)},{default:f(()=>u[3]||(u[3]=[v("option",{value:"exists"},"exists",-1),v("option",{value:"does-not-exist"},"does not exist",-1),v("option",{value:"eq"},"equals",-1),v("option",{value:"neq"},"does not equal",-1),v("option",{value:"contains"},"contains",-1),v("option",{value:"does-not-contain"},"does not contain",-1),v("option",{value:"starts-with"},"starts with",-1),v("option",{value:"ends-with"},"ends with",-1)])),_:1},8,["modelValue"]),s.value?(p(),E(He,{key:0,modelValue:l.value,"onUpdate:modelValue":u[2]||(u[2]=c=>l.value=c)},null,8,["modelValue"])):U("",!0)],64))}}),Cv=["value"],Dv=["value"],Sv=B({__name:"ConditionDate",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,r=g({get(){return String(n.condition.day)},set(i){o("change",{prop:"day",value:Number.parseInt(i,10)})}}),a=g({get(){return String(n.condition.month)},set(i){o("change",{prop:"month",value:Number.parseInt(i,10)})}}),l=g({get(){return n.condition.year??void 0},set(i){o("change",{prop:"year",value:i??null})}}),s=te.moment().localeData().months();return(i,u)=>(p(),k(W,null,[d(Se,{modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=c=>r.value=c)},{default:f(()=>[u[3]||(u[3]=v("option",{value:-1},"Any day",-1)),(p(),k(W,null,Ce(31,c=>v("option",{key:c,value:c},I(c),9,Cv)),64))]),_:1},8,["modelValue"]),d(Se,{modelValue:a.value,"onUpdate:modelValue":u[1]||(u[1]=c=>a.value=c)},{default:f(()=>[u[4]||(u[4]=v("option",{value:-1},"Any month",-1)),(p(!0),k(W,null,Ce(b(s),(c,m)=>(p(),k("option",{key:m,value:m},I(c),9,Dv))),128))]),_:1},8,["modelValue"]),d(pn,{modelValue:l.value,"onUpdate:modelValue":u[2]||(u[2]=c=>l.value=c),placeholder:"Any year"},null,8,["modelValue"])],64))}}),Vv={class:"wrapper"},xv=["value"],jv=B({__name:"ConditionWeekday",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,r=ve(),a=r.calendarSettings.dow===-1?te.moment().localeData().firstDayOfWeek():r.calendarSettings.dow,l=[];for(let u=a;u<7;++u)l.push(u);for(let u=0;u<a;++u)l.push(u);const s=l.map(u=>({label:te.moment().localeData().weekdaysShort()[u],value:u})),i=ie([...n.condition.weekdays]);return ut(()=>i.value.length,()=>{o("change",{prop:"weekdays",value:[...i.value]})}),(u,c)=>(p(),k("div",Vv,[(p(!0),k(W,null,Ce(b(s),({label:m,value:y})=>(p(),k("label",{key:y},[_(I(m)+" ",1),Tn(v("input",{"onUpdate:modelValue":c[0]||(c[0]=h=>i.value=h),type:"checkbox",value:y},null,8,xv),[[jc,i.value]])]))),128))]))}}),$v=ye(jv,[["__scopeId","data-v-250c50b8"]]),Nv=B({__name:"ConditionOffset",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,r=g({get(){return n.condition.offset},set(a){o("change",{prop:"offset",value:a})}});return(a,l)=>(p(),k("div",null,[d(pn,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=s=>r.value=s)},null,8,["modelValue"]),_(" days from interval "+I(r.value>=0?"start":"end"),1)]))}}),Mv=B({__name:"ConditionTypeOnly",props:{condition:{}},setup(e){const t={"has-note":"There is a note connected to date","has-open-task":"There is no completed task in a note connected to date","all-tasks-completed":"All tasks in the note connected to date have been completed"};return(n,o)=>(p(),k("div",null,I(t[n.condition.type]),1))}}),Av=B({__name:"ConditionItem",props:{condition:{}},emits:["change"],setup(e){const t=g(()=>{switch(e.condition.type){case"title":return lu;case"tag":return su;case"property":return iu;case"date":return Sv;case"weekday":return $v;case"offset":return Nv;case"all-tasks-completed":case"has-note":case"has-open-task":return Mv}return null});return(n,o)=>t.value?(p(),E(Yo(t.value),{key:0,condition:n.condition,onChange:o[0]||(o[0]=r=>n.$emit("change",r))},null,40,["condition"])):U("",!0)}}),Ov=B({__name:"DecorationBackground",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,r=g({get(){return n.decoration.color},set(a){o("change",{prop:"color",value:a})}});return(a,l)=>(p(),E(N,{name:"Background color"},{default:f(()=>[d(Ft,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=s=>r.value=s)},null,8,["modelValue"])]),_:1}))}}),Tv=B({__name:"DecorationColor",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,r=g({get(){return n.decoration.color},set(a){o("change",{prop:"color",value:a})}});return(a,l)=>(p(),E(N,{name:"Text color"},{default:f(()=>[d(Ft,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=s=>r.value=s)},null,8,["modelValue"])]),_:1}))}}),Fv=B({__name:"DecorationShape",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,r=g({get(){return n.decoration.shape},set(i){o("change",{prop:"shape",value:i})}}),a=g({get(){return n.decoration.color},set(i){o("change",{prop:"color",value:i})}}),l=g({get(){return n.decoration.placement_x},set(i){o("change",{prop:"placement_x",value:i})}}),s=g({get(){return n.decoration.placement_y},set(i){o("change",{prop:"placement_y",value:i})}});return(i,u)=>(p(),k(W,null,[d(N,{name:"Shape"},{default:f(()=>[d(Se,{modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=c=>r.value=c)},{default:f(()=>u[4]||(u[4]=[v("option",{value:"circle"},"Circle",-1),v("option",{value:"square"},"Square",-1),v("option",{value:"triangle-up"},"Triangle Up",-1),v("option",{value:"triangle-down"},"Triangle Down",-1),v("option",{value:"triangle-left"},"Triangle Left",-1),v("option",{value:"triangle-right"},"Triangle Right",-1)])),_:1},8,["modelValue"])]),_:1}),d(N,{name:"Color"},{default:f(()=>[d(Ft,{modelValue:a.value,"onUpdate:modelValue":u[1]||(u[1]=c=>a.value=c)},null,8,["modelValue"])]),_:1}),d(N,{name:"Placement"},{default:f(()=>[d(Se,{modelValue:l.value,"onUpdate:modelValue":u[2]||(u[2]=c=>l.value=c)},{default:f(()=>u[5]||(u[5]=[v("option",{value:"left"},"Left",-1),v("option",{value:"center"},"Center",-1),v("option",{value:"right"},"Right",-1)])),_:1},8,["modelValue"]),d(Se,{modelValue:s.value,"onUpdate:modelValue":u[3]||(u[3]=c=>s.value=c)},{default:f(()=>u[6]||(u[6]=[v("option",{value:"top"},"Top",-1),v("option",{value:"middle"},"Middle",-1),v("option",{value:"bottom"},"Bottom",-1)])),_:1},8,["modelValue"])]),_:1})],64))}}),Ev=B({__name:"DecorationCorner",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,r=g({get(){return n.decoration.placement},set(l){o("change",{prop:"placement",value:l})}}),a=g({get(){return n.decoration.color},set(l){o("change",{prop:"color",value:l})}});return(l,s)=>(p(),k(W,null,[d(N,{name:"Placement"},{default:f(()=>[d(Se,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=i=>r.value=i)},{default:f(()=>s[2]||(s[2]=[v("option",{value:"top-left"},"Top Left",-1),v("option",{value:"top-right"},"Top Right",-1),v("option",{value:"bottom-left"},"Bottom Left",-1),v("option",{value:"bottom-right"},"Bottom Right",-1)])),_:1},8,["modelValue"])]),_:1}),d(N,{name:"Color"},{default:f(()=>[d(Ft,{modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=i=>a.value=i)},null,8,["modelValue"])]),_:1})],64))}}),Pv=B({__name:"DecorationIcon",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,r=g({get(){return n.decoration.icon},set(i){o("change",{prop:"icon",value:i})}}),a=g({get(){return n.decoration.color},set(i){o("change",{prop:"color",value:i})}}),l=g({get(){return n.decoration.placement_x},set(i){o("change",{prop:"placement_x",value:i})}}),s=g({get(){return n.decoration.placement_y},set(i){o("change",{prop:"placement_y",value:i})}});return(i,u)=>(p(),k(W,null,[d(N,{name:"Icon"},{default:f(()=>[d(nu,{modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=c=>r.value=c)},null,8,["modelValue"])]),_:1}),d(N,{name:"Color"},{default:f(()=>[d(Ft,{modelValue:a.value,"onUpdate:modelValue":u[1]||(u[1]=c=>a.value=c)},null,8,["modelValue"])]),_:1}),d(N,{name:"Placement"},{default:f(()=>[d(Se,{modelValue:l.value,"onUpdate:modelValue":u[2]||(u[2]=c=>l.value=c)},{default:f(()=>u[4]||(u[4]=[v("option",{value:"left"},"Left",-1),v("option",{value:"center"},"Center",-1),v("option",{value:"right"},"Right",-1)])),_:1},8,["modelValue"]),d(Se,{modelValue:s.value,"onUpdate:modelValue":u[3]||(u[3]=c=>s.value=c)},{default:f(()=>u[5]||(u[5]=[v("option",{value:"top"},"Top",-1),v("option",{value:"middle"},"Middle",-1),v("option",{value:"bottom"},"Bottom",-1)])),_:1},8,["modelValue"])]),_:1})],64))}}),rr=B({__name:"DecorationBorderSide",props:{border:{},label:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,r=g({get(){return n.border.show},set(i){o("change",{prop:"show",value:i})}}),a=g({get(){return n.border.width},set(i){o("change",{prop:"width",value:i})}}),l=g({get(){return n.border.color},set(i){o("change",{prop:"color",value:i})}}),s=g({get(){return n.border.style},set(i){o("change",{prop:"style",value:i})}});return(i,u)=>(p(),E(N,{name:i.label},{default:f(()=>[d(Ge,{modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=c=>r.value=c)},null,8,["modelValue"]),r.value?(p(),k(W,{key:0},[d(pn,{modelValue:a.value,"onUpdate:modelValue":u[1]||(u[1]=c=>a.value=c),narrow:"",min:1},null,8,["modelValue"]),d(Se,{modelValue:s.value,"onUpdate:modelValue":u[2]||(u[2]=c=>s.value=c)},{default:f(()=>u[4]||(u[4]=[v("option",{value:"solid"},"Solid",-1),v("option",{value:"dotted"},"Dotted",-1),v("option",{value:"dashed"},"Dashed",-1),v("option",{value:"groove"},"groove",-1),v("option",{value:"groove"},"ridge",-1)])),_:1},8,["modelValue"]),d(Ft,{modelValue:l.value,"onUpdate:modelValue":u[3]||(u[3]=c=>l.value=c)},null,8,["modelValue"])],64)):U("",!0)]),_:1},8,["name"]))}}),Iv=B({__name:"DecorationBorder",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,r=g({get(){return n.decoration.border},set(l){o("change",{prop:"border",value:l})}});function a(l,s){o("change",{prop:l,value:{...n.decoration[l],[s.prop]:s.value}})}return(l,s)=>(p(),k(W,null,[d(N,{name:"Border appearance"},{default:f(()=>[d(Se,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=i=>r.value=i)},{default:f(()=>s[5]||(s[5]=[v("option",{value:"uniform"},"Uniform",-1),v("option",{value:"different"},"Per side setup",-1)])),_:1},8,["modelValue"])]),_:1}),d(rr,{label:r.value==="uniform"?"":"Left",border:l.decoration.left,onChange:s[1]||(s[1]=i=>a("left",i))},null,8,["label","border"]),r.value!=="uniform"?(p(),k(W,{key:0},[d(rr,{label:"Top",border:l.decoration.top,onChange:s[2]||(s[2]=i=>a("top",i))},null,8,["border"]),d(rr,{label:"Right",border:l.decoration.right,onChange:s[3]||(s[3]=i=>a("right",i))},null,8,["border"]),d(rr,{label:"Bottom",border:l.decoration.bottom,onChange:s[4]||(s[4]=i=>a("bottom",i))},null,8,["border"])],64)):U("",!0)],64))}}),Bv=B({__name:"DecorationItem",props:{decoration:{}},emits:["change"],setup(e){const t=g(()=>{switch(e.decoration.type){case"background":return Ov;case"color":return Tv;case"shape":return Fv;case"corner":return Ev;case"icon":return Pv;case"border":return Iv}return null});return(n,o)=>(p(),E(Yo(t.value),{decoration:n.decoration,onChange:o[0]||(o[0]=r=>n.$emit("change",r))},null,40,["decoration"]))}}),Rv={key:0,class:"mode-hint"},Yv={key:0,class:"journal-hint"},Uv={class:"preview-container"},Lv={class:"preview-decoration-block"},Wv={key:0,class:"journal-hint"},Jv={key:0,class:"separator"},qv=B({__name:"EditDecoration.modal",props:{index:{},writeType:{},decoration:{}},emits:["close","submit"],setup(e,{emit:t}){const n=e,o=t,r=Ne().day(),a=ie(n.decoration?.mode??"and"),l=g(()=>{const M=["title","tag","property","has-note","has-open-task","all-tasks-completed"];return n.writeType==="day"?[...M,"date","weekday"]:n.writeType==="custom"?[...M,"offset"]:M}),s=ie(n.decoration?Vt(n.decoration.conditions):[]),i=g(()=>{const M=new Set(s.value.map(({type:A})=>A));return l.value.filter(A=>!M.has(A)).map(A=>({value:A,label:Wp[A]}))});function u(M){s.value.push(Vt(zi[M]))}function c(M){s.value.splice(M,1)}function m(M,A){M[A.prop]=A.value}const y=["background","color","shape","corner","icon","border"],h=ie(n.decoration?Vt(n.decoration.styles):[]),j=g(()=>{const M=new Set(h.value.map(({type:A})=>A));return y.filter(A=>!M.has(A)).map(A=>({value:A,label:A}))});function C(M){h.value.push(Vt(dm[M]))}function $(M){h.value.splice(M,1)}function F(M,A){M[A.prop]=A.value}const R=g(()=>h.value.length>0&&s.value.length>0);function ne(){o("submit",{mode:a.value,conditions:s.value,styles:h.value}),o("close")}return(M,A)=>(p(),k("div",null,[d(N,null,{default:f(()=>[A[3]||(A[3]=_(" Decorate elements in calendar when ")),d(Se,{modelValue:a.value,"onUpdate:modelValue":A[0]||(A[0]=ae=>a.value=ae)},{default:f(()=>A[2]||(A[2]=[v("option",{value:"and"},"all conditions are",-1),v("option",{value:"or"},"any conditions is",-1)])),_:1},8,["modelValue"]),A[4]||(A[4]=_(" fulfilled "))]),_:1}),d(N,null,{default:f(()=>[d(ja,{options:i.value,onSelect:u},{default:f(()=>A[5]||(A[5]=[_("Add condition")])),_:1},8,["options"])]),_:1}),(p(!0),k(W,null,Ce(s.value,(ae,de)=>(p(),E(N,{key:de,class:"condition-wrapper"},{default:f(()=>[de>0?(p(),k("span",Rv,I(a.value),1)):U("",!0),d(Av,{condition:ae,onChange:oe=>m(ae,oe)},null,8,["condition","onChange"]),d(ke,{icon:"trash",onClick:oe=>c(de)},null,8,["onClick"])]),_:2},1024))),128)),s.value.length===0?(p(),k("p",Yv,"No conditions defined yet")):U("",!0),A[9]||(A[9]=v("div",{class:"separator"},null,-1)),v("div",Uv,[v("div",Lv,[d(Ko,{class:"preview-decoration",styles:h.value},{default:f(()=>[v("span",null,I(b(r)),1)]),_:1},8,["styles"])]),v("div",null,[d(N,null,{default:f(()=>[d(ja,{options:j.value,onSelect:C},{default:f(()=>A[6]||(A[6]=[_("Add style")])),_:1},8,["options"])]),_:1}),h.value.length===0?(p(),k("p",Wv,"No styles defined yet")):U("",!0),(p(!0),k(W,null,Ce(h.value,(ae,de)=>(p(),k("div",{key:de},[de>0?(p(),k("div",Jv)):U("",!0),d(N,null,{name:f(()=>[_("Decorating "+I(ae.type),1)]),default:f(()=>[d(ke,{icon:"trash",onClick:oe=>$(de)},null,8,["onClick"])]),_:2},1024),d(Bv,{decoration:ae,onChange:oe=>F(ae,oe)},null,8,["decoration","onChange"])]))),128))])]),d(N,{heading:""},{default:f(()=>[d(se,{onClick:A[1]||(A[1]=ae=>M.$emit("close"))},{default:f(()=>A[7]||(A[7]=[_("Cancel")])),_:1}),d(se,{cta:"",disabled:!R.value,onClick:ne},{default:f(()=>A[8]||(A[8]=[_("Save")])),_:1},8,["disabled"])]),_:1})]))}}),rs=ye(qv,[["__scopeId","data-v-9534411d"]]),Hv=B({__name:"RenameJournal.modal",props:{name:{}},emits:["save","close"],setup(e,{emit:t}){const n=e,o=t,r=ve();function a(y){return y===n.name||y!==n.name&&!r.hasJournal(y)}const{defineField:l,errorBag:s,handleSubmit:i}=Sn({initialValues:{journalName:n.name},validationSchema:Vn(Pt({journalName:jt(tt(),en("Journal name is required"),Jo(a,"Journal name should be unique"))}))}),[u,c]=l("journalName"),m=i(y=>{y.journalName!==n.name&&o("save",y.journalName),o("close")});return(y,h)=>(p(),k("form",{onSubmit:h[2]||(h[2]=qt((...j)=>b(m)&&b(m)(...j),["prevent"]))},[d(N,{name:"New name"},{description:f(()=>[h[3]||(h[3]=_(" Renaming journal will require restart if you have ribbon icons and/or commands configured. ")),d(it,{errors:b(s).journalName},null,8,["errors"])]),default:f(()=>[d(He,xe({modelValue:b(u),"onUpdate:modelValue":h[0]||(h[0]=j=>ce(u)?u.value=j:null)},b(c)),null,16,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(se,{onClick:h[1]||(h[1]=j=>y.$emit("close"))},{default:f(()=>h[4]||(h[4]=[_("Cancel")])),_:1}),d(se,{cta:"",type:"submit"},{default:f(()=>h[5]||(h[5]=[_("Save")])),_:1})]),_:1})],32))}});function Nt(e,t){let n=e??"";for(const[l,s]of Object.entries(t))switch(s.type){case"string":case"number":{n=n.replaceAll(`{{${l}}}`,(s.value??"").toString());break}case"date":{const i=new RegExp(`{{\\s*(${l})\\s*(([+-]\\d+)([yqmwd]))?\\s*(:(.*?))?}}`,"gi");n=n.replaceAll(i,(u,c,m,y,h,j,C)=>{const $=Q(s.value);return m&&$.add(Number.parseInt(y,10),h),$.format(C??s.defaultFormat)});break}}const o=te.moment(),r="HH:mm";n=n.replaceAll(/{{\s*(time|current_time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:(.*?))?}}/gi,(l,s,i,u,c,m,y)=>{const h=o.clone();return i&&h.add(Number.parseInt(u,10),c),y?h.format(y):h.format(r)});const a="YYYY-MM-DD";return n=n.replaceAll(/{{\s*(current_date)\s*(([+-]\d+)([yqmwdhs]))?\s*(:(.*?))?}}/gi,(l,s,i,u,c,m,y)=>{const h=o.clone();return i&&h.add(Number.parseInt(u,10),c),y?h.format(y):h.format(a)}),n}function uu(e,t){if(!t.includes("<%")&&!t.includes("%>"))return!1;const n=e.plugins.getPlugin("templater-obsidian");return!(!n||!("templater"in n)||!("create_running_config"in n.templater)||!("parse_template"in n.templater))}function Kv(e){const t=e.plugins.getPlugin("templater-obsidian");return!(!t||!("editor_handler"in t)||!("jump_to_next_cursor_location"in t.editor_handler))}async function zv(e,t){if(!Kv(e))return!1;const n=e.plugins.getPlugin("templater-obsidian");return n?(await n.editor_handler.jump_to_next_cursor_location(t,!0),!0):!1}async function Gv(e,t,n,o){if(!uu(e,o))return o;const r=e.plugins.getPlugin("templater-obsidian");if(!r)return o;try{const a=r.templater.create_running_config(t,n,0);return await r.templater.parse_template(a,o)}catch(a){console.error("Error applying templater",a)}return o}function zo(e){const t=Qt(e),n=ve(),o=g(()=>{const F=t.value;return n.usesShelves&&F?n.journals.filter(R=>R.shelfName===F):n.journals}),r=g(()=>o.value.filter(F=>F.type==="day")),a=g(()=>o.value.filter(F=>F.type==="week")),l=g(()=>o.value.filter(F=>F.type==="month")),s=g(()=>o.value.filter(F=>F.type==="quarter")),i=g(()=>o.value.filter(F=>F.type==="year")),u=g(()=>o.value.filter(F=>F.type==="custom")),c=g(()=>[...$n(r.value),...$n(u.value,F=>F.conditions.some(R=>R.type==="offset"))]),m=g(()=>$n(a.value)),y=g(()=>$n(l.value)),h=g(()=>$n(s.value)),j=g(()=>$n(i.value)),C=g(()=>$n(u.value,F=>!F.conditions.some(R=>R.type==="offset"))),$={journals:{all:o,day:r,week:a,month:l,quarter:s,year:i,custom:u},decorations:{day:c,week:m,month:y,quarter:h,year:j,custom:C}};return Ha(xi,$),$}function $n(e,t=()=>!0){return e.flatMap(n=>n.decorations.filter(o=>t(o)).map(o=>({journalName:n.name,decoration:o})))}function Go(){const e=Kn(xi);if(!e)throw new Error("Shelf data not provided or composable used outside of vue context");return e}function du(e,t){const n=Qt(t);return g(()=>e.getJournal(n.value))}function Qv(e,t,n){const o=Qt(t),r=Qt(n),a=du(e,r),l=g(()=>o.value&&a.value?a.value.resolveAnchorDate(o.value):null);return{anchorDate:l,noteData:g(()=>!a.value||!l.value?null:e.index.get(a.value.name,l.value))}}function il(e,t,n){const o=Qt(n);return g(()=>{const r=b(t);return r?o.value.flatMap(({journalName:a,decoration:l})=>Xv(e,r,a,l).value):[]})}function Xv(e,t,n,o){const r=Qt(t),a=Qt(n),l=Qt(o);return g(()=>{if(!r.value)return[];const{noteData:s}=Qv(e,r,a);return Zv(e,r.value,a.value,s.value,l.value.mode,l.value.conditions)?l.value.styles:[]})}function Zv(e,t,n,o,r,a){return a.length===0?!1:r==="or"?a.some(l=>as(e,t,n,o,l)):a.every(l=>as(e,t,n,o,l))}function as(e,t,n,o,r){switch(r.type){case"title":return eh(o,r);case"tag":return th(o,r);case"date":return nh(t,r);case"property":return oh(o,r);case"weekday":return rh(t,r);case"offset":return ah(e,t,n,r);case"all-tasks-completed":return lh(o);case"has-note":return ih(o);case"has-open-task":return sh(o)}return!1}function eh(e,t){if(!e)return!1;const n=e.title.toLowerCase(),o=t.value.toLowerCase();switch(t.condition){case"contains":return n.includes(o);case"starts-with":return n.startsWith(o);case"ends-with":return n.endsWith(o)}return!1}function th(e,t){if(!e)return!1;const n=e.tags;if(n.length===0)return!1;const o=t.value.toLowerCase();switch(t.condition){case"contains":return n.some(r=>r.toLowerCase().includes(o));case"starts-with":return n.some(r=>r.toLowerCase().startsWith(o));case"ends-with":return n.some(r=>r.toLowerCase().endsWith(o))}}function nh(e,t){const n=Q(e);return!(t.day!==-1&&n.date()!==t.day||t.month!==-1&&n.month()!==t.month||t.year&&n.year()!==t.year)}function oh(e,t){if(!e)return!1;const n=e.properties,o=t.name;switch(t.condition){case"exists":return o in n;case"does-not-exist":return!(o in n);case"eq":return n[o]==t.value;case"neq":return n[o]!=t.value;case"contains":return Array.isArray(n[o])?n[o].some(r=>typeof r=="string"&&r.toLowerCase().includes(t.value.toLowerCase())):typeof n[o]=="string"?n[o].toLowerCase().includes(t.value.toLowerCase()):!1;case"does-not-contain":return Array.isArray(n[o])?!n[o].some(r=>typeof r=="string"&&r.toLowerCase().includes(t.value.toLowerCase())):typeof n[o]=="string"?!n[o].toLowerCase().includes(t.value.toLowerCase()):!1;case"starts-with":return Array.isArray(n[o])?n[o].some(r=>typeof r=="string"&&r.toLowerCase().startsWith(t.value.toLowerCase())):typeof n[o]=="string"?n[o].toLowerCase().startsWith(t.value.toLowerCase()):!1;case"ends-with":return Array.isArray(n[o])?n[o].some(r=>typeof r=="string"&&r.toLowerCase().endsWith(t.value.toLowerCase())):typeof n[o]=="string"?n[o].toLowerCase().endsWith(t.value.toLowerCase()):!1}return!1}function rh(e,t){const n=Q(e);return t.weekdays.includes(n.day())}function ah(e,t,n,o){const[r,a]=du(e,n).value?.calculateOffset(t)??[0,0];return o.offset<0?a===o.offset:r===o.offset}function lh(e){if(!e)return!1;const t=e.tasks;return t.length===0?!1:t.every(n=>n.completed)}function sh(e){if(!e)return!1;const t=e.tasks;return t.length===0?!1:t.filter(o=>!o.completed).length>0}function ih(e){return!!e}const uh=B({__name:"NavigationBlockRow",props:{row:{},refDate:{},defaultFormat:{},journal:{}},emits:["navigate"],setup(e,{emit:t}){Cn(R=>({"2f45caf8":l.value,"4c13e83b":s.value,"234b338e":i.value,"343c3c2c":C.value,"43c58362":u.value,"2872b9c2":c.value}));const n=t,o=g(()=>e.journal.resolveAnchorDate(e.refDate)),r=g(()=>e.journal.get(e.refDate)),a=g(()=>Nt(e.row.template,{date:{type:"date",value:e.refDate,defaultFormat:e.defaultFormat},start_date:{type:"date",value:o.value?e.journal.resolveStartDate(o.value):"",defaultFormat:e.defaultFormat},end_date:{type:"date",value:o.value?e.journal.resolveEndDate(o.value):"",defaultFormat:e.defaultFormat},relative_date:{type:"string",value:o.value?e.journal.resolveRelativeDate(o.value):""},journal_name:{type:"string",value:e.journal.name},index:{type:"number",value:r.value?.index}})),l=g(()=>`${e.row.fontSize}em`),s=g(()=>e.row.bold?"bold":"normal"),i=g(()=>e.row.italic?"italic":"normal"),u=g(()=>wt(e.row.color)),c=g(()=>wt(e.row.background)),m=ve(),{journals:y,decorations:h}=Go(),j=g(()=>e.row.link==="none"?!1:e.row.link==="self"?!0:e.row.link==="journal"?!!e.row.journal:y[e.row.link].value.length>0),C=g(()=>j.value?"pointer":"default"),$=il(m,o,h[e.journal.type]);function F(R){e.row.link!=="none"&&(e.row.link==="journal"?n("navigate","journal",e.refDate,R,e.journal.name):n("navigate",e.row.link,e.refDate,R))}return(R,ne)=>o.value?(p(),k("div",{key:0,class:"row",onClick:qt(F,["prevent"])},[R.row.addDecorations?(p(),E(Ko,{key:0,styles:b($)},{default:f(()=>[_(I(a.value),1)]),_:1},8,["styles"])):(p(),k(W,{key:1},[_(I(a.value),1)],64))])):U("",!0)}}),$a=ye(uh,[["__scopeId","data-v-368447fb"]]),dh={key:0},ch={class:"nav-row-wrapper"},fh={class:"controls"},ph=B({__name:"NavigationBlockEditPreview",props:{refDate:{},journalName:{},rows:{}},emits:["move-up","move-down","edit","remove"],setup(e){const t=e,n=ve(),o=g(()=>n.getJournal(t.journalName)),r=g(()=>o.value?.shelfName??null);return zo(r),(a,l)=>o.value?(p(),k("div",dh,[l[0]||(l[0]=v("div",{class:"setting-item-description"},"Hover a row to see controls",-1)),(p(!0),k(W,null,Ce(a.rows,(s,i)=>(p(),k("div",{key:i,class:"nav-row"},[v("div",ch,[d($a,{journal:o.value,row:s,"ref-date":a.refDate,"default-format":o.value.dateFormat},null,8,["journal","row","ref-date","default-format"])]),v("div",fh,[i>0?(p(),E(ke,{key:0,icon:"arrow-up",tooltip:"Move up",onClick:u=>a.$emit("move-up",i)},null,8,["onClick"])):U("",!0),i<a.rows.length-1?(p(),E(ke,{key:1,icon:"arrow-down",tooltip:"Move down",onClick:u=>a.$emit("move-down",i)},null,8,["onClick"])):U("",!0),d(ke,{icon:"pencil",tooltip:"Edit",onClick:u=>a.$emit("edit",i)},null,8,["onClick"]),d(ke,{icon:"trash-2",tooltip:"Delete",onClick:u=>a.$emit("remove",i)},null,8,["onClick"])])]))),128))])):U("",!0)}}),ls=ye(ph,[["__scopeId","data-v-eca349a0"]]),mh={class:"u-pop"},vh=["value"],ar=B({__name:"EditNavBlockRow.modal",props:{row:{},currentJournal:{}},emits:["close","submit"],setup(e,{emit:t}){const n=t,o=ve(),r=g(()=>o.getJournal(e.currentJournal)),a=g(()=>r.value?.shelfName??null),{journals:l}=zo(a),s=g(()=>l.all.value.map(({name:H})=>H).filter(H=>H!==e.currentJournal)),{defineField:i,errorBag:u,handleSubmit:c}=Sn({initialValues:e.row?{template:e.row.template,fontSize:e.row.fontSize,bold:e.row.bold,italic:e.row.italic,link:e.row.link,journal:e.row.journal,color:Vt(e.row.color),background:Vt(e.row.background),addDecorations:e.row.addDecorations}:{template:"",fontSize:1,bold:!1,italic:!1,link:"none",journal:"",color:{type:"theme",name:"text-normal"},background:{type:"transparent"},addDecorations:!1},validationSchema:Vn(jt(Pt({template:jt(tt(),en("Template is required")),fontSize:nl(),bold:fn(),italic:fn(),color:es,background:es,link:Tt(["none","self","journal","day","week","month","quarter","year"]),journal:tt(),addDecorations:fn()}),Ur(qo([["link"],["journal"]],H=>H.link==="journal"?!!H.journal:!0,"Please select a journal."),["journal"])))}),[m,y]=i("template"),[h,j]=i("fontSize"),[C,$]=i("bold"),[F,R]=i("italic"),[ne,M]=i("color"),[A,ae]=i("background"),[de,oe]=i("link"),[he,Ve]=i("journal"),[Ee,gt]=i("addDecorations"),dt=g({get(){return ne.value??{type:"transparent"}},set(H){ne.value=H}}),Qe=g({get(){return A.value??{type:"transparent"}},set(H){A.value=H}}),Pe=g(()=>{if(!r.value)return"";const H=Ne().format(we),O=r.value.resolveAnchorDate(H),D=r.value?.dateFormat??we;return Nt(m.value??"",{date:{type:"date",value:H,defaultFormat:D},start_date:{type:"date",value:O?r.value.resolveStartDate(O):"",defaultFormat:D},end_date:{type:"date",value:O?r.value.resolveEndDate(O):"",defaultFormat:D},relative_date:{type:"string",value:O?r.value.resolveRelativeDate(O):""},journal_name:{type:"string",value:r.value?.name??""},index:{type:"number",value:r.value?.config.value.index.enabled?1:void 0}})}),z=g(()=>m.value?[...m.value.matchAll(/{{(.*?):(.*?)}}/gi)].some(([,,O])=>O.replaceAll(/\[.*?\]/gi,"").includes("W")):!1),ue=c(H=>{n("submit",H),n("close")});return(H,O)=>(p(),k("form",{onSubmit:O[10]||(O[10]=(...D)=>b(ue)&&b(ue)(...D))},[d(N,{name:"Row template"},{description:f(()=>[v("div",null,[r.value?(p(),E(pr,{key:0,type:r.value.type,"date-format":r.value.dateFormat},null,8,["type","date-format"])):U("",!0),O[11]||(O[11]=v("br",null,null,-1)),O[12]||(O[12]=_(" With resolved variables: ")),v("b",mh,I(Pe.value),1)]),z.value?(p(),E(eu,{key:0})):U("",!0),d(it,{errors:b(u).template},null,8,["errors"])]),default:f(()=>[d(He,xe({modelValue:b(m),"onUpdate:modelValue":O[0]||(O[0]=D=>ce(m)?m.value=D:null)},b(y)),null,16,["modelValue"])]),_:1}),d(N,{name:"Font size"},{description:f(()=>[d(it,{errors:b(u).fontSize},null,8,["errors"])]),default:f(()=>[d(pn,xe({modelValue:b(h),"onUpdate:modelValue":O[1]||(O[1]=D=>ce(h)?h.value=D:null)},b(j),{min:.5,step:.1}),null,16,["modelValue"])]),_:1}),d(N,{name:"Bold"},{default:f(()=>[d(Ge,xe({modelValue:b(C),"onUpdate:modelValue":O[2]||(O[2]=D=>ce(C)?C.value=D:null)},b($)),null,16,["modelValue"])]),_:1}),d(N,{name:"Italic"},{default:f(()=>[d(Ge,xe({modelValue:b(F),"onUpdate:modelValue":O[3]||(O[3]=D=>ce(F)?F.value=D:null)},b(R)),null,16,["modelValue"])]),_:1}),d(N,{name:"Text color"},{description:f(()=>[d(it,{errors:b(u).color},null,8,["errors"])]),default:f(()=>[d(Ft,xe({modelValue:dt.value,"onUpdate:modelValue":O[4]||(O[4]=D=>dt.value=D)},b(M)),null,16,["modelValue"])]),_:1}),d(N,{name:"Background color"},{default:f(()=>[d(Ft,xe({modelValue:Qe.value,"onUpdate:modelValue":O[5]||(O[5]=D=>Qe.value=D)},b(ae)),null,16,["modelValue"])]),_:1}),d(N,{name:"Link"},{default:f(()=>[d(Se,xe({modelValue:b(de),"onUpdate:modelValue":O[6]||(O[6]=D=>ce(de)?de.value=D:null)},b(oe)),{default:f(()=>O[13]||(O[13]=[v("option",{value:"none"},"None",-1),v("option",{value:"self"},"Self",-1),v("option",{value:"journal"},"Journal",-1),v("option",{value:"day"},"Day",-1),v("option",{value:"week"},"Week",-1),v("option",{value:"month"},"Month",-1),v("option",{value:"quarter"},"Quarter",-1),v("option",{value:"year"},"Year",-1)])),_:1},16,["modelValue"])]),_:1}),b(de)==="journal"?(p(),E(N,{key:0,name:"Journal"},{description:f(()=>[d(it,{errors:b(u).journal},null,8,["errors"])]),default:f(()=>[d(Se,xe({modelValue:b(he),"onUpdate:modelValue":O[7]||(O[7]=D=>ce(he)?he.value=D:null)},b(Ve)),{default:f(()=>[(p(!0),k(W,null,Ce(s.value,D=>(p(),k("option",{key:D,value:D},I(D),9,vh))),128))]),_:1},16,["modelValue"])]),_:1})):U("",!0),d(N,{name:"Add decorations"},{default:f(()=>[d(Ge,xe({modelValue:b(Ee),"onUpdate:modelValue":O[8]||(O[8]=D=>ce(Ee)?Ee.value=D:null)},b(gt)),null,16,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(se,{onClick:O[9]||(O[9]=D=>H.$emit("close"))},{default:f(()=>O[14]||(O[14]=[_("Cancel")])),_:1}),d(se,{cta:"",type:"submit"},{default:f(()=>O[15]||(O[15]=[_("Save")])),_:1})]),_:1})],32))}}),hh=["value"],gh=B({__name:"JournalShelf.modal",props:{currentShelf:{}},emits:["close","save"],setup(e,{emit:t}){const n=t,o=ve(),r=ie(e.currentShelf);function a(){r.value!==e.currentShelf&&n("save",r.value),n("close")}return(l,s)=>(p(),k(W,null,[d(N,{name:"Shelf"},{default:f(()=>[d(Se,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=i=>r.value=i)},{default:f(()=>[s[2]||(s[2]=v("option",{value:""},"Not on a shelf",-1)),(p(!0),k(W,null,Ce(b(o).shelves,i=>(p(),k("option",{key:i.name,value:i.name},I(i.name),9,hh))),128))]),_:1},8,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(se,{onClick:s[1]||(s[1]=i=>l.$emit("close"))},{default:f(()=>s[3]||(s[3]=[_("Cancel")])),_:1}),d(se,{cta:"",onClick:a},{default:f(()=>s[4]||(s[4]=[_("Save")])),_:1})]),_:1})],64))}}),yh={class:"u-pop"},bh=B({__name:"PathPreview",props:{journalName:{}},setup(e){const t=ve(),n=g(()=>t.getJournal(e.journalName)),o=g(()=>({journal:e.journalName,date:Ne().format("YYYY-MM-DD")})),r=g(()=>n.value?n.value.getConfiguredPathData(o.value)[0]:"");return(a,l)=>(p(),k("div",null,[l[0]||(l[0]=_(" Folder with resolved variables: ")),v("b",yh,I(r.value),1)]))}}),wh=B({__name:"DisplayCodeBlock",props:{name:{}},setup(e){async function t(n){const o=n.target.innerText;if(o)try{await navigator.clipboard.writeText(o),new te.Notice("Copied to clipboard")}catch(r){console.error(r)}}return(n,o)=>(p(),k("div",{class:"code-block-sample",onClick:t},[_(" ```"+I(n.name),1),o[1]||(o[1]=v("br",null,null,-1)),n.$slots.default?(p(),k(W,{key:0},[ze(n.$slots,"default",{},void 0,!0),o[0]||(o[0]=v("br",null,null,-1))],64)):U("",!0),o[2]||(o[2]=_("``` "))]))}}),ho=ye(wh,[["__scopeId","data-v-2c805b7f"]]);function Wr(e){const t=Qt(e),n=ve();return g(()=>{const o=t.value;return o?n.index.getForPathComputed(o).value:null})}class kh extends te.SuggestModal{constructor(t,n,o){super(t),this.journals=n,this.callback=o}getSuggestions(t){return t=t.toLocaleLowerCase(),this.journals.filter(n=>n.toLocaleLowerCase().contains(t))}renderSuggestion(t,n){n.setText(t)}onChooseSuggestion(t){this.callback(t)}}async function Eo(e,t,n,o=!1,r,a){const l=n.filter(s=>{const i=e.getJournal(s);if(!i)return!1;const u=i.get(t);return!(!u||o&&!("path"in u))});if(l.length!==0){if(l.length===1){const[s]=l;await zn(e,t,s,r);return}if(a){const s=new te.Menu;for(const i of l)s.addItem(u=>{u.setTitle(i).onClick(()=>{zn(e,t,i,r).catch(console.error)})});s.showAtMouseEvent(a)}else new kh(e.app,l,s=>{zn(e,t,s,r).catch(console.error)}).open()}}async function zn(e,t,n,o){const r=e.getJournal(n);if(!r)return;const a=r.get(t);a&&await r.open(a,o)}function Po(e){return te.Keymap.isModifier(e,"Mod")||e.button===1?"tab":"active"}const _h={key:0,class:"nav-block"},Ch=B({__name:"NavigationBlock",props:{refDate:{},journalName:{},rows:{},preventNavigation:{type:Boolean},decorateBlock:{type:Boolean}},emits:["move-up","move-down","edit","remove"],setup(e){const t=ve(),n=g(()=>t.getJournal(e.journalName)),o=g(()=>n.value?.shelfName??null),{journals:r,decorations:a}=zo(o),l=g(()=>n.value?a[n.value.type].value.filter(u=>u.journalName===e.journalName):[]),s=il(t,e.refDate,l);async function i(u,c,m,y){if(!e.preventNavigation&&u!=="none")if(u==="self"){const h=n.value?.get(e.refDate);h&&await n.value?.open(h)}else if(u==="journal"){if(!y)return;await zn(t,c,y)}else{const h=r[u].value.map(j=>j.name);await Eo(t,c,h,!1,m&&Po(m),m)}}return(u,c)=>n.value?(p(),k("div",_h,[u.decorateBlock?(p(),E(Ko,{key:0,styles:b(s),class:"nav-block"},{default:f(()=>[(p(!0),k(W,null,Ce(u.rows,(m,y)=>(p(),k("div",{key:y},[d($a,{journal:n.value,row:m,"ref-date":u.refDate,"default-format":n.value.dateFormat,onNavigate:i},null,8,["journal","row","ref-date","default-format"])]))),128))]),_:1},8,["styles"])):(p(!0),k(W,{key:1},Ce(u.rows,(m,y)=>(p(),k("div",{key:y},[d($a,{journal:n.value,row:m,"ref-date":u.refDate,"default-format":n.value.dateFormat,onNavigate:i},null,8,["journal","row","ref-date","default-format"])]))),128))])):U("",!0)}}),mr=ye(Ch,[["__scopeId","data-v-438f0e09"]]),Dh={key:0,class:"nav-view"},Sh={key:0,class:"nav-block-relative"},Vh={key:1,class:"nav-block-relative"},xh={key:2,class:"nav-block-relative"},jh={key:3,class:"nav-block-relative"},$h={key:1},Nh=B({__name:"NavigationCodeBlock",props:{path:{},preventNavigation:{type:Boolean}},setup(e){const t=e,n=ve(),o=Wr(t.path),r=g(()=>o.value?n.getJournal(o.value.journal):null),a=g(()=>{if(!o.value||!r.value)return null;const i=r.value.navBlock.type==="existing";return r.value.next(o.value.date,i)}),l=g(()=>{if(!o.value||!r.value)return null;const i=r.value.navBlock.type==="existing";return r.value.previous(o.value.date,i)});function s(i){t.preventNavigation||zn(n,i.date,i.journal).catch(console.error)}return(i,u)=>b(o)&&r.value?(p(),k("div",Dh,[l.value?(p(),k("div",Sh,[d(mr,{rows:r.value.navBlock.rows,"ref-date":l.value.date,"journal-name":b(o).journal,"prevent-navigation":i.preventNavigation,"decorate-block":r.value.navBlock.decorateWholeBlock},null,8,["rows","ref-date","journal-name","prevent-navigation","decorate-block"]),d(ke,{icon:"arrow-left",class:"nav-prev",onClick:u[0]||(u[0]=c=>s(l.value))})])):(p(),k("div",Vh)),d(mr,{rows:r.value.navBlock.rows,class:"nav-block","ref-date":b(o).date,"journal-name":b(o).journal,"prevent-navigation":i.preventNavigation,"decorate-block":r.value.navBlock.decorateWholeBlock},null,8,["rows","ref-date","journal-name","prevent-navigation","decorate-block"]),a.value?(p(),k("div",xh,[d(ke,{icon:"arrow-right",class:"nav-next",onClick:u[1]||(u[1]=c=>s(a.value))}),d(mr,{rows:r.value.navBlock.rows,"ref-date":a.value.date,"journal-name":b(o).journal,"prevent-navigation":i.preventNavigation,"decorate-block":r.value.navBlock.decorateWholeBlock},null,8,["rows","ref-date","journal-name","prevent-navigation","decorate-block"])])):(p(),k("div",jh))])):(p(),k("div",$h,"Note is not connected to a journal"))}}),cu=ye(Nh,[["__scopeId","data-v-3fb7392e"]]),fu=["week","month","quarter","calendar"];function Mh(e){const t=ie([]),n=ve();return oo(()=>{const o=Q(e.value);if(!o.isValid())return;const r=Ne(),a=o.clone().startOf("week"),l=o.clone().endOf("week"),s=n.calendarViewSettings.weeks||"left",i=[];s==="left"&&i.push({date:a.format("[W]w"),key:a.format(we),outside:!1,isWeekNumber:!0,disabled:!1});const u=a.clone();for(;u.isSameOrBefore(l);)i.push({date:u.format("D"),key:u.format(we),today:u.isSame(r,"day"),outside:!o.isSame(u,"month"),isWeekNumber:!1,disabled:!1}),u.add(1,"day");s==="right"&&i.push({date:a.format("[W]w"),key:a.format(we),outside:!1,isWeekNumber:!0,disabled:!1}),t.value=i}),{grid:t}}function Jr(e){return g(()=>e.activeNote?e.index.getForPathComputed(e.activeNote).value:null)}const Ah=B({__name:"NotesCalendarButton",props:{date:{},type:{},inactive:{type:Boolean}},setup(e){const t=ve(),{journals:n,decorations:o}=Go(),r=g(()=>!e.inactive&&n[e.type].value.length>0),a=g(()=>ji[e.type]),l=g(()=>e.date),s=il(t,l,o[e.type]);function i(m){r.value&&Eo(t,e.date,n[e.type].value.map(y=>y.name),!1,Po(m),m).catch(console.error)}function u(m){const y=[];for(const h of n[e.type].value){const j=h.get(e.date);j&&"path"in j&&y.push(j)}if(y.length!==0)if(y.length===1)c(y[0].path,m);else{const h=new te.Menu;for(const j of y)h.addItem(C=>{C.setTitle(j.path).onClick(()=>{c(j.path,m)})});h.showAtMouseEvent(m)}}function c(m,y){const h=t.app.vault.getAbstractFileByPath(m);if(h){const j=new te.Menu;t.app.workspace.trigger("file-menu",j,h,"file-explorer-context-menu",null),j.addItem(C=>C.setTitle("Delete").setIcon("trash").onClick(()=>{t.app.fileManager.promptForFileDeletion(h)})),j.showAtMouseEvent(y)}}return(m,y)=>(p(),E(Ho,{class:"calendar-button",clickable:r.value,onClick:i,onContextmenu:u},{default:f(()=>[m.inactive?U("",!0):(p(),E(Ko,{key:0,styles:b(s)},{default:f(()=>[d(eo,{date:m.date,format:a.value},null,8,["date","format"])]),_:1},8,["styles"]))]),_:1},8,["clickable"]))}}),Yt=ye(Ah,[["__scopeId","data-v-f87d1f12"]]),Oh=B({__name:"NotesWeekView",props:{refDate:{}},setup(e){const t=ve(),n=g(()=>t.calendarViewSettings.weeks==="none"?7:8),{journals:o}=Go(),r=g(()=>o.quarter.value.length>0),{grid:a}=Mh(g(()=>e.refDate)),l=g(()=>Q(e.refDate).startOf("month").format(we)),s=g(()=>Q(e.refDate).startOf("quarter").format(we)),i=g(()=>Q(e.refDate).startOf("year").format(we)),u=Jr(t),c=g(()=>u.value?t.getJournal(u.value.journal):null),m=g(()=>c.value?.type==="day"),y=g(()=>c.value?.type==="week"),h=g(()=>c.value?.type==="month"&&u.value?.date===l.value),j=g(()=>c.value?.type==="quarter"&&u.value?.date===s.value),C=g(()=>c.value?.type==="year"&&u.value?.date===i.value);return($,F)=>(p(),E(ao,{columns:n.value},{header:f(()=>[ze($.$slots,"header",{},()=>[d(Yt,{date:$.refDate,type:"month","data-selected":h.value?"":null},null,8,["date","data-selected"]),r.value?(p(),E(Yt,{key:0,date:$.refDate,type:"quarter","data-selected":j.value?"":null},null,8,["date","data-selected"])):U("",!0),d(Yt,{date:$.refDate,type:"year","data-selected":C.value?"":null},null,8,["date","data-selected"])],!0)]),default:f(()=>[d(ol),(p(!0),k(W,null,Ce(b(a),R=>(p(),E(Yt,{key:R.key+(R.isWeekNumber?"week":"day"),class:kt({"week-number":R.isWeekNumber}),date:R.key,type:R.isWeekNumber?"week":"day","data-outside":R.outside||null,"data-today":R.today||null,"data-selected":b(u)&&(R.isWeekNumber&&y.value||!R.isWeekNumber&&m.value)&&b(u)?.date===R.key?"":null},null,8,["class","date","type","data-outside","data-today","data-selected"]))),128))]),_:3},8,["columns"]))}}),Th=ye(Oh,[["__scopeId","data-v-307b41ae"]]),Fh={class:"timeline-week"},Eh=B({__name:"TimelineWeek",props:{noteData:{}},setup(e){const t=e,n=g(()=>t.noteData?t.noteData.date:Ne().format("YYYY-MM-DD"));return(o,r)=>(p(),k("div",Fh,[d(Th,{"ref-date":n.value},null,8,["ref-date"])]))}}),Ph=ye(Eh,[["__scopeId","data-v-1d4774b6"]]),Ih=B({__name:"NotesMonthView",props:{refDate:{},hideOutsideDates:{type:Boolean}},emits:["select","selectWeek"],setup(e){const t=ve(),n=g(()=>t.calendarViewSettings.weeks==="none"?7:8),{journals:o}=Go(),r=g(()=>o.quarter.value.length>0),{grid:a}=Ji(g(()=>e.refDate)),l=g(()=>Q(e.refDate).startOf("month").format(we)),s=g(()=>Q(e.refDate).startOf("quarter").format(we)),i=g(()=>Q(e.refDate).startOf("year").format(we)),u=Jr(t),c=g(()=>u.value?t.getJournal(u.value.journal):null),m=g(()=>c.value?.type==="day"),y=g(()=>c.value?.type==="week"),h=g(()=>c.value?.type==="month"&&u.value?.date===l.value),j=g(()=>c.value?.type==="quarter"&&u.value?.date===s.value),C=g(()=>c.value?.type==="year"&&u.value?.date===i.value);return($,F)=>(p(),E(ao,{class:"month-grid",columns:n.value,"compact-first-line":""},{header:f(()=>[ze($.$slots,"header",{},()=>[d(Yt,{date:$.refDate,type:"month","data-selected":h.value?"":null},null,8,["date","data-selected"]),r.value?(p(),E(Yt,{key:0,date:$.refDate,type:"quarter","data-selected":j.value?"":null},null,8,["date","data-selected"])):U("",!0),d(Yt,{date:$.refDate,type:"year","data-selected":C.value?"":null},null,8,["date","data-selected"])],!0)]),default:f(()=>[d(ol),(p(!0),k(W,null,Ce(b(a),R=>(p(),E(Yt,{key:R.key+(R.isWeekNumber?"week":"day"),class:kt({"week-number":R.isWeekNumber}),date:R.key,type:R.isWeekNumber?"week":"day","data-outside":R.outside||null,"data-today":R.today||null,inactive:$.hideOutsideDates&&R.outside,"data-selected":b(u)&&(R.isWeekNumber&&y.value||!R.isWeekNumber&&m.value)&&b(u)?.date===R.key?"":null},null,8,["class","date","type","data-outside","data-today","inactive","data-selected"]))),128))]),_:3},8,["columns"]))}}),qr=ye(Ih,[["__scopeId","data-v-34fdf9ce"]]),Bh={class:"timeline-month"},Rh=B({__name:"TimelineMonth",props:{noteData:{}},setup(e){const t=g(()=>e.noteData?e.noteData.date:Ne().format("YYYY-MM-DD"));return(n,o)=>(p(),k("div",Bh,[d(qr,{"ref-date":t.value},null,8,["ref-date"])]))}}),Yh=ye(Rh,[["__scopeId","data-v-889faf70"]]),Uh={class:"timeline-quarter-container"},Lh={class:"timeline-quarter"},Wh=B({__name:"TimelineQuarter",props:{noteData:{}},setup(e){const t=e,n=g(()=>t.noteData?t.noteData.date:Ne().format("YYYY-MM-DD")),o=g(()=>Q(n.value)),r=g(()=>{const a=o.value.clone().startOf("quarter");return[a.clone(),a.clone().add(1,"month"),a.clone().add(2,"month")]});return(a,l)=>(p(),k("div",Uh,[v("div",Lh,[(p(!0),k(W,null,Ce(r.value,s=>(p(),E(qr,{key:s.format("YYYY-MM-DD"),"ref-date":s.format("YYYY-MM-DD"),"hide-outside-dates":""},null,8,["ref-date"]))),128))])]))}}),Jh=ye(Wh,[["__scopeId","data-v-d9d5c81f"]]),qh={class:"timeline-calendar-container"},Hh={class:"timeline-calendar"},Kh=B({__name:"TimelineCalendar",props:{noteData:{}},setup(e){const t=e,n=g(()=>t.noteData?t.noteData.date:Ne().format("YYYY-MM-DD")),o=g(()=>Q(n.value)),r=g(()=>{const a=o.value.clone().startOf("year");return Array.from({length:12}).map((l,s)=>a.clone().add(s,"month"))});return(a,l)=>(p(),k("div",qh,[v("div",Hh,[(p(!0),k(W,null,Ce(r.value,s=>(p(),E(qr,{key:s.format("YYYY-MM-DD"),"ref-date":s.format("YYYY-MM-DD"),"hide-outside-dates":""},null,8,["ref-date"]))),128))])]))}}),zh=ye(Kh,[["__scopeId","data-v-b317befd"]]),Gh={key:1},pu=B({__name:"TimelineCodeBlock",props:{mode:{},path:{}},setup(e){const t=e,n=ve(),o=Wr(t.path),r=g(()=>o.value?n.getJournal(o.value.journal):null),a=g(()=>r.value?.shelfName??null);zo(a);const l=g(()=>{if(t.mode&&fu.includes(t.mode))return t.mode;if(r.value)switch(r.value.type){case"day":case"week":return"week";case"month":return"month";case"quarter":return"quarter";case"year":return"calendar"}return"week"}),s=g(()=>{switch(l.value){case"week":return Ph;case"month":return Yh;case"quarter":return Jh;case"calendar":return zh}return null});return(i,u)=>(p(),k("div",null,[s.value?(p(),E(Yo(s.value),{key:0,"note-data":b(o)},null,8,["note-data"])):(p(),k("div",Gh,"No component"))]))}}),Qh={class:"home-code-block"},Xh={key:0},Zh=["onClick"],eg=B({__name:"HomeCodeBlock",props:{path:{},config:{}},setup(e){Cn(u=>({"8c1763ac":t.value}));const t=g(()=>e.config.scale??1),n=Wr(e.path),o=ve(),r=g(()=>n.value?o.getJournal(n.value.journal):null),a=g(()=>e.config.shelf||r.value?.shelfName),l=g(()=>o.journals),s=g(()=>{const u=[],c=Ne().format(we);for(const m of e.config.show){const y=l.value.filter(h=>h.type===m&&(!a.value||h.shelfName===a.value));if(y.length!==0)if(m==="custom")for(const h of y)u.push({type:m,text:h.getNoteNameForDate(c),journalNames:[h.name]});else u.push({type:m,text:Di(m,Ne().format("YYYY-MM-DD")),journalNames:y.map(h=>h.name)})}return u});function i(u,c,m){const y=Ne().format("YYYY-MM-DD");u!=="custom"&&u===r.value?.type?Eo(o,y,[r.value.name],!1,Po(m),m).catch(console.error):Eo(o,y,c,!1,Po(m),m).catch(console.error)}return(u,c)=>(p(),k("div",Qh,[(p(!0),k(W,null,Ce(s.value,(m,y)=>(p(),k(W,{key:m.text},[y>0?(p(),k("span",Xh,I(u.config.separator),1)):U("",!0),v("a",{href:"#",onClick:qt(h=>i(m.type,m.journalNames,h),["stop","prevent"])},I(m.text),9,Zh)],64))),128))]))}}),Na=ye(eg,[["__scopeId","data-v-db98ec2a"]]),tg={},ng={class:"journal-divider"};function og(e,t){return p(),k("div",ng)}const Kt=ye(tg,[["render",og],["__scopeId","data-v-f48008b5"]]);function rg(e){const t=ve(),n=`@fake@/${Date.now()}-${Math.random()}`,o=Qt(e),r=g(()=>t.getJournal(o.value)),a=Ne().format("YYYY-MM-DD");return t.index.registerPathData(n,{path:n,title:"Fake Note",journal:o.value,date:r.value?.resolveAnchorDate(a)??a,tags:[],properties:{},tasks:[]}),Tr(()=>{t.index.unregisterPathData(n)}),n}const ag=`show: 
  - day 
  - month
scale: 2
separator: " | "`,lg=B({__name:"CodeBlockReference.modal",props:{type:{},journalName:{}},setup(e){const t=rg(e.journalName);return(n,o)=>(p(),k("div",null,[o[3]||(o[3]=v("p",{class:"hint"},"Click on a code block to copy it to your clipboard.",-1)),d(ho,{name:"journal-nav"}),o[4]||(o[4]=v("p",null,"Navigation code block helps navigating relative to current note.",-1)),v("p",null,[o[0]||(o[0]=_(" It is fully customizable on journal level.")),o[1]||(o[1]=v("br",null,null,-1)),_(" Current configuration for "+I(n.journalName)+" journal looks like this: ",1)]),d(Kt),d(cu,{path:b(t)},null,8,["path"]),d(Kt),o[5]||(o[5]=v("p",null,[_(" Plugin still supports older code blocks "),v("code",null,"calendar-nav"),_(" and "),v("code",null,"journal-nav"),_(" that function just as aliases to "),v("code",null,"journal-nav"),_(". ")],-1)),d(Kt),d(ho,{name:"calendar-timeline"}),o[6]||(o[6]=v("p",null,"Timeline code block helps navigating within bigger time periods.",-1)),v("p",null,"Default timeline for "+I(n.journalName)+" journal looks like this:",1),d(Kt),d(pu,{path:b(t)},null,8,["path"]),d(Kt),o[7]||(o[7]=v("p",null,"You can change default timeline mode by adding mode prop to code block.",-1)),d(ho,{name:"calendar-timeline"},{default:f(()=>o[2]||(o[2]=[_("mode: month")])),_:1}),o[8]||(o[8]=v("p",null,"Supported modes are:",-1)),v("ul",null,[(p(!0),k(W,null,Ce(b(fu),r=>(p(),k("li",{key:r},I(r),1))),128))]),d(Kt),d(ho,{name:"journals-home"}),o[9]||(o[9]=v("p",null,"Home block displays links to current notes in journals.",-1)),o[10]||(o[10]=v("p",null,"It looks like this by default:",-1)),d(Kt),d(Na,{path:b(t),config:{show:["day"],separator:"  ",scale:1}},null,8,["path"]),d(Kt),o[11]||(o[11]=pi("<p data-v-30e980f3>Supported settings:</p><ul data-v-30e980f3><li data-v-30e980f3><code data-v-30e980f3>show</code> - controls what journals are displayed (by default only Today link is displayed). Supported values are - <code data-v-30e980f3>day</code>, <code data-v-30e980f3>week</code>, <code data-v-30e980f3>month</code>, <code data-v-30e980f3>quarter</code>, <code data-v-30e980f3>year</code>, <code data-v-30e980f3>custom</code>. </li><li data-v-30e980f3><code data-v-30e980f3>separator</code> - used to separate multiple links. Default - <code data-v-30e980f3>  </code>.</li><li data-v-30e980f3><code data-v-30e980f3>scale</code> - allows to increase size of links. Used as multiplier of text size - so to have links twice as large use <code data-v-30e980f3>scale: 2</code>. </li><li data-v-30e980f3><code data-v-30e980f3>shelf</code> - allows to limit journal displayed in block to some specific shelf.</li></ul>",2)),d(Kt),d(ho,{name:"journals-home"},{default:f(()=>[_(I(ag))]),_:1}),d(Kt),d(Na,{path:b(t),config:{show:["day","month"],separator:" | ",scale:2}},null,8,["path"])]))}}),sg=ye(lg,[["__scopeId","data-v-30e980f3"]]),ig=B({__name:"CodeBlockReferenceHint",props:{type:{},journalName:{}},setup(e){const t=ve();function n(){new Fe(t,"Supported code blocks",sg,{type:e.type,journalName:e.journalName},780).open()}return(o,r)=>(p(),k("a",{href:"#",onClick:qt(n,["prevent"])},"Supported code blocks."))}}),ug={class:"path-hint"},dg={class:"u-pop"},cg=B({__name:"TemplatePathPreview",props:{path:{},journalName:{}},setup(e){const t=ve(),n=g(()=>t.getJournal(e.journalName)),o=g(()=>({journal:e.journalName,date:Ne().format("YYYY-MM-DD")})),r=g(()=>n.value?n.value.getResolvedTemplatePath(e.path,o.value):"");return(a,l)=>(p(),k("div",ug,[l[0]||(l[0]=_(" Template path with resolved variables: ")),v("b",dg,I(r.value),1)]))}}),fg=ye(cg,[["__scopeId","data-v-baa25805"]]);class pg extends te.AbstractInputSuggest{constructor(t,n){super(t,n),this.textInputElement=n}getSuggestions(t){const n=t.toLocaleLowerCase();return n?this.app.vault.getAllLoadedFiles().filter(r=>r instanceof te.TFolder?!1:r.path.toLocaleLowerCase().includes(n)):[]}renderSuggestion(t,n){n.setText(t.path)}selectSuggestion(t){this.textInputElement.value=t.path,this.textInputElement.trigger("input"),this.close()}}const mg=["placeholder","disabled"],vg=B({__name:"TemplateInput",props:It({placeholder:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Bt(e,"modelValue"),n=ie(),o=sl();let r;return _t(()=>{n.value&&(r=new pg(o,n.value))}),qa(()=>{r&&r.close()}),(a,l)=>Tn((p(),k("input",{ref_key:"element",ref:n,"onUpdate:modelValue":l[0]||(l[0]=s=>t.value=s),type:"text",placeholder:a.placeholder,disabled:a.disabled,spellcheck:"false"},null,8,mg)),[[Lo,t.value]])}}),hg=B({__name:"EditFrontmatterFieldName",props:{journalName:{},fieldName:{}},emits:["close"],setup(e,{emit:t}){const n=t,{defineField:o,errorBag:r,handleSubmit:a}=Sn({initialValues:{name:""},validationSchema:Vn(Pt({name:jt(tt(),en("Property name is required"))}))}),[l,s]=o("name"),i=ve(),u=g(()=>i.getJournal(e.journalName)),c=g(()=>u.value?.config.value.frontmatter[e.fieldName]||im[e.fieldName]),m=a(async y=>{u.value&&(await u.value.renameFrontmatterField(e.fieldName,c.value,y.name),n("close"))});return _t(()=>{l.value=c.value}),(y,h)=>(p(),k("form",{onSubmit:h[2]||(h[2]=qt((...j)=>b(m)&&b(m)(...j),["prevent"]))},[d(N,{name:"Current name"},{default:f(()=>[_(I(c.value),1)]),_:1}),d(N,{name:"New name"},{description:f(()=>[d(it,{errors:b(r).name},null,8,["errors"])]),default:f(()=>[d(He,xe({modelValue:b(l),"onUpdate:modelValue":h[0]||(h[0]=j=>ce(l)?l.value=j:null)},b(s)),null,16,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(se,{onClick:h[1]||(h[1]=j=>y.$emit("close"))},{default:f(()=>h[3]||(h[3]=[_("Cancel")])),_:1}),d(se,{cta:"",type:"submit"},{default:f(()=>h[4]||(h[4]=[_("Update")])),_:1})]),_:1})],32))}}),gg=B({__name:"TemplaterSupport.modal",emits:["close"],setup(e){return(t,n)=>(p(),k("div",null,n[0]||(n[0]=[pi("<p> There can be cases when Templater is interfering with plugin actions resulting in partially broken note or journal related data removed from frontmatter. </p><p>The best setup to avoid such problems would be:</p><ul><li>template configured in journal plugin settings</li><li><code>Trigger Templater on new file creation</code> is disabled</li><li> OR <code>Trigger Templater on new file creation</code> is enabled, <code>Enable Folder Templates</code> is enabled, <b>NO</b> Folder template is configured </li></ul><p> This ensures that only journal plugin is processing note template thus avoiding conflicts with templater plugin (journal plugin will use templater itself under the hood to process templater commands). </p>",4)])))}}),yg=B({__name:"TemplaterSupportHint",setup(e){const t=ve(),n=uu(t.app,"<% $>");function o(){new Fe(t,"Templater caveats",gg,{}).open()}return(r,a)=>b(n)?(p(),k(W,{key:0},[a[0]||(a[0]=v("br",null,null,-1)),a[1]||(a[1]=_("Templater syntax is ")),v("a",{href:"#",onClick:qt(o,["stop"])},"supported"),a[2]||(a[2]=_(". "))],64)):U("",!0)}}),bg={key:0},wg={key:0,class:"journal-important"},kg={key:1,class:"journal-important"},_g={key:0},Cg={key:0},Dg={key:1},Sg=["aria-label"],Vg={key:0},xg={key:0},jg={key:0,class:"journal-important"},$g={class:"flair"},Ng={class:"flair"},Mg={class:"flair"},Ag={class:"decoration-preview-container"},Og={class:"decoration-preview-block"},Tg={key:0},ss=800,Fg=B({__name:"JournalSettingsEdit",props:{journalName:{}},emits:["back","edit"],setup(e,{emit:t}){const n=t,o=ve(),r=g(()=>o.getJournal(e.journalName)),a=g(()=>r.value?.config.value),l=Ne().day(),s=Ne().format("YYYY-MM-DD"),i=An({templates:!1,commands:!1,decorations:!1,navBlock:!1,calendarViewBlock:!1,frontmatter:!1}),u=g(()=>r.value?Gp(r.value.config.value.write):""),c=g(()=>r.value?.config.value.dateFormat.includes("/"));function m(){if(!r.value)return;const O=r.value.config.value.dateFormat.split("/");r.value.config.value.dateFormat=O.pop()??"";const D=O.map(Be=>`{{date:${Be}}}`).join("/");let K=r.value.config.value.folder;K&&!K.endsWith("/")&&(K+="/"),K+=D,r.value.config.value.folder=K}function y(){r.value&&new Fe(o,"Rename journal",Hv,{name:r.value.name,async onSave(O){r.value&&(await o.renameJournal(r.value.name,O),n("edit",O))}}).open()}function h(){r.value&&new Fe(o,"Place journal",gh,{currentShelf:r.value.shelfName,onSave(O){o.moveJournal(e.journalName,O)}}).open()}function j(){a.value?.templates.push(""),i.templates||(i.templates=!0)}function C(){r.value&&new Fe(o,"Add command",ns,{index:r.value.commands.length,writeType:r.value.type,commands:r.value.commands,onSubmit:O=>{r.value&&(r.value.addCommand(O),i.commands||(i.commands=!0))}}).open()}function $(O,D){r.value&&new Fe(o,"Edit command",ns,{index:D,writeType:r.value.type,command:O,commands:r.value.commands,onSubmit:K=>{r.value&&r.value.updateCommand(D,K)}}).open()}function F(O){r.value&&r.value.deleteCommand(O)}function R(){r.value&&new Fe(o,"Add calendar decoration",rs,{index:r.value.decorations.length,writeType:r.value.type,onSubmit:O=>{r.value&&(r.value.addDecoration(O),i.decorations||(i.decorations=!0))}},ss).open()}function ne(O,D){r.value&&new Fe(o,"Add calendar decoration",rs,{index:r.value.decorations.length,writeType:r.value.type,decoration:O,onSubmit:K=>{r.value&&r.value.editDecoration(D,K)}},ss).open()}function M(O){r.value&&r.value.deleteDecoration(O)}function A(){r.value&&new Fe(o,"Add row to nav block",ar,{currentJournal:r.value.name,onSubmit:O=>{r.value&&(r.value.addNavRow(O),i.navBlock||(i.navBlock=!0))}}).open()}function ae(O){r.value&&new Fe(o,"Edit nav block row",ar,{currentJournal:e.journalName,row:r.value.navBlock.rows[O],onSubmit:D=>{r.value&&r.value.editNavRow(O,D)}}).open()}function de(O){r.value&&r.value.deleteNavRow(O)}function oe(O){r.value&&r.value.moveNavRowUp(O)}function he(O){r.value&&r.value.moveNavRowDown(O)}function Ve(){r.value&&new Fe(o,"Add row to calendar view block",ar,{currentJournal:r.value.name,onSubmit:O=>{r.value&&(r.value.addCalendarViewRow(O),i.calendarViewBlock||(i.calendarViewBlock=!0))}}).open()}function Ee(O){r.value&&new Fe(o,"Edit calendar view block row",ar,{currentJournal:e.journalName,row:r.value.calendarViewBlock.rows[O],onSubmit:D=>{r.value&&r.value.editCalendarViewRow(O,D)}}).open()}function gt(O){r.value&&r.value.deleteCalendarViewRow(O)}function dt(O){r.value&&r.value.moveNavRowUp(O)}function Qe(O){r.value&&r.value.moveNavRowDown(O)}function Pe(O){r.value&&new Fe(o,"Edit frontmatter field",hg,{journalName:r.value.name,fieldName:O}).open()}async function z(){r.value&&await r.value.toggleFrontmatterStartDate()}async function ue(){r.value&&await r.value.toggleFrontmatterEndDate()}async function H(O){O&&await r.value?.autoCreate()}return ut(()=>r.value?.config.value.start,O=>{r.value&&O&&(r.value.config.value.index.anchorDate=O)}),ut(()=>r.value?.config.value.end.type,()=>{r.value?.config.value.end.type==="repeats"&&!r.value.config.value.end.repeats&&(r.value.config.value.end.repeats=1)}),(O,D)=>r.value&&a.value?(p(),k("div",bg,[d(N,{heading:""},{name:f(()=>[_(" Configuring "+I(r.value.name)+" (writing "+I(u.value)+") ",1)]),default:f(()=>[d(ke,{icon:"pencil",tooltip:"Rename journal",onClick:y}),d(ke,{icon:"chevron-left",tooltip:"Back to list",onClick:D[0]||(D[0]=K=>O.$emit("back"))})]),_:1}),b(o).usesShelves?(p(),E(N,{key:0,name:"Shelf"},{default:f(()=>[_(I(r.value.shelfName||"Not on a shelf")+" ",1),d(ke,{icon:"pencil",tooltip:"Change shelf",onClick:h})]),_:1})):U("",!0),d(N,{name:"Start writing on"},{description:f(()=>[D[30]||(D[30]=_(" New notes prior to this date won't be created. ")),a.value.end.type==="repeats"&&!a.value.start?(p(),k("div",wg," Start date should be defined for journal that ends after some number of repeats. ")):U("",!0),a.value.write.type==="custom"?(p(),k("div",kg," Start date for custom intervals cannot be changes as it is used to calculate interval ")):U("",!0)]),default:f(()=>[a.value.write.type==="custom"?(p(),k("span",_g,I(a.value.write.anchorDate),1)):(p(),E(jo,{key:1,modelValue:a.value.start,"onUpdate:modelValue":D[1]||(D[1]=K=>a.value.start=K)},null,8,["modelValue"])),a.value.start&&a.value.write.type!=="custom"?(p(),E(ke,{key:2,icon:"trash",tooltip:"Clear start date",onClick:D[2]||(D[2]=K=>a.value.start="")})):U("",!0)]),_:1}),d(N,{name:"End writing"},{description:f(()=>[a.value.end.type==="repeats"?(p(),k("div",Cg,"After creating this many notes, new notes won't be created.")):U("",!0),a.value.end.type==="date"?(p(),k("div",Dg,"New notes after this date won't be created.")):U("",!0)]),default:f(()=>[d(Se,{modelValue:a.value.end.type,"onUpdate:modelValue":D[3]||(D[3]=K=>a.value.end.type=K)},{default:f(()=>D[31]||(D[31]=[v("option",{value:"never"},"Never",-1),v("option",{value:"date"},"After date",-1),v("option",{value:"repeats"},"After repeating",-1)])),_:1},8,["modelValue"]),a.value.end.type==="date"?(p(),E(jo,{key:0,modelValue:a.value.end.date,"onUpdate:modelValue":D[4]||(D[4]=K=>a.value.end.date=K)},null,8,["modelValue"])):U("",!0),a.value.end.type==="repeats"?(p(),k(W,{key:1},[d(pn,{modelValue:a.value.end.repeats,"onUpdate:modelValue":D[5]||(D[5]=K=>a.value.end.repeats=K),min:1},null,8,["modelValue"]),D[32]||(D[32]=_(" times "))],64)):U("",!0)]),_:1}),d(N,{name:"Index notes"},{description:f(()=>D[33]||(D[33]=[_(" Allows to assign numbers to notes (ex. Day 1, Day 2, etc.). ")])),default:f(()=>[d(Ge,{modelValue:a.value.index.enabled,"onUpdate:modelValue":D[6]||(D[6]=K=>a.value.index.enabled=K)},null,8,["modelValue"])]),_:1}),a.value.index.enabled?(p(),k(W,{key:1},[d(N,{name:"Anchor date"},{description:f(()=>D[34]||(D[34]=[_(" This date is used to connect some number to it for further calculations."),v("br",null,null,-1),_(" Start date is used as anchor date if defined. ")])),default:f(()=>[v("div",{"aria-label":a.value.start?"Start date is used":""},[a.value.start?(p(),k("span",Vg,I(a.value.start),1)):(p(),E(jo,{key:1,modelValue:a.value.index.anchorDate,"onUpdate:modelValue":D[7]||(D[7]=K=>a.value.index.anchorDate=K)},null,8,["modelValue"]))],8,Sg)]),_:1}),d(N,{name:"Start number"},{description:f(()=>D[35]||(D[35]=[_(" This number is used to start numbering notes at anchor date. ")])),default:f(()=>[d(pn,{modelValue:a.value.index.anchorIndex,"onUpdate:modelValue":D[8]||(D[8]=K=>a.value.index.anchorIndex=K),min:1},null,8,["modelValue"])]),_:1}),d(N,{name:"Index change"},{description:f(()=>D[36]||(D[36]=[_(" Define how index number will change with time. ")])),default:f(()=>[d(Se,{modelValue:a.value.index.type,"onUpdate:modelValue":D[9]||(D[9]=K=>a.value.index.type=K)},{default:f(()=>D[37]||(D[37]=[v("option",{value:"increment"},"Constantly increasing",-1),v("option",{value:"reset_after"},"Resets after",-1)])),_:1},8,["modelValue"]),a.value.index.type==="reset_after"?(p(),k(W,{key:0},[d(pn,{modelValue:a.value.index.resetAfter,"onUpdate:modelValue":D[10]||(D[10]=K=>a.value.index.resetAfter=K),min:2,narrow:""},null,8,["modelValue"]),D[38]||(D[38]=_(" repeats "))],64)):U("",!0)]),_:1}),!a.value.start&&a.value.index.type==="increment"?(p(),E(N,{key:0,name:"Allow before"},{description:f(()=>D[39]||(D[39]=[_(" Enabled to index before anchor date. Might result in negative numbers. ")])),default:f(()=>[d(Ge,{modelValue:a.value.index.allowBefore,"onUpdate:modelValue":D[11]||(D[11]=K=>a.value.index.allowBefore=K)},null,8,["modelValue"])]),_:1})):U("",!0)],64)):U("",!0),d(N,{name:"Confirm creating new note?"},{description:f(()=>D[40]||(D[40]=[_(" When turned on will show confirmation dialog any time you try navigating to a date that does not have a note yet. ")])),default:f(()=>[d(Ge,{modelValue:a.value.confirmCreation,"onUpdate:modelValue":D[12]||(D[12]=K=>a.value.confirmCreation=K)},null,8,["modelValue"])]),_:1}),d(N,{name:"Auto-create current notes"},{description:f(()=>[D[41]||(D[41]=_(" When turned on will automatically create notes for current date if they don't exist yet. ")),D[42]||(D[42]=v("br",null,null,-1)),a.value.confirmCreation?(p(),k("div",xg,"Confirmation dialog won't be shown for autocreated notes.")):U("",!0)]),default:f(()=>[d(Ge,{modelValue:a.value.autoCreate,"onUpdate:modelValue":[D[13]||(D[13]=K=>a.value.autoCreate=K),H]},null,8,["modelValue"])]),_:1}),d(N,{name:"Note name template"},{description:f(()=>[D[43]||(D[43]=_(" Template used to generate new note name.")),D[44]||(D[44]=v("br",null,null,-1)),d(pr,{type:a.value.write.type,"date-format":r.value.dateFormat},null,8,["type","date-format"])]),default:f(()=>[d(He,{modelValue:a.value.nameTemplate,"onUpdate:modelValue":D[14]||(D[14]=K=>a.value.nameTemplate=K)},null,8,["modelValue"])]),_:1}),d(N,{name:"Default date format"},{description:f(()=>[D[46]||(D[46]=_(" Used to format dates if not defined in variable.")),D[47]||(D[47]=v("br",null,null,-1)),D[48]||(D[48]=v("a",{target:"_blank",href:"https://momentjs.com/docs/#/displaying/format/"},"Syntax reference",-1)),D[49]||(D[49]=v("br",null,null,-1)),d(tu,{format:a.value.dateFormat},null,8,["format"]),c.value?(p(),k("div",jg,[D[45]||(D[45]=_(' Looks like you are using date format to create folders. Recommended way to this is to use variables in "Folder" field. ')),v("a",{href:"#",onClick:m},"Apply recommendation")])):U("",!0)]),default:f(()=>[d(He,{modelValue:a.value.dateFormat,"onUpdate:modelValue":D[15]||(D[15]=K=>a.value.dateFormat=K)},null,8,["modelValue"])]),_:1}),d(N,{name:"Folder"},{description:f(()=>[D[50]||(D[50]=_(" New notes will be created in this folder. ")),D[51]||(D[51]=v("br",null,null,-1)),d(pr,{type:a.value.write.type,"date-format":r.value.dateFormat},null,8,["type","date-format"]),D[52]||(D[52]=_()),D[53]||(D[53]=v("br",null,null,-1)),a.value.folder&&a.value.folder.includes("{")?(p(),E(bh,{key:0,"journal-name":O.journalName},null,8,["journal-name"])):U("",!0)]),default:f(()=>[d(Zi,{modelValue:a.value.folder,"onUpdate:modelValue":D[16]||(D[16]=K=>a.value.folder=K)},null,8,["modelValue"])]),_:1}),d(At,{expanded:i.templates,"onUpdate:expanded":D[17]||(D[17]=K=>i.templates=K)},{trigger:f(()=>[d(Ot,{icon:"notepad-text-dashed"},{default:f(()=>[D[54]||(D[54]=_(" Templates ")),v("span",$g,I(a.value.templates.length),1)]),_:1})]),controls:f(()=>[d(se,{onClick:j},{default:f(()=>D[55]||(D[55]=[_(" Add template ")])),_:1})]),default:f(()=>[d(N,{"no-controls":""},{description:f(()=>[D[56]||(D[56]=_(" Path to note that will be used as template when creating new notes. ")),D[57]||(D[57]=v("br",null,null,-1)),D[58]||(D[58]=_(" When multiple templates are configured - first existing will be used. ")),D[59]||(D[59]=v("br",null,null,-1)),d(pr,{type:r.value.type,"date-format":r.value.dateFormat},null,8,["type","date-format"]),D[60]||(D[60]=v("br",null,null,-1)),d(ig,{type:r.value.type,"journal-name":O.journalName},null,8,["type","journal-name"]),d(yg)]),_:1}),(p(!0),k(W,null,Ce(a.value.templates,(K,Be)=>(p(),k(W,{key:Be},[d(N,{"controls-only":""},{default:f(()=>[d(vg,{modelValue:a.value.templates[Be],"onUpdate:modelValue":ct=>a.value.templates[Be]=ct,class:"grow"},null,8,["modelValue","onUpdate:modelValue"]),d(ke,{icon:"trash",tooltip:"Remove template",onClick:ct=>a.value.templates.splice(Be,1)},null,8,["onClick"])]),_:2},1024),K.includes("{")?(p(),E(fg,{key:0,"journal-name":O.journalName,path:K},null,8,["journal-name","path"])):U("",!0)],64))),128))]),_:1},8,["expanded"]),d(At,{expanded:i.commands,"onUpdate:expanded":D[18]||(D[18]=K=>i.commands=K)},{trigger:f(()=>[d(Ot,{icon:"terminal"},{default:f(()=>[D[61]||(D[61]=_(" Commands ")),v("span",Ng,I(r.value.commands.length),1)]),_:1})]),controls:f(()=>[d(se,{onClick:C},{default:f(()=>D[62]||(D[62]=[_("Add command")])),_:1})]),default:f(()=>[r.value.commands.length===0?(p(),E(N,{key:0},{description:f(()=>D[63]||(D[63]=[_(" No commands configured yet. ")])),_:1})):(p(!0),k(W,{key:1},Ce(r.value.commands,(K,Be)=>(p(),E(N,{key:Be},{name:f(()=>[_(I(K.name),1)]),description:f(()=>[_(I(b(ou)(r.value.type,K.type))+" "+I(b(Qm)(r.value.type,K.type,K.context)),1)]),default:f(()=>[d(ke,{icon:"pencil",tooltip:"Edit",onClick:ct=>$(K,Be)},null,8,["onClick"]),d(ke,{icon:"trash-2",tooltip:"Delete",onClick:ct=>F(Be)},null,8,["onClick"])]),_:2},1024))),128))]),_:1},8,["expanded"]),d(At,{expanded:i.decorations,"onUpdate:expanded":D[19]||(D[19]=K=>i.decorations=K)},{trigger:f(()=>[d(Ot,{icon:"paintbrush"},{default:f(()=>[D[64]||(D[64]=_(" Calendar decorations ")),v("span",Mg,I(r.value.decorations.length),1)]),_:1})]),controls:f(()=>[d(se,{onClick:R},{default:f(()=>D[65]||(D[65]=[_("Add decoration")])),_:1})]),default:f(()=>[d(N,{"no-controls":""},{description:f(()=>D[66]||(D[66]=[_(" Use decorations to highlight dates in calendar that meet certain conditions. ")])),_:1}),r.value.decorations.length===0?(p(),E(N,{key:0},{description:f(()=>D[67]||(D[67]=[_(" No calendar decorations configured yet. ")])),_:1})):(p(!0),k(W,{key:1},Ce(r.value.decorations,(K,Be)=>(p(),E(N,{key:Be},{description:f(()=>[v("div",Ag,[v("div",Og,[d(Ko,{class:"decoration-preview",styles:K.styles},{default:f(()=>[v("span",null,I(b(l)),1)]),_:2},1032,["styles"])]),D[68]||(D[68]=_(" when ")),(p(!0),k(W,null,Ce(K.conditions,(ct,En)=>(p(),k(W,{key:En},[_(I(b(Qp)(ct))+" ",1),En>0?(p(),k("span",Tg,I(K.mode),1)):U("",!0)],64))),128))])]),default:f(()=>[d(ke,{icon:"pencil",tooltip:"Edit",onClick:ct=>ne(K,Be)},null,8,["onClick"]),d(ke,{icon:"trash-2",tooltip:"Delete",onClick:ct=>M(Be)},null,8,["onClick"])]),_:2},1024))),128))]),_:1},8,["expanded"]),d(At,{expanded:i.navBlock,"onUpdate:expanded":D[22]||(D[22]=K=>i.navBlock=K)},{trigger:f(()=>[d(Ot,{icon:"signpost-big"},{default:f(()=>D[69]||(D[69]=[_(" Navigation block ")])),_:1})]),controls:f(()=>[d(se,{onClick:A},{default:f(()=>D[70]||(D[70]=[_("Add row")])),_:1})]),default:f(()=>[d(ls,{class:"nav-block-preview",rows:r.value.navBlock.rows,"journal-name":O.journalName,"ref-date":b(s),onMoveUp:oe,onMoveDown:he,onEdit:ae,onRemove:de},null,8,["rows","journal-name","ref-date"]),d(N,{name:"Navigation block mode"},{default:f(()=>[d(Se,{modelValue:r.value.navBlock.type,"onUpdate:modelValue":D[20]||(D[20]=K=>r.value.navBlock.type=K)},{default:f(()=>D[71]||(D[71]=[v("option",{value:"create"},"Create new note",-1),v("option",{value:"existing"},"Open existing note",-1)])),_:1},8,["modelValue"])]),_:1}),d(N,{name:"Decorate whole navigation block"},{default:f(()=>[d(Ge,{modelValue:r.value.navBlock.decorateWholeBlock,"onUpdate:modelValue":D[21]||(D[21]=K=>r.value.navBlock.decorateWholeBlock=K)},null,8,["modelValue"])]),_:1})]),_:1},8,["expanded"]),r.value.type==="custom"?(p(),E(At,{key:2,expanded:i.calendarViewBlock,"onUpdate:expanded":D[24]||(D[24]=K=>i.calendarViewBlock=K)},{trigger:f(()=>[d(Ot,{icon:"signpost-big"},{default:f(()=>D[72]||(D[72]=[_(" Calendar View block ")])),_:1})]),controls:f(()=>[d(se,{onClick:Ve},{default:f(()=>D[73]||(D[73]=[_("Add row")])),_:1})]),default:f(()=>[d(ls,{class:"nav-block-preview",rows:r.value.calendarViewBlock.rows,"journal-name":O.journalName,"ref-date":b(s),onMoveUp:dt,onMoveDown:Qe,onEdit:Ee,onRemove:gt},null,8,["rows","journal-name","ref-date"]),d(N,{name:"Decorate whole navigation block"},{default:f(()=>[d(Ge,{modelValue:r.value.calendarViewBlock.decorateWholeBlock,"onUpdate:modelValue":D[23]||(D[23]=K=>r.value.calendarViewBlock.decorateWholeBlock=K)},null,8,["modelValue"])]),_:1})]),_:1},8,["expanded"])):U("",!0),d(At,{expanded:i.frontmatter,"onUpdate:expanded":D[29]||(D[29]=K=>i.frontmatter=K)},{trigger:f(()=>[d(Ot,{icon:"table-properties"},{default:f(()=>D[74]||(D[74]=[_(" Frontmatter ")])),_:1})]),default:f(()=>[d(N,{name:"Date property name"},{default:f(()=>[_(I(a.value.frontmatter.dateField||b(Br))+" ",1),d(ke,{icon:"pencil",tooltip:"Edit",onClick:D[25]||(D[25]=K=>Pe("dateField"))})]),_:1}),a.value.index.enabled?(p(),E(N,{key:0,name:"Index property name"},{default:f(()=>[_(I(a.value.frontmatter.indexField||b(Rr))+" ",1),d(ke,{icon:"pencil",tooltip:"Edit",onClick:D[26]||(D[26]=K=>Pe("indexField"))})]),_:1})):U("",!0),d(N,{name:"Add start date property?"},{description:f(()=>D[75]||(D[75]=[_(" In most cases start date is equal to date property. But for weeks journals it might be different for weeks that start one year and end in other - in this case date is equals to end date. ")])),default:f(()=>[d(Ge,{"model-value":a.value.frontmatter.addStartDate,"onUpdate:modelValue":z},null,8,["model-value"])]),_:1}),a.value.frontmatter.addStartDate?(p(),E(N,{key:1,name:"Start date property name"},{default:f(()=>[_(I(a.value.frontmatter.startDateField||b(Xt))+" ",1),d(ke,{icon:"pencil",tooltip:"Edit",onClick:D[27]||(D[27]=K=>Pe("startDateField"))})]),_:1})):U("",!0),d(N,{name:"Add end date property?"},{default:f(()=>[d(Ge,{"model-value":a.value.frontmatter.addEndDate,"onUpdate:modelValue":ue},null,8,["model-value"])]),_:1}),a.value.frontmatter.addEndDate?(p(),E(N,{key:2,name:"End date property name"},{default:f(()=>[_(I(a.value.frontmatter.endDateField||b(cn))+" ",1),d(ke,{icon:"pencil",tooltip:"Edit",onClick:D[28]||(D[28]=K=>Pe("endDateField"))})]),_:1})):U("",!0)]),_:1},8,["expanded"])])):U("",!0)}}),Eg=ye(Fg,[["__scopeId","data-v-08adda03"]]),Pg={key:0,class:"journal-important"},Ig=B({__name:"RenameShelf.modal",props:{name:{}},emits:["save","close"],setup(e,{emit:t}){const n=e,o=t,r=ve(),a=ie(n.name),l=g(()=>a.value.length>0&&a.value!==n.name&&!r.hasShelf(a.value)),s=g(()=>a.value&&a.value!==n.name&&r.hasShelf(a.value));function i(){o("save",a.value),o("close")}return(u,c)=>(p(),k(W,null,[d(N,{name:"New name"},{description:f(()=>[s.value?(p(),k("span",Pg,"This name is already used.")):U("",!0)]),default:f(()=>[d(He,{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=m=>a.value=m)},null,8,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(se,{onClick:c[1]||(c[1]=m=>u.$emit("close"))},{default:f(()=>c[2]||(c[2]=[_("Cancel")])),_:1}),d(se,{cta:"",disabled:!l.value,onClick:i},{default:f(()=>c[3]||(c[3]=[_("Save")])),_:1},8,["disabled"])]),_:1})],64))}}),Bg={key:0},Rg={class:"flair"},Yg=B({__name:"JournalSettingsShelfDetails",props:{shelfName:{}},emits:["back","edit","organize","bulk-add"],setup(e,{emit:t}){const n=t,o=ve(),r=g(()=>o.getShelf(e.shelfName)),a=g(()=>r.value?r.value.journals.map(i=>o.getJournal(i)).filter(i=>!!i):[]);function l(){r.value&&new Fe(o,"Rename shelf",Ig,{name:r.value.name,onSave(i){o.renameShelf(e.shelfName,i),n("organize",i)}}).open()}function s(){new Fe(o,"Add Journal",rl,{onCreate(i,u){if(!r.value)return;const c=o.createJournal(i,u);r.value.journals.push(i),c.shelves.push(e.shelfName),n("edit",i)}}).open()}return(i,u)=>r.value?(p(),k("div",Bg,[d(N,{heading:""},{name:f(()=>[d(Ot,{icon:"library"},{default:f(()=>[_(" Configuring "+I(r.value.name),1)]),_:1})]),default:f(()=>[d(ke,{icon:"pencil",tooltip:"Rename shelf",onClick:l}),d(ke,{icon:"chevron-left",tooltip:"Back to list",onClick:u[0]||(u[0]=c=>i.$emit("back"))})]),_:1}),d(At,{"default-expanded":a.value.length>0},{trigger:f(()=>[d(Ot,{icon:"book-open"},{default:f(()=>[u[3]||(u[3]=_(" Journals ")),v("span",Rg,I(a.value.length),1)]),_:1})]),controls:f(()=>[d(ke,{icon:"plus",cta:"",tooltip:"Create new journal",onClick:s})]),default:f(()=>[d(Za,{journals:a.value,onEdit:u[1]||(u[1]=c=>i.$emit("edit",c)),onBulkAdd:u[2]||(u[2]=c=>i.$emit("bulk-add",c))},null,8,["journals"])]),_:1},8,["default-expanded"])])):U("",!0)}}),Ug=B({__name:"ConditionItem",props:{condition:{}},emits:["change"],setup(e){const t=g(()=>{switch(e.condition.type){case"title":return lu;case"tag":return su;case"property":return iu}return null});return(n,o)=>t.value?(p(),E(Yo(t.value),{key:0,condition:n.condition,onChange:o[0]||(o[0]=r=>n.$emit("change",r))},null,40,["condition"])):U("",!0)}}),Lg={key:0,class:"mode-hint"},Wg={key:0,class:"journal-hint"},Jg=B({__name:"ConditionsList",props:{mode:{},conditions:{}},emits:["add-condition","change-condition","remove-condition"],setup(e,{emit:t}){const n=t,o=[{value:"title",label:"Note title"},{value:"tag",label:"Tag"},{value:"property",label:"Property"}];function r(s){n("add-condition",Vt(zi[s]))}function a(s){n("remove-condition",s)}function l(s,i){n("change-condition",s,i)}return(s,i)=>(p(),k(W,null,[d(N,null,{default:f(()=>[d(ja,{options:o,onSelect:r},{default:f(()=>i[0]||(i[0]=[_("Add condition")])),_:1})]),_:1}),(p(!0),k(W,null,Ce(s.conditions,(u,c)=>(p(),E(N,{key:c,class:"condition-wrapper"},{default:f(()=>[c>0?(p(),k("span",Lg,I(s.mode),1)):U("",!0),d(Ug,{condition:u,onChange:m=>l(c,m)},null,8,["condition","onChange"]),d(ke,{icon:"trash",onClick:m=>a(c)},null,8,["onClick"])]),_:2},1024))),128)),s.conditions.length===0?(p(),k("p",Wg,"No conditions defined yet")):U("",!0)],64))}}),qg={key:0},Hg=B({__name:"ConfigureBulkAddNotes",props:{journalName:{}},emits:["process","close"],setup(e,{emit:t}){const n=ve(),o=g(()=>n.getJournal(e.journalName)),r=t,{defineField:a,errorBag:l,handleSubmit:s}=Sn({initialValues:{folder:"",date_place:"title",property_name:"",date_format:o.value?.dateFormat,filter_combinator:"no",existing_note:"skip",other_folder:"keep",other_name:"keep",dry_run:!1},validationSchema:Vn(jt(Pt({folder:tt(),date_place:Tt(["title","property"]),property_name:tt(),date_format:jt(tt(),en("Date format is required")),filter_combinator:Tt(["no","and","or"]),existing_note:Tt(["skip","override","merge","ask"]),other_folder:Tt(["keep","move","ask"]),other_name:Tt(["keep","rename","ask"]),dry_run:fn()}),Ur(qo([["date_place"],["property_name"]],Pe=>Pe.date_place==="property"?!!Pe.property_name:!0,"Please enter property name."),["property_name"])))}),[i,u]=a("folder"),[c,m]=a("date_place"),[y,h]=a("property_name"),[j,C]=a("date_format"),[$,F]=a("filter_combinator"),[R,ne]=a("existing_note"),[M,A]=a("other_folder"),[ae,de]=a("other_name"),[oe,he]=a("dry_run"),Ve=ie([]);function Ee(Pe){Ve.value.push(Pe)}function gt(Pe,z){Ve.value[Pe][z.prop]=z.value}function dt(Pe){Ve.value.splice(Pe,1)}const Qe=s(()=>{r("process",{folder:i.value??"/",date_place:c.value??"title",property_name:y.value??"",date_format:j.value??o.value?.dateFormat??"",filter_combinator:$.value??"no",filters:Ve.value,existing_note:R.value??"skip",other_folder:M.value??"keep",other_name:ae.value??"keep",dry_run:oe.value??!1})});return(Pe,z)=>(p(),k("form",{onSubmit:z[10]||(z[10]=qt((...ue)=>b(Qe)&&b(Qe)(...ue),["prevent"]))},[d(N,{name:"Folder",description:""},{description:f(()=>[z[11]||(z[11]=v("div",null,"Select folder with existing notes that you want to process",-1)),d(it,{errors:b(l).folder},null,8,["errors"])]),default:f(()=>[d(Zi,xe({modelValue:b(i),"onUpdate:modelValue":z[0]||(z[0]=ue=>ce(i)?i.value=ue:null)},b(u)),null,16,["modelValue"])]),_:1}),d(N,{name:"Take date from"},{default:f(()=>[d(Se,xe({modelValue:b(c),"onUpdate:modelValue":z[1]||(z[1]=ue=>ce(c)?c.value=ue:null)},b(m)),{default:f(()=>z[12]||(z[12]=[v("option",{value:"title"},"Note title",-1),v("option",{value:"property"},"Property",-1)])),_:1},16,["modelValue"])]),_:1}),b(c)==="property"?(p(),E(N,{key:0,name:"Property containing date"},{description:f(()=>[d(it,{errors:b(l).property_name},null,8,["errors"])]),default:f(()=>[d(He,xe({modelValue:b(y),"onUpdate:modelValue":z[2]||(z[2]=ue=>ce(y)?y.value=ue:null)},b(h)),null,16,["modelValue"])]),_:1})):U("",!0),d(N,{name:"Date format"},{description:f(()=>[z[13]||(z[13]=v("a",{target:"_blank",href:"https://momentjs.com/docs/#/displaying/format/"},"Syntax reference",-1)),z[14]||(z[14]=v("br",null,null,-1)),z[15]||(z[15]=_(" If your dates have time component in them - please omit it in format. ")),d(tu,{format:b(j)??""},null,8,["format"]),b(c)==="property"?(p(),k("div",qg," Please pay attention that dates might differ from how they are stored. Check format in Source display mode. ")):U("",!0),d(it,{errors:b(l).date_format},null,8,["errors"])]),default:f(()=>[d(He,xe({modelValue:b(j),"onUpdate:modelValue":z[3]||(z[3]=ue=>ce(j)?j.value=ue:null)},b(C)),null,16,["modelValue"])]),_:1}),d(N,{name:"Process"},{default:f(()=>[d(Se,xe({modelValue:b($),"onUpdate:modelValue":z[4]||(z[4]=ue=>ce($)?$.value=ue:null)},b(F)),{default:f(()=>z[16]||(z[16]=[v("option",{value:"no"},"All notes",-1),v("option",{value:"or"},"Notes that match any filter",-1),v("option",{value:"and"},"Notes that match all filters",-1)])),_:1},16,["modelValue"])]),_:1}),b($)&&b($)!=="no"?(p(),E(Jg,{key:1,conditions:Ve.value,mode:b($),onAddCondition:Ee,onChangeCondition:gt,onRemoveCondition:dt},null,8,["conditions","mode"])):U("",!0),d(N,{name:"If other note with same date exists in journal"},{default:f(()=>[d(Se,xe({modelValue:b(R),"onUpdate:modelValue":z[5]||(z[5]=ue=>ce(R)?R.value=ue:null)},b(ne)),{default:f(()=>z[17]||(z[17]=[v("option",{value:"skip"},"Skip note",-1),v("option",{value:"override"},"Override date connection",-1),v("option",{value:"merge"},"Merge note content into existing one",-1),v("option",{value:"ask"},"Ask for action for every such note",-1)])),_:1},16,["modelValue"])]),_:1}),d(N,{name:"When note name differs from journal settings"},{default:f(()=>[d(Se,xe({modelValue:b(ae),"onUpdate:modelValue":z[6]||(z[6]=ue=>ce(ae)?ae.value=ue:null)},b(de)),{default:f(()=>z[18]||(z[18]=[v("option",{value:"keep"},"Keep as is",-1),v("option",{value:"rename"},"Rename",-1),v("option",{value:"ask"},"Ask for action for every such note",-1)])),_:1},16,["modelValue"])]),_:1}),d(N,{name:"When note is not in folder from journal setting"},{default:f(()=>[d(Se,xe({modelValue:b(M),"onUpdate:modelValue":z[7]||(z[7]=ue=>ce(M)?M.value=ue:null)},b(A)),{default:f(()=>z[19]||(z[19]=[v("option",{value:"keep"},"Keep as is",-1),v("option",{value:"move"},"Move to configured folder",-1),v("option",{value:"ask"},"Ask for action for every such note",-1)])),_:1},16,["modelValue"])]),_:1}),d(N,{name:"Dry run?"},{description:f(()=>z[20]||(z[20]=[_(" Don't change notes, just report potential changes ")])),default:f(()=>[d(Ge,xe({modelValue:b(oe),"onUpdate:modelValue":z[8]||(z[8]=ue=>ce(oe)?oe.value=ue:null)},b(he)),null,16,["modelValue"])]),_:1}),d(N,null,{default:f(()=>[d(se,{onClick:z[9]||(z[9]=ue=>Pe.$emit("close"))},{default:f(()=>z[21]||(z[21]=[_("Cancel")])),_:1}),d(se,{cta:"",onClick:b(Qe)},{default:f(()=>z[22]||(z[22]=[_("Start")])),_:1},8,["onClick"])]),_:1})],32))}});class Kg{#e;repeats=1;constructor(t){this.#e=t}get duration(){return this.#e.value.type}resolveForDate(t){const n=Q(t);return n.isValid()?this.#n(n):null}resolveNext(t){const n=Q(t);return n.isValid()?(n.add(1,this.#e.value.type),this.#n(n)):null}resolvePrevious(t){const n=Q(t);return n.isValid()?(n.subtract(1,this.#e.value.type),this.#n(n)):null}resolveStartDate(t){const n=this.#e.value.type;return Q(t).startOf(n).format(we)}resolveEndDate(t){const n=this.#e.value.type;return Q(t).endOf(n).format(we)}resolveRelativeDate(t){const n=this.#e.value.type;return Di(n,t)}resolveDateForCommand(t,n){switch(n){case"same":return t;case"next":return Q(t).add(1,this.#e.value.type).format(we);case"previous":return Q(t).subtract(1,this.#e.value.type).format(we);case"same_next_week":return Q(t).add(1,"week").format(we);case"same_previous_week":return Q(t).subtract(1,"week").format(we);case"same_next_month":return Q(t).add(1,"month").format(we);case"same_previous_month":return Q(t).subtract(1,"month").format(we);case"same_next_year":return Q(t).add(1,"year").format(we);case"same_previous_year":return Q(t).subtract(1,"year").format(we)}return null}countRepeats(t,n){const o=Q(t),r=Q(n);return Math.abs(Math.ceil(o.diff(r,this.#e.value.type)))}calculateOffset(t){const n=Q(t),o=this.#n(n);if(!o)return[0,0];const r=this.resolveStartDate(o),a=this.resolveEndDate(o);return n.isBefore(r)||n.isAfter(a)?[0,0]:[n.diff(r,"days")+1,n.diff(a,"days")-1]}#n(t){const n=this.#e.value.type,o=t.clone().startOf(n);if(this.#e.value.type==="week"){const r=t.clone().endOf(n);if(!o.isSame(r,"year")&&o.week()===1)return r.format(we)}return o.format(we)}}class zg{constructor(t,n,o){this.journalName=t,this.index=o,this.#e=n}#e;get repeats(){return this.#e.value.duration}get duration(){return this.#e.value.every}resolveForDate(t){const o=this.index.getJournalIndex(this.journalName).findClosestDate(t);if(o)return o===t?o:o<=t?this.#o(t,o):this.#n(t,o);const r=this.#e.value.anchorDate,a=this.resolveEndDate(r);return t>=r&&t<a?r:t<r?this.#n(t,r):this.#o(t,r)}resolveNext(t){const n=this.resolveForDate(t);if(!n)return null;const o=this.resolveEndDate(n);return Q(o).add(1,"day").format(we)}resolvePrevious(t){const n=this.resolveForDate(t);if(!n)return null;const o=this.index.getJournalIndex(this.journalName),r=Q(n).subtract(1,"day"),a=o.findClosestDate(r.format(we));if(a){const s=this.index.get(this.journalName,a);if(s?.end_date&&r.isSame(s.end_date,"day"))return a}const l=Q(n).subtract(this.#e.value.duration,this.#e.value.every);return l.format(we)}resolveDateForCommand(t,n){const o=this.resolveForDate(t);return o?n==="next"?this.resolveNext(o):n==="previous"?this.resolvePrevious(o):o:null}resolveStartDate(t){return t}resolveEndDate(t){const n=this.index.get(this.journalName,t);return(n?.end_date?Q(n.end_date):Q(t).add(this.#e.value.duration,this.#e.value.every).subtract(1,"day")).format(we)}resolveRelativeDate(t){const n=this.resolveForDate(Ne().format(we));if(!n)return"";const o=this.countRepeats(n,t);switch(o){case 0:return"This "+this.journalName;case-1:return"Last "+this.journalName;case 1:return"Next "+this.journalName}return t<n?`${Math.abs(o)} ${this.journalName}s ago`:`${o} ${this.journalName}s from now`}calculateOffset(t){const n=this.resolveForDate(t);if(!n)return[0,0];const o=Q(t),r=Q(n),a=Q(this.resolveEndDate(n));return[o.diff(r,"days")+1,o.diff(a,"days")-1]}countRepeats(t,n){const o=this.resolveForDate(t),r=this.resolveForDate(n);if(!o||!r)return 0;let a=Q(o),l=Q(r);a.isAfter(l)&&([a,l]=[l,a]);let s=0;for(;a.isBefore(l);){++s;const i=this.resolveNext(a.format(we));if(!i)break;a=Q(i)}return t>n?-s:s}#n(t,n){const o=this.index.getJournalIndex(this.journalName);let r=Q(n),a=!1;for(;!a;){const l=r.clone().subtract(1,"day"),s=o.findClosestDate(l.format(we));let i=r.subtract(this.#e.value.duration,this.#e.value.every);if(s){const u=this.index.get(this.journalName,s);u?.end_date&&l.isSame(u.end_date,"day")&&(i=Q(s))}i.isSameOrBefore(t,"day")&&l.isSameOrAfter(t,"day")?a=!0:r=i.clone()}return r.format(we)}#o(t,n){let o=Q(n),r=!1;for(;!r;){const a=Q(this.resolveEndDate(o.format(we)));o.isSameOrBefore(t,"day")&&a.isSameOrAfter(t,"day")?r=!0:o=a.clone().add(1,"day")}return o.format(we)}}class lr{constructor(t,n,o,r,a,l){this.name=t,this.config=n,this.index=o,this.appManager=r,this.notesManager=a,this.activeNote=l,this.#e=this.config.value.write.type==="custom"?new zg(this.name,g(()=>this.config.value.write),this.index):new Kg(g(()=>this.config.value.write))}#e;#n=new Map;get type(){return this.config.value.write.type}get dateFormat(){return this.config.value.dateFormat}get navBlock(){return this.config.value.navBlock}get calendarViewBlock(){return this.config.value.calendarViewBlock}get decorations(){return this.config.value.decorations}get commands(){return this.config.value.commands}get isOnShelf(){return this.config.value.shelves.length>0}get shelfName(){return this.config.value.shelves[0]??""}get startDate(){return this.config.value.start}get endDate(){switch(this.config.value.end.type){case"date":return this.config.value.end.date;case"repeats":{const t=Q(this.startDate);return t.isValid()?t.clone().add(this.config.value.end.repeats*this.#e.repeats,this.#e.duration).format(we):""}}return""}calculateOffset(t){return this.#e.calculateOffset(t)}registerCommands(){for(const t of this.config.value.commands)this.#o(t)}get(t){const n=this.#e.resolveForDate(t);if(!n)return null;const o=this.index.get(this.name,n);return o||(this.#d(n)?this.#u(n):null)}next(t,n=!1){const o=this.#e.resolveForDate(t);if(!o)return null;if(n)return this.index.findNext(this.name,o);const r=this.#e.resolveNext(o);if(!r)return null;const a=this.index.get(this.name,r);return a||(this.#d(r)?this.#u(r):null)}previous(t,n=!1){const o=this.#e.resolveForDate(t);if(!o)return null;if(n)return this.index.findPrevious(this.name,o);const r=this.#e.resolvePrevious(o);if(!r)return null;const a=this.index.get(this.name,r);return a||(this.#d(r)?this.#u(r):null)}getNoteNameForDate(t){const n=this.get(t);if(!n)return"";const o=this.#s(n);return Nt(this.config.value.nameTemplate,o)}findAll(t,n){const o=this.#e.resolveForDate(t),r=this.#e.resolveForDate(n);if(!o||!r)return[];const a=[];let l=o;for(;l&&l<=r;){const s=this.get(l);s&&a.push(s);const i=this.next(l);l=i?i.date:null}return a}async open(t,n){const[o,r]=await this.#i(t);o&&await this.#l(o,n,r)}resolveAnchorDate(t){return this.#e.resolveForDate(t)}resolveStartDate(t){return this.#e.resolveStartDate(t)}resolveEndDate(t){return this.#e.resolveEndDate(t)}resolveRelativeDate(t){return this.#e.resolveRelativeDate(t)}addCommand(t){this.config.value.commands.push(t),this.#o(t)}updateCommand(t,n){this.#r(this.config.value.commands[t]),this.config.value.commands[t]=n,this.#o(n)}deleteCommand(t){const[n]=this.config.value.commands.splice(t,1);this.#r(n)}#o(t){this.appManager.addCommand(this.name,t,n=>n?this.#t(t):(this.#a(t).catch(console.error),!0)),t.showInRibbon&&this.appManager.addRibbonIcon(this.name,t.icon,t.name,()=>{this.#t(t)&&this.#a(t).catch(console.error)})}#r(t){this.appManager.removeCommand(this.name,t),this.appManager.removeRibbonIcon(this.name,t.name)}#t(t){if(t.context==="only_open_note"){const n=this.activeNote.value;if(!n)return!1;const o=this.index.getForPath(n);if(!o||o.journal!==this.name)return!1}return!0}async#a(t){const n=this.#m(t);if(!n)return;const o=this.#e.resolveDateForCommand(n,t.type);if(!o)return;const r=this.get(o);r&&await this.open(r,t.openMode)}addDecoration(t){this.config.value.decorations.push(t)}editDecoration(t,n){this.config.value.decorations[t]=n}deleteDecoration(t){this.config.value.decorations.splice(t,1)}addNavRow(t){this.config.value.navBlock.rows.push(t)}editNavRow(t,n){this.config.value.navBlock.rows[t]=n}deleteNavRow(t){this.config.value.navBlock.rows.splice(t,1)}moveNavRowUp(t){if(t>0){const n=this.config.value.navBlock.rows[t];this.config.value.navBlock.rows[t]=this.config.value.navBlock.rows[t-1],this.config.value.navBlock.rows[t-1]=n}}moveNavRowDown(t){if(t<this.config.value.navBlock.rows.length-1){const n=this.config.value.navBlock.rows[t];this.config.value.navBlock.rows[t]=this.config.value.navBlock.rows[t+1],this.config.value.navBlock.rows[t+1]=n}}addCalendarViewRow(t){this.config.value.calendarViewBlock.rows.push(t)}editCalendarViewRow(t,n){this.config.value.calendarViewBlock.rows[t]=n}deleteCalendarViewRow(t){this.config.value.calendarViewBlock.rows.splice(t,1)}moveCalendarViewRowUp(t){if(t>0){const n=this.config.value.calendarViewBlock.rows[t];this.config.value.calendarViewBlock.rows[t]=this.config.value.calendarViewBlock.rows[t-1],this.config.value.calendarViewBlock.rows[t-1]=n}}moveCalendarViewRowDown(t){if(t<this.config.value.calendarViewBlock.rows.length-1){const n=this.config.value.calendarViewBlock.rows[t];this.config.value.calendarViewBlock.rows[t]=this.config.value.calendarViewBlock.rows[t+1],this.config.value.calendarViewBlock.rows[t+1]=n}}async connectNote(t,n,o){const r=this.get(n);if(!r)return!1;if("path"in r){if(!o.override)return!1;await this.disconnectNote(r.path)}if(o.rename||o.move){const[a,l]=this.getConfiguredPathData(r),s=o.move?a:this.notesManager.getNoteFolder(t),i=o.rename?l:this.notesManager.getNoteFilename(t),u=this.notesManager.normalizePath(s?`${s}/${i}`:i);await this.notesManager.renameNote(t,u),t=u}return await this.#c(t,r),!0}async disconnectNote(t){await this.notesManager.updateNoteFrontmatter(t,n=>{delete n[st],delete n[this.frontmatterDate],delete n[this.frontmatterStartDate],delete n[this.frontmatterEndDate],delete n[this.frontmatterIndex]})}async clearNotes(){const t=[],n=this.index.getAllPaths(this.name);for(const o of n)t.push(this.disconnectNote(o));await Promise.allSettled(t)}async deleteNotes(){const t=[],n=this.index.getAllPaths(this.name);for(const o of n)t.push(this.notesManager.deleteNote(o));await Promise.allSettled(t)}get frontmatterDate(){return this.config.value.frontmatter.dateField||Br}get frontmatterIndex(){return this.config.value.frontmatter.indexField||Rr}get frontmatterStartDate(){return this.config.value.frontmatter.startDateField||Xt}get frontmatterEndDate(){return this.config.value.frontmatter.endDateField||cn}async renameFrontmatterField(t,n,o){this.config.value.frontmatter[t]=o;const r=this.index.getJournalIndex(this.name);if(r)for(const[,a]of r)await this.notesManager.updateNoteFrontmatter(a,l=>{String(n)in l&&(l[o]=l[n],delete l[n])})}async toggleFrontmatterStartDate(){this.config.value.frontmatter.addStartDate=!this.config.value.frontmatter.addStartDate;const t=this.index.getJournalIndex(this.name);if(t)for(const[,n]of t)await this.notesManager.updateNoteFrontmatter(n,o=>{const r=this.resolveAnchorDate(o[this.frontmatterDate]);r&&(this.config.value.frontmatter.addStartDate?o[this.frontmatterStartDate]=this.resolveStartDate(r):delete o[this.frontmatterStartDate])})}async toggleFrontmatterEndDate(){this.config.value.frontmatter.addEndDate=!this.config.value.frontmatter.addEndDate;const t=this.index.getJournalIndex(this.name);if(t)for(const[,n]of t)await this.notesManager.updateNoteFrontmatter(n,o=>{const r=this.resolveAnchorDate(o[this.frontmatterDate]);if(!r)return;const a=this.index.getForPath(n);this.config.value.frontmatter.addEndDate?o[this.frontmatterEndDate]=a?.end_date??this.resolveEndDate(r):a?.end_date?this.resolveEndDate(r)===a.end_date&&delete o[this.frontmatterEndDate]:delete o[this.frontmatterEndDate]})}async autoCreate(){if(!this.config.value.autoCreate)return;const t=this.get(Ne().format(we));t&&await this.#i(t)}async#l(t,n="active",o=!1){await this.notesManager.openNote(t,n==="active"?void 0:n),o&&await this.notesManager.tryTemplaterCursorJump(t)}async#i(t){const n=this.getNotePath(t);let o=!1;if(!this.notesManager.nodeExists(n)){const r=this.#s(t),a=Nt(this.config.value.nameTemplate,r);if(this.config.value.confirmCreation&&!await this.notesManager.confirmNoteCreation(this.name,a))return[null,!1];o=!0;try{await this.notesManager.createNote(n,""),r.note_name={type:"string",value:a};const l=await this.#p(n,r);l&&await this.notesManager.updateNote(n,l)}catch(l){throw console.error(l),new Error("Failed to create note")}}return await this.#c(n,t),[n,o]}getConfiguredPathData(t){const n=this.#s(t),o=Nt(this.config.value.nameTemplate,n)+".md";return[Nt(this.config.value.folder,n)||"/",o]}getResolvedTemplatePath(t,n){const o=this.#s(n);return Nt(t,o)}getNotePath(t){if("path"in t)return t.path;const n=this.#s(t),o=Nt(this.config.value.nameTemplate,n)+".md",r=Nt(this.config.value.folder,n);return this.notesManager.normalizePath(r?`${r}/${o}`:o)}#s(t){const n=String(te.moment()),o={date:{type:"date",value:t.date,defaultFormat:this.config.value.dateFormat},start_date:{type:"date",value:this.#e.resolveStartDate(t.date),defaultFormat:this.config.value.dateFormat},end_date:{type:"date",value:t.end_date??this.#e.resolveEndDate(t.date),defaultFormat:this.config.value.dateFormat},journal_name:{type:"string",value:this.config.value.name},index:{type:"number",value:t.index},note_name:{type:"string",value:""},title:{type:"string",value:""},time:{type:"date",value:n,defaultFormat:"HH:mm"},current_time:{type:"date",value:n,defaultFormat:"HH:mm"},current_date:{type:"date",value:n,defaultFormat:"YYYY-MM-DD"}},r=Nt(this.config.value.nameTemplate,o);return r&&(o.title.value=r,o.note_name.value=r),o}async#p(t,n){if(this.config.value.templates.length>0)for(const o of this.config.value.templates){const r=Nt(o.endsWith(".md")?o:o+".md",n),a=await this.notesManager.getNoteContent(r);if(a)return this.notesManager.tryApplyingTemplater(r,t,Nt(a,n))}return""}async#c(t,n){await this.notesManager.updateNoteFrontmatter(t,o=>{o[st]=this.name,o[this.frontmatterDate]=Q(n.date).format(we),this.config.value.frontmatter.addStartDate?o[this.frontmatterStartDate]=this.resolveStartDate(n.date):delete o[this.frontmatterStartDate],this.config.value.frontmatter.addEndDate||n.end_date&&n.end_date!==this.resolveStartDate(n.date)?o[this.frontmatterEndDate]=n.end_date?Q(n.end_date).format(we):this.resolveEndDate(n.date):delete o[this.frontmatterEndDate],n.index==null?delete o[this.frontmatterIndex]:o[this.frontmatterIndex]=n.index})}#u(t){return{journal:this.name,date:t,index:this.#f(t)}}#m(t){const n=this.activeNote.value,o=n?this.index.getForPath(n):null;return o&&t.context!=="today"?o.date:t.context==="only_open_note"?null:Ne().format(we)}#d(t){if(this.config.value.start){const n=Q(this.config.value.start);if(n.isValid()&&Q(t).isBefore(n))return!1}if(this.config.value.end.type==="date"&&this.config.value.end.date){const n=Q(this.config.value.end.date);if(n.isValid()&&Q(t).isAfter(n))return!1}return!(this.config.value.end.type==="repeats"&&this.config.value.end.repeats&&this.config.value.start&&this.#e.countRepeats(this.config.value.start,t)>=this.config.value.end.repeats)}#f(t){if(!this.config.value.index.enabled||!this.config.value.index.anchorDate||!this.config.value.index.anchorIndex)return;if(this.#n.has(t))return this.#n.get(t);const n=this.previous(t,!0);if(n?.index){const s=this.#e.countRepeats(n.date,t);let i=n.index+s;return this.config.value.index.type==="reset_after"&&(i%=this.config.value.index.resetAfter),this.#n.set(t,i),i}const o=this.next(t,!0);if(o?.index){const s=this.#e.countRepeats(t,o.date);let i=o.index-s;return this.config.value.index.type==="reset_after"&&i<0&&(i*=-1),this.#n.set(t,i),i}const r=Q(this.config.value.index.anchorDate);if(!r.isValid())return;if(r.isAfter(t)&&this.config.value.index.type==="increment"&&!this.config.value.index.allowBefore){this.#n.set(t,void 0);return}if(r.isBefore(t)){const s=this.#e.countRepeats(this.config.value.index.anchorDate,t);let i=this.config.value.index.anchorIndex+s;return this.config.value.index.type==="reset_after"&&(i%=this.config.value.index.resetAfter),this.#n.set(t,i),i}const a=this.#e.countRepeats(t,this.config.value.index.anchorDate);let l=this.config.value.index.anchorIndex-a;return this.config.value.index.type==="reset_after"&&l<0&&(l*=-1),this.#n.set(t,l),l}dispose(){for(const t of this.commands)this.#r(t)}}function Gg(e,t,n,o){const r=[],a=Yc(o.date_format);for(const l of n){const s={path:l,operations:[]};r.push(s);const i=e.index.getForPath(l);if(i){s.operations.push({type:"skipping",reason:t.name===i.journal?"already in journal":"already in another journal "+i.journal});continue}if(!Qg(e,l,o.filter_combinator,o.filters)){s.operations.push({type:"skipping",reason:"does not match filters"});continue}const u=o.date_place==="title"?e.notesManager.getNoteName(l):e.notesManager.getNoteMetadata(l)?.frontmatter?.[o.property_name];if(u===void 0){s.operations.push({type:"skipping",reason:"does not have date containing property "+o.property_name});continue}const c=u.match(a);if(!c){s.operations.push({type:"skipping",reason:"date with configured format not found"});continue}const m=Q(c[0],o.date_format);if(!m.isValid()){s.operations.push({type:"skipping",reason:"invalid date "+u});continue}const y=t.get(m.format("YYYY-MM-DD"));if(!y){s.operations.push({type:"skipping",reason:"date is outside of journal boundaries "+m.format("YYYY-MM-DD")});continue}"path"in y&&y.path&&s.operations.push({type:"existing_note",other_file:y.path,decision:o.existing_note});const[h,j]=t.getConfiguredPathData(y);h!==e.notesManager.getNoteFolder(l)&&s.operations.push({type:"other_folder",configured_folder:h,decision:o.other_folder}),j!==e.notesManager.getNoteName(l)&&s.operations.push({type:"other_name",configured_name:j,decision:o.other_name})}return r}function Qg(e,t,n,o){return n==="no"?!0:n==="and"?o.every(r=>is(e,t,r)):n==="or"?o.some(r=>is(e,t,r)):!1}function is(e,t,n){if(!e.notesManager.getNoteMetadata(t))return!1;switch(n.type){case"title":return Xg(e,t,n);case"tag":return Zg(e,t,n);case"property":return ey(e,t,n)}return!0}function Xg(e,t,n){const o=e.notesManager.getNoteName(t);switch(n.condition){case"contains":return o.contains(n.value);case"starts-with":return o.startsWith(n.value);case"ends-with":return o.endsWith(n.value);default:Lr(n.condition)}}function Zg(e,t,n){const o=e.notesManager.getNoteMetadata(t);if(!o||!o.tags)return!1;switch(n.condition){case"contains":return o.tags.some(r=>r.tag.contains(n.value));case"starts-with":return o.tags.some(r=>r.tag.startsWith(n.value));case"ends-with":return o.tags.some(r=>r.tag.endsWith(n.value));default:Lr(n.condition)}}function ey(e,t,n){const o=e.notesManager.getNoteMetadata(t);if(!o)return!1;const r=o.frontmatter?.[n.name];switch(n.condition){case"exists":return!!o.frontmatter&&n.name in o.frontmatter;case"does-not-exist":return!!o.frontmatter&&!(n.name in o.frontmatter);case"eq":return r==n.value;case"neq":return r!=n.value;case"contains":return typeof r=="string"&&r.contains(n.value);case"does-not-contain":return typeof r!="string"||typeof r=="string"&&!r.contains(n.value);case"starts-with":return typeof r=="string"&&r.startsWith(n.value);case"ends-with":return typeof r=="string"&&r.endsWith(n.value);default:Lr(n.condition)}}function ty(e,t){t.actions.push(`Skipped: ${e.reason}`)}async function ny(e,t,n,o,r){r.actions.push(`Note connected to journal as ${o.anchor_date}`),n.dry_run||await e.connectNote(t.path,o.anchor_date,{})}async function oy(e,t,n,o,r){switch(o.decision){case"skip":{r.actions.push("Skipped: other note connected to same date already exists in journal");break}case"override":{r.actions.push(`Other note "${o.other_file}" connected to same date disconnected`),n.dry_run||await e.disconnectNote(t.path);break}case"merge":{if(r.actions.push(`Content of note was merged into "${o.other_file}, note deleted"`),!n.dry_run){const a=await e.notesManager.getNoteContent(t.path);await e.notesManager.appendNote(o.other_file,a),await e.notesManager.deleteNote(t.path)}break}}}async function ry(e,t,n,o,r){switch(o.decision){case"keep":{r.actions.push(`Notes folder "${e.notesManager.getNoteFolder(t.path)??"/"}" differs from configured folder "${n.folder||"/"}" - keeping as is`);break}case"move":{if(r.actions.push(`Moved note to "${o.configured_folder??"/"}"`),!n.dry_run){const a=e.notesManager.getNoteFilename(t.path),l=te.normalizePath(o.configured_folder?`${o.configured_folder}/${a}`:a);await e.notesManager.renameNote(t.path,l),t.path=l}break}}}async function ay(e,t,n,o,r){switch(o.decision){case"keep":{r.actions.push(`Note name "${e.notesManager.getNoteName(t.path)}" differs from configured name "${n.property_name}" - keeping as is`);break}case"rename":{if(r.actions.push(`Renamed note to "${o.configured_name}"`),!n.dry_run){const a=e.notesManager.getNoteFolder(t.path),l=te.normalizePath(a?`${a}/${o.configured_name}`:o.configured_name);await e.notesManager.renameNote(t.path,l),t.path=l}break}}}async function ly(e,t,n,o){const{path:r,operations:a}=n,l={note:e.notesManager.getNoteName(r),folder:e.notesManager.getNoteFolder(r),path:r,actions:[]};try{for(const s of a)switch(s.type){case"skipping":{ty(s,l);break}case"connect":{await ny(t,n,o,s,l);break}case"existing_note":return await oy(e,n,o,s,l),l;case"other_folder":{await ry(e,n,o,s,l);break}case"other_name":{await ay(e,n,o,s,l);break}}}catch(s){console.error(s),l.actions.push(`Error: ${s instanceof Error?s.message:String(s)}`)}return l}const sy={key:0},iy={key:0},uy={key:1},dy={key:2},cy={key:1},fy={class:"flair"},py=B({__name:"BulkProcessNotes",props:{journalName:{},parameters:{}},emits:["close"],setup(e){const t=ve(),n=g(()=>t.getJournal(e.journalName)),o=ie("Building list..."),r=ie([]),a=ie(null),l=g(()=>a.value?a.value.operations.filter(j=>j.type==="existing_note"&&j.decision==="ask"||j.type==="other_folder"&&j.decision==="ask"||j.type==="other_name"&&j.decision==="ask"):[]),s=g(()=>a.value?t.notesManager.getNoteName(a.value.path):""),i=g(()=>a.value?t.notesManager.getNoteFolder(a.value.path):""),u=ie([]),c=g(()=>l.value.length>0);async function m(){await zp(10),r.value.length>0?(a.value=r.value.shift()??null,y().catch(console.error)):o.value="Finished"}async function y(){if(!n.value||!a.value||c.value)return;const j=await ly(t,n.value,a.value,e.parameters);u.value.push(j),a.value=null,m().catch(console.error)}function h(j,C){j.decision=C,y().catch(console.error)}return _t(()=>{if(!n.value)return;const j=t.notesManager.getNotesInFolder(e.parameters.folder);o.value="Preprocessing notes...",r.value=Gg(t,n.value,j,e.parameters),o.value="Processing notes...",m().catch(console.error)}),(j,C)=>(p(),k(W,null,[a.value&&c.value?(p(),k("div",sy,[_(" Note: "+I(s.value),1),C[17]||(C[17]=v("br",null,null,-1)),(p(!0),k(W,null,Ce(l.value,($,F)=>(p(),k("div",{key:F},[$.type==="existing_note"?(p(),k("div",iy,[_(" Other note with same date exists in journal - "+I(b(t).notesManager.getNoteName($.other_file)),1),C[4]||(C[4]=v("br",null,null,-1)),v("div",null,[d(se,{onClick:R=>h($,"skip")},{default:f(()=>C[1]||(C[1]=[_("Skip note")])),_:2},1032,["onClick"]),d(se,{onClick:R=>h($,"override")},{default:f(()=>C[2]||(C[2]=[_("Override date connection")])),_:2},1032,["onClick"]),d(se,{onClick:R=>h($,"merge")},{default:f(()=>C[3]||(C[3]=[_("Merge note content into existing one")])),_:2},1032,["onClick"])])])):$.type==="other_folder"?(p(),k("div",uy,[C[7]||(C[7]=_(" Note is not in folder from journal setting")),C[8]||(C[8]=v("br",null,null,-1)),_(" Configured folder: "+I($.configured_folder),1),C[9]||(C[9]=v("br",null,null,-1)),_(" Note folder: "+I(i.value),1),C[10]||(C[10]=v("br",null,null,-1)),v("div",null,[d(se,{onClick:R=>h($,"keep")},{default:f(()=>C[5]||(C[5]=[_("Keep as is")])),_:2},1032,["onClick"]),d(se,{onClick:R=>h($,"move")},{default:f(()=>C[6]||(C[6]=[_("Move to configured folder")])),_:2},1032,["onClick"])])])):$.type==="other_name"?(p(),k("div",dy,[C[13]||(C[13]=_(" Note name differs from journal settings")),C[14]||(C[14]=v("br",null,null,-1)),_(" Configured name: "+I($.configured_name),1),C[15]||(C[15]=v("br",null,null,-1)),_(" Note name: "+I(s.value),1),C[16]||(C[16]=v("br",null,null,-1)),v("div",null,[d(se,{onClick:R=>h($,"keep")},{default:f(()=>C[11]||(C[11]=[_("Keep as is")])),_:2},1032,["onClick"]),d(se,{onClick:R=>h($,"rename")},{default:f(()=>C[12]||(C[12]=[_("Rename to configured name")])),_:2},1032,["onClick"])])])):U("",!0)]))),128))])):(p(),k("div",cy,I(o.value),1)),u.value.length>0?(p(),E(At,{key:2},{trigger:f(()=>[_(" Processed notes "+I(j.parameters.dry_run?"(dry run)":"")+" ",1),v("span",fy,I(u.value.length),1)]),default:f(()=>[(p(!0),k(W,null,Ce(u.value,$=>(p(),k("div",{key:$.path,class:"log-entry"},[_(I($.path),1),C[18]||(C[18]=v("br",null,null,-1)),v("ul",null,[(p(!0),k(W,null,Ce($.actions,F=>(p(),k("li",{key:F},I(F),1))),128))])]))),128))]),_:1})):U("",!0),o.value==="Finished"?(p(),E(N,{key:3},{default:f(()=>[d(se,{onClick:C[0]||(C[0]=$=>j.$emit("close"))},{default:f(()=>C[19]||(C[19]=[_("Close")])),_:1})]),_:1})):U("",!0)],64))}}),my=ye(py,[["__scopeId","data-v-1f86ba38"]]),vy=B({__name:"BulkAddNotes.modal",props:{journalName:{}},emits:["close"],setup(e){const t=ie();function n(o){t.value=o}return(o,r)=>t.value?(p(),E(my,{key:0,"journal-name":o.journalName,parameters:t.value,onClose:r[0]||(r[0]=a=>o.$emit("close"))},null,8,["journal-name","parameters"])):(p(),E(Hg,{key:1,"journal-name":o.journalName,onProcess:n,onClose:r[1]||(r[1]=a=>o.$emit("close"))},null,8,["journal-name"]))}}),hy=B({__name:"JournalSettingsRoot",setup(e){const t=ie(null),n=ie(null),o=ve();function r(a){new Fe(o,`Add notes to ${a}`,vy,{journalName:a},700).open()}return(a,l)=>t.value?(p(),E(Eg,{key:0,"journal-name":t.value,onBack:l[0]||(l[0]=s=>t.value=null),onEdit:l[1]||(l[1]=s=>t.value=s)},null,8,["journal-name"])):n.value?(p(),E(Yg,{key:1,"shelf-name":n.value,onBack:l[2]||(l[2]=s=>n.value=null),onOrganize:l[3]||(l[3]=s=>n.value=s),onEdit:l[4]||(l[4]=s=>t.value=s),onBulkAdd:l[5]||(l[5]=s=>r(s))},null,8,["shelf-name"])):(p(),E(Fm,{key:2,onEdit:l[6]||(l[6]=s=>t.value=s),onOrganize:l[7]||(l[7]=s=>n.value=s),onBulkAdd:l[8]||(l[8]=s=>r(s))}))}});class gy extends te.PluginSettingTab{#e=null;#n;constructor(t,n){super(t,n),this.#n=n}display(){this.#e=ro(hy),this.#e.provide(Fn,this.#n),this.#e.mount(this.containerEl)}hide(){this.#e?.unmount(),this.#e=null,this.containerEl.empty()}}class yy{#e=ie(new Map);#n=new Map;#o=[];has(t){return this.#e.value.has(t)}get(t){return this.#e.value.get(t)??null}getAll(){return[...this.#e.value.values()]}set(t,n){const o=this.#e.value.has(t);this.#e.value.set(t,n),this.#n.set(n,t),o||this.#r(t)}delete(t){const n=this.#e.value.get(t);this.#e.value.delete(t),n&&this.#n.delete(n),this.#t(t)}deleteForPath(t){const n=this.#n.get(t);n&&this.delete(n)}findNext(t){const n=this.#a(t);return n===-1||n===this.#o.length-1?null:this.#e.value.get(this.#o[n+1])??null}findPrevious(t){const n=this.#a(t);return n===-1||n===0?null:this.#e.value.get(this.#o[n-1])??null}findClosestDate(t){if(this.#e.value.size===0)return;if(this.#e.value.has(t))return t;if(t<=this.#o[0])return this.#o[0];const n=this.#o.at(-1);if(n&&t>=n)return n;const o=this.#a(t);if(o!==-1)return this.#o[o]}*[Symbol.iterator](){yield*this.#e.value}#r(t){const n=this.#a(t);return this.#o.splice(n+1,0,t),n+1}#t(t){const n=this.#a(t);n!==-1&&this.#o.splice(n,1)}#a(t){if(this.#o.length===0)return-1;let n=0,o=this.#o.length;for(;o-n>1;){const r=Math.floor((n+o)/2);if(this.#o[r]===t)return r;this.#o[r]<t?n=r:o=r}return n===0&&this.#o[0]>t?-1:n}}class by{#e=ie(new Map);#n=new Map;#o=La(new Map);getForPath(t){return this.#e.value.get(t)??null}getForPathComputed(t){let n=this.#n.get(t);return n||(n=g(()=>this.#e.value.get(t)??null),this.#n.set(t,n),n)}get(t,n){const o=this.getJournalIndex(t).get(n);return o?this.getForPath(o):null}getAllPaths(t){return this.getJournalIndex(t).getAll()}findNext(t,n){const o=this.getJournalIndex(t).findNext(n);return o?this.getForPath(o):null}findPrevious(t,n){const o=this.getJournalIndex(t).findPrevious(n);return o?this.getForPath(o):null}getJournalIndex(t){let n=this.#o.value.get(t);return n||(n=new yy,this.#o.value.set(t,n)),n}registerPathData(t,n){this.#e.value.set(t,n),this.getJournalIndex(n.journal).set(n.date,t)}unregisterPathData(t){const n=this.#e.value.get(t);this.#e.value.delete(t),n&&this.getJournalIndex(n.journal).delete(n.date)}clearForPath(t){const n=this.#e.value.get(t);n&&(this.#e.value.delete(t),this.#n.delete(t),this.#o.value.get(n.journal)?.delete(n.date))}transferPathData(t,n,o){const r=this.#e.value.get(t);if(!r)return;this.#e.value.delete(t),r.path=n,r.title=o,this.#e.value.set(n,r);const a=this.#o.value.get(r.journal);a&&(a.deleteForPath(t),a.set(r.date,n))}updateFromMetadata(t,n,o,r){const{frontmatter:a}=r;if(!a||!(st in a))return;const l=a[t.frontmatterDate],s=a[t.frontmatterEndDate];if(!Q(l).isValid()||s&&!Q(s).isValid())return;const i={title:n,journal:t.name,date:l,end_date:s,path:o,index:a[t.frontmatterIndex],tags:r.tags?.map(u=>u.tag)??[],tasks:r.listItems?.filter(u=>u.task!=null).map(u=>({completed:u.task!==" "}))??[],properties:a};this.#e.value.set(o,i),this.getJournalIndex(t.name).set(l,o)}onunload(){this.#e.value.clear(),this.#n.clear(),this.#o.value.clear()}}const wy={class:"calendar-view-interval"},ky=B({__name:"CalendarViewCustomInterval",props:{date:{},journal:{}},setup(e){Cn(u=>({cfc2f888:s.value,"01165f16":i.value}));const t=ve(),n=g(()=>Q(e.date).startOf("month").format("YYYY-MM-DD")),o=g(()=>Q(e.date).endOf("month").format("YYYY-MM-DD")),r=g(()=>e.journal.findAll(n.value,o.value)),a=Jr(t),l=g(()=>a.value?.journal===e.journal.name),s=g(()=>wt(t.calendarViewSettings.activeStyle.color)),i=g(()=>wt(t.calendarViewSettings.activeStyle.background));return(u,c)=>(p(),k("div",wy,[(p(!0),k(W,null,Ce(r.value,m=>(p(),E(mr,{key:m.date,rows:u.journal.calendarViewBlock.rows,"ref-date":m.date,"journal-name":u.journal.name,class:kt({"is-active":l.value&&m.date===b(a)?.date}),"decorate-block":u.journal.calendarViewBlock.decorateWholeBlock},null,8,["rows","ref-date","journal-name","class","decorate-block"]))),128))]))}}),_y=ye(ky,[["__scopeId","data-v-6fda8589"]]),Cy={class:"custom-intervals-journals"},Dy=B({__name:"CalendarViewCustomIntervals",props:{date:{}},setup(e){const{journals:{custom:t}}=Go();return(n,o)=>(p(),k("div",Cy,[(p(!0),k(W,null,Ce(b(t),r=>(p(),E(_y,{key:r.name,date:n.date,journal:r},null,8,["date","journal"]))),128))]))}}),Sy=ye(Dy,[["__scopeId","data-v-1db5074f"]]),Vy={class:"calendar-view-header"},xy={class:"month-header"},jy=B({__name:"CalendarView",setup(e){const t=ve(),n=ie(Ne()),o=g(()=>n.value.format("YYYY-MM-DD")),r=g({get(){return t.uiSettings.calendarShelf},set(M){t.uiSettings.calendarShelf=M}}),a=g(()=>t.usesShelves&&Object.values(t.shelves).length>0||t.journals.some(M=>!M.isOnShelf)),{journals:l}=zo(r),s=g(()=>n.value.clone().startOf("month").format(we)),i=g(()=>n.value.clone().startOf("quarter").format(we)),u=g(()=>n.value.clone().startOf("year").format(we)),c=Jr(t),m=g(()=>c.value?t.getJournal(c.value.journal):null),y=g(()=>m.value?.type==="month"&&c.value?.date===s.value),h=g(()=>m.value?.type==="quarter"&&c.value?.date===i.value),j=g(()=>m.value?.type==="year"&&c.value?.date===u.value);function C(M){const A=new te.Menu;A.addItem(ae=>{ae.setTitle("All journals").onClick(()=>{r.value=null})});for(const ae of t.shelves)A.addItem(de=>{de.setTitle(ae.name).onClick(()=>{r.value=ae.name})});A.showAtMouseEvent(M)}function $(M,A="month"){const ae=n.value.clone();M<0?ae.subtract(Math.abs(M),A):ae.add(M,A),n.value=ae}function F(M){n.value=Ne(),t.calendarViewSettings.todayMode==="create"?ne(o.value,M):t.calendarViewSettings.todayMode==="navigate"&&ne(o.value,M,!0)}function R(M){new Fe(t,"Pick a date",qi,{selectedDate:o.value,onSelect(A){n.value=Q(A),t.calendarViewSettings.pickMode==="create"?ne(A,M):t.calendarViewSettings.pickMode==="navigate"&&ne(A,M,!0)}},400).open()}function ne(M,A,ae=!1){Eo(t,M,l.day.value.map(de=>de.name),ae,Po(A),A).catch(console.error)}return ut(c,M=>{if(!M)return;const A=t.getJournal(M.journal);if(A)switch(A.type){case"quarter":{const ae=Q(M.date).startOf("quarter"),de=Q(M.date).endOf("quarter");n.value.isBetween(ae,de)||(n.value=ae);break}case"year":{const ae=Q(M.date).startOf("year"),de=Q(M.date).endOf("year");n.value.isBetween(ae,de)||(n.value=ae);break}default:n.value=Q(M.date)}}),(M,A)=>(p(),k("div",null,[v("div",Vy,[a.value?(p(),E(se,{key:0,onClick:C},{default:f(()=>[_(I(r.value||"All journals"),1)]),_:1})):U("",!0),d(ke,{icon:"crosshair",tooltip:"Select a date to be displayed",onClick:R}),d(se,{onClick:F},{default:f(()=>A[4]||(A[4]=[_("Today")])),_:1})]),d(qr,{"ref-date":o.value},{header:f(()=>[d(ke,{icon:"chevrons-left",tooltip:"Previous year",onClick:A[0]||(A[0]=ae=>$(-1,"year"))}),d(ke,{icon:"chevron-left",tooltip:"Previous month",onClick:A[1]||(A[1]=ae=>$(-1,"month"))}),v("div",xy,[d(Yt,{date:s.value,type:"month","data-selected":y.value?"":null},null,8,["date","data-selected"]),b(l).quarter.value.length>0?(p(),E(Yt,{key:0,date:i.value,type:"quarter","data-selected":h.value?"":null},null,8,["date","data-selected"])):U("",!0),d(Yt,{date:u.value,type:"year","data-selected":j.value?"":null},null,8,["date","data-selected"])]),d(ke,{icon:"chevron-right",tooltip:"Next month",onClick:A[2]||(A[2]=ae=>$(1,"month"))}),d(ke,{icon:"chevrons-right",tooltip:"Next year",onClick:A[3]||(A[3]=ae=>$(1,"year"))})]),_:1},8,["ref-date"]),A[5]||(A[5]=v("div",{class:"calendar-view-separator"},null,-1)),d(Sy,{date:o.value},null,8,["date"])]))}}),$y=ye(jy,[["__scopeId","data-v-dd49dca8"]]);class Ny extends te.ItemView{constructor(t,n){super(t),this.plugin=n}navigation=!1;#e=null;getViewType(){return on}getDisplayText(){return"Calendar"}getIcon(){return"calendar-days"}onOpen(){return this.#e=ro($y),this.#e.provide(Fn,this.plugin),this.#e.mount(this.contentEl),Promise.resolve()}onClose(){return this.#e?.unmount(),this.#e=null,this.contentEl.empty(),Promise.resolve()}}class My extends te.MarkdownRenderChild{constructor(t,n,o,r){super(n),this.source=o,this.path=r,this.init(t)}_vueApp;mode;init(t){const n=this.source.split(`
`);for(const o of n){const[r,a]=o.split(":");r.trim()==="mode"&&(this.mode=a.trim())}this._vueApp=ro(pu,{mode:this.mode,path:this.path}),this._vueApp.provide(Fn,t),this._vueApp.mount(this.containerEl)}onunload(){this._vueApp?.unmount(),this._vueApp=void 0,this.containerEl.empty()}}class ma extends te.MarkdownRenderChild{constructor(t,n,o,r){super(n),this.source=o,this.path=r,this.init(t)}_vueApp;init(t){this._vueApp=ro(cu,{path:this.path}),this._vueApp.provide(Fn,t),this._vueApp.mount(this.containerEl)}onunload(){this._vueApp?.unmount(),this._vueApp=void 0,this.containerEl.empty()}}const Ay={key:0},Oy={class:"u-pop"},Ty={key:1},Fy=["value"],Ey={class:"u-pop"},Py={class:"u-pop"},Iy={class:"u-pop"},By={class:"u-pop"},Ry={class:"u-pop"},Yy=B({__name:"ConnectNote.modal",props:{path:{}},emits:["close"],setup(e,{emit:t}){const n=e,o=t,r=ve(),a=Wr(n.path),l=g(()=>r.notesManager.getNoteFilename(n.path)),s=g(()=>r.notesManager.getNoteFolder(n.path)),{defineField:i,errorBag:u,handleSubmit:c}=Sn({initialValues:{journalName:"",refDate:"",override:!1,rename:!1,move:!1},validationSchema:Vn(Pt({journalName:jt(tt(),en("Journal name is required")),refDate:jt(tt(),en("Date is required")),override:fn(),rename:fn(),move:fn()}))}),[m,y]=i("journalName"),[h,j]=i("refDate"),[C,$]=i("override"),[F,R]=i("rename"),[ne,M]=i("move");ut(h,()=>{C.value=!1,F.value=!1,ne.value=!1});const A=g(()=>m.value?r.getJournal(m.value):null),ae=g(()=>{if(A.value)return A.value.startDate}),de=g(()=>{if(A.value)return A.value.endDate}),oe=g(()=>!A.value||!h.value?null:A.value.resolveAnchorDate(h.value)),he=g(()=>!A.value||!oe.value?null:A.value.get(oe.value)),Ve=g(()=>!A.value||!h.value||!oe.value?null:r.index.get(A.value.name,oe.value)),Ee=g(()=>!he.value||!A.value?null:A.value.getConfiguredPathData(he.value)),gt=g(()=>{if(!Ee.value)return!1;const[,ue]=Ee.value;return l.value!==ue}),dt=g(()=>{if(!Ee.value)return!1;const[ue]=Ee.value;return s.value!==(ue??"/")}),Qe=g(()=>!(!A.value||!h.value||Ve.value&&!C.value));function Pe(){r.disconnectNote(n.path).catch(console.error)}const z=c(()=>{Qe.value&&oe.value&&(A.value?.connectNote(n.path,oe.value,{override:C.value,rename:F.value,move:ne.value}).catch(console.error),o("close"))});return(ue,H)=>b(a)?(p(),k("div",Ay,[d(N,{name:"Note is already connected"},{description:f(()=>[H[8]||(H[8]=_(" Journal: ")),v("b",Oy,I(b(a).journal),1)]),_:1}),d(N,null,{default:f(()=>[d(se,{onClick:H[0]||(H[0]=O=>ue.$emit("close"))},{default:f(()=>H[9]||(H[9]=[_("Cancel")])),_:1}),d(se,{cta:"",onClick:Pe},{default:f(()=>H[10]||(H[10]=[_("Disconnect")])),_:1})]),_:1})])):(p(),k("div",Ty,[_(I(ue.path)+" ",1),v("form",{onSubmit:H[7]||(H[7]=(...O)=>b(z)&&b(z)(...O))},[d(N,{name:"Journal"},{description:f(()=>[d(it,{errors:b(u).journalName},null,8,["errors"])]),default:f(()=>[d(Se,xe({modelValue:b(m),"onUpdate:modelValue":H[1]||(H[1]=O=>ce(m)?m.value=O:null)},b(y)),{default:f(()=>[(p(!0),k(W,null,Ce(b(r).journals,O=>(p(),k("option",{key:O.name,value:O.name},I(O.name),9,Fy))),128))]),_:1},16,["modelValue"])]),_:1}),b(m)?(p(),k(W,{key:0},[d(N,{name:"Date"},{description:f(()=>[d(it,{errors:b(u).refDate},null,8,["errors"])]),default:f(()=>[d(jo,xe({modelValue:b(h),"onUpdate:modelValue":H[2]||(H[2]=O=>ce(h)?h.value=O:null)},b(j),{min:ae.value,max:de.value}),null,16,["modelValue","min","max"])]),_:1}),Ve.value?(p(),E(N,{key:0,name:"Override?"},{description:f(()=>[H[11]||(H[11]=_(" Other note ")),v("b",Ey,I(Ve.value?.path),1),H[12]||(H[12]=_(" is connected to this date. It will be disconnected if override option is on. "))]),default:f(()=>[d(Ge,xe({modelValue:b(C),"onUpdate:modelValue":H[3]||(H[3]=O=>ce(C)?C.value=O:null)},b($)),null,16,["modelValue"])]),_:1})):U("",!0),gt.value?(p(),E(N,{key:1,name:"Rename?"},{description:f(()=>[H[13]||(H[13]=_(" Note name ")),v("b",Py,I(l.value),1),H[14]||(H[14]=_(" differs from journal note name config: ")),v("b",Iy,I(Ee.value?.[1]??""),1)]),default:f(()=>[d(Ge,xe({modelValue:b(F),"onUpdate:modelValue":H[4]||(H[4]=O=>ce(F)?F.value=O:null)},b(R)),null,16,["modelValue"])]),_:1})):U("",!0),dt.value?(p(),E(N,{key:2,name:"Move?"},{description:f(()=>[H[15]||(H[15]=_(" Note folder ")),v("b",By,I(s.value),1),H[16]||(H[16]=_(" differs from journal folder path config: ")),v("b",Ry,I(Ee.value?.[0]??""),1)]),default:f(()=>[d(Ge,xe({modelValue:b(ne),"onUpdate:modelValue":H[5]||(H[5]=O=>ce(ne)?ne.value=O:null)},b(M)),null,16,["modelValue"])]),_:1})):U("",!0)],64)):U("",!0),d(N,null,{default:f(()=>[d(se,{onClick:H[6]||(H[6]=O=>ue.$emit("close"))},{default:f(()=>H[17]||(H[17]=[_("Cancel")])),_:1}),d(se,{cta:"",type:"submit",disabled:!Qe.value},{default:f(()=>H[18]||(H[18]=[_("Connect")])),_:1},8,["disabled"])]),_:1})],32)]))}}),Uy="All journals";class Ly extends te.SuggestModal{constructor(t,n,o){super(t),this.shelves=n,this.callback=o}getSuggestions(t){return t=t.toLocaleLowerCase(),["All journals",...this.shelves.filter(n=>n.toLocaleLowerCase().contains(t))]}renderSuggestion(t,n){n.setText(t)}onChooseSuggestion(t){this.callback(t===Uy?null:t)}}class Wy extends te.MarkdownRenderChild{constructor(t,n,o,r){super(n),this.source=o,this.context=r,this.init(t)}_vueApp;init(t){const n=this.#e();this._vueApp=ro(Na,{path:this.context.sourcePath,config:n}),this._vueApp.provide(Fn,t),this._vueApp.mount(this.containerEl)}#e(){try{const t=this.source?te.parseYaml(this.source.replaceAll("	","  ")):{show:["day"]};return{show:t.show.filter(n=>["day","week","month","quarter","year","custom"].includes(n)),separator:t.separator||"  ",scale:t.scale||1,shelf:t.shelf}}catch(t){return console.error(t),{show:["day"],separator:"  ",scale:1}}}onunload(){this._vueApp?.unmount(),this._vueApp=void 0,this.containerEl.empty()}}function Jy(e){let t=!1,n=e;return"version"in n||(n=mm(n),t=!0),{migratedData:n,needsUser:t}}const qy=B({__name:"ConfirmNoteCreation.modal",props:{noteName:{},journalName:{}},emits:["confirm","close"],setup(e){return(t,n)=>(p(),k(W,null,[d(N,{name:"Journal"},{default:f(()=>[_(I(t.journalName),1)]),_:1}),d(N,{name:"Note"},{default:f(()=>[_(I(t.noteName),1)]),_:1}),d(N,null,{default:f(()=>[d(se,{onClick:n[0]||(n[0]=o=>t.$emit("confirm",!1))},{default:f(()=>n[2]||(n[2]=[_("Cancel")])),_:1}),d(se,{cta:"",onClick:n[1]||(n[1]=o=>t.$emit("confirm",!0))},{default:f(()=>n[3]||(n[3]=[_("Create")])),_:1})]),_:1})],64))}});class Hy{constructor(t){this.plugin=t,this.app=t.app}app;normalizePath(t){return te.normalizePath(t)}nodeExists(t){return!!this.app.vault.getAbstractFileByPath(t)}getNoteName(t){const n=this.app.vault.getAbstractFileByPath(t);return n?n instanceof te.TFile?n.basename:n.name:""}getNoteFilename(t){return this.app.vault.getAbstractFileByPath(t)?.name??""}getNoteFolder(t){return this.app.vault.getAbstractFileByPath(t)?.parent?.path??""}async confirmNoteCreation(t,n){return new Promise(o=>{const r=new Fe(this.plugin,"About to create a new note",qy,{journalName:t,noteName:n,onConfirm(a){r.close(),o(a)},onClose(){r.close(),o(!1)}},400);r.open()})}async createNote(t,n){await this.#e(t),await this.app.vault.create(t,n)}async updateNote(t,n){const o=this.app.vault.getAbstractFileByPath(t);o&&o instanceof te.TFile&&await this.app.vault.modify(o,n)}async appendNote(t,n){const o=this.app.vault.getAbstractFileByPath(t);o&&o instanceof te.TFile&&await this.app.vault.append(o,n)}async renameNote(t,n){const o=this.app.vault.getAbstractFileByPath(t);o&&o instanceof te.TFile&&(await this.#e(n),await this.app.vault.rename(o,n))}getMarkdownFiles(){return this.app.vault.getMarkdownFiles()}getNotesInFolder(t){const n=this.app.vault.getFolderByPath(t||"/");if(!n)throw new Error(`Folder ${t} not found`);const o=[],r=[n];for(;r.length>0;){const a=r.shift();if(!a)break;for(const l of a.children)l instanceof te.TFile?o.push(l.path):l instanceof te.TFolder&&r.push(l)}return o}getNoteMetadata(t){return this.app.metadataCache.getCache(t)}async openNote(t,n){const o=this.findOpenedNote(t);if(o)return this.app.workspace.setActiveLeaf(o,{focus:!0});const r=this.app.vault.getAbstractFileByPath(t);if(!r||!(r instanceof te.TFile))return;await this.app.workspace.getLeaf(n).openFile(r,{active:!0})}findOpenedNote(t){for(const n of this.app.workspace.getLeavesOfType("markdown")){const{file:o}=n.view;if(o&&o.path===t)return n}return null}async getNoteContent(t){const n=this.app.vault.getAbstractFileByPath(t);return!n||!(n instanceof te.TFile)?"":this.app.vault.read(n)}async updateNoteFrontmatter(t,n){const o=this.app.vault.getAbstractFileByPath(t);o&&o instanceof te.TFile&&await this.app.fileManager.processFrontMatter(o,r=>{n(r)})}async deleteNote(t){const n=this.app.vault.getAbstractFileByPath(t);n&&n instanceof te.TFile&&await this.app.vault.delete(n)}async tryApplyingTemplater(t,n,o){const r=this.app.vault.getAbstractFileByPath(t);if(!r||!(r instanceof te.TFile))return o;const a=this.app.vault.getAbstractFileByPath(n);return!a||!(a instanceof te.TFile)?o:Gv(this.app,r,a,o)}async tryTemplaterCursorJump(t){const n=this.app.vault.getAbstractFileByPath(t);return!n||!(n instanceof te.TFile)?!1:await zv(this.app,n)}async#e(t){if(!t)return;const n=t.split("/");if(t.endsWith(".md")&&n.pop(),n.length>0){const o=n.join("/");this.app.vault.getAbstractFileByPath(o)||await this.app.vault.createFolder(o)}}}class Ky{constructor(t){this.plugin=t}#e=new Map;addCommand(t,n,o){this.plugin.addCommand({id:this.#n(t+":"+n.name),name:`${t}: ${n.name}`,icon:n.icon,checkCallback:o})}removeCommand(t,n){this.plugin.removeCommand(this.#n(t+":"+n.name))}addRibbonIcon(t,n,o,r){const a=this.#n("journals:"+t+":"+o),l=this.plugin.app.workspace.leftRibbon.addRibbonItemButton(a,n,o,r);return this.#e.set(a,l),a}removeRibbonIcon(t,n){const o=this.#n("journals:"+t+":"+n);return this.plugin.app.workspace.leftRibbon.removeRibbonAction(o),this.#e.get(o)?.detach(),this.#e.delete(o),o}#n(t){return t.replaceAll(/\s/gi,"-").toLocaleLowerCase()}dispose(){for(const t of this.#e.values())t.detach();this.#e.clear()}}class zy extends te.Plugin{#e=[];#n=La({});#o=new by;#r=ie(null);#t=ie(Vt(Ki));#a;#l=new Hy(this);#i=new Ky(this);#s=!1;get hasMigrations(){return this.#t.value.pendingMigrations.length>0}get notesManager(){return this.#l}get appManager(){return this.#i}get showReloadHint(){return this.#t.value.showReloadHint}get index(){return this.#o}get activeNote(){return this.#r.value}get usesShelves(){return this.#t.value.useShelves}set usesShelves(t){this.#t.value.useShelves=t}get openOnStartup(){return this.#t.value.openOnStartup}set openOnStartup(t){this.#t.value.openOnStartup=t}get calendarSettings(){return this.#t.value.calendar}get calendarViewSettings(){return this.#t.value.calendarView}get uiSettings(){return this.#t.value.ui}get pendingMigrations(){return this.#t.value.pendingMigrations}get shelves(){return Object.values(this.#t.value.shelves).sort((t,n)=>t.name.localeCompare(n.name))}getShelf(t){return this.#t.value.shelves[t]}get journals(){return Object.values(this.#n.value).sort((t,n)=>t.name.localeCompare(n.name))}hasJournal(t){return t in this.#n.value}getJournal(t){return this.#n.value[t]}getJournalConfig(t){return this.#t.value.journals[t]}createJournal(t,n){const o=Vt({...al,...ll(n),name:t,write:n});return this.#t.value.journals[t]=o,this.#n.value={...this.#n.value,[t]:new lr(t,g(()=>this.#t.value.journals[t]),this.#o,this.#i,this.#l,this.#r)},this.getJournal(t)?.autoCreate().catch(console.error),this.#t.value.journals[t]}registerJournal(t){if(t.name in this.#t.value.journals)throw new Error("Name already used");this.#t.value.journals[t.name]=t;const n=new lr(t.name,g(()=>this.#t.value.journals[t.name]),this.#o,this.#i,this.#l,this.#r);if(this.#n.value={...this.#n.value,[t.name]:n},t.shelves.length>0)for(const o of t.shelves)this.#t.value.shelves[o].journals.push(t.name);return n}async renameJournal(t,n){const o=this.getJournal(t);if(!o)return;o.dispose(),this.#t.value.journals[n]=this.#t.value.journals[t],this.#t.value.journals[n].name=n,delete this.#t.value.journals[t];for(const i of this.#t.value.journals[n].shelves)this.#t.value.shelves[i].journals=this.#t.value.shelves[i].journals.map(u=>u===t?n:u);const{[t]:r,...a}=this.#n.value,l=new lr(n,g(()=>this.#t.value.journals[n]),this.#o,this.#i,this.#l,this.#r);this.#n.value={...a,[n]:l},l.registerCommands(),this.#t.value.openOnStartup===t&&(this.#t.value.openOnStartup=n);const s=this.#o.getJournalIndex(t);if(s)for(const[,i]of s)await this.#l.updateNoteFrontmatter(i,u=>{u[st]=n})}async removeJournal(t,n){const o=this.getJournal(t);if(!o)return;switch(n){case"clear":{await o.clearNotes();break}case"delete":{await o.deleteNotes();break}}o.dispose();const{[t]:r,...a}=this.#n.value;this.#n.value=a;for(const l of this.#t.value.journals[t].shelves)this.#t.value.shelves[l].journals=this.#t.value.shelves[l].journals.filter(s=>s!==t);delete this.#t.value.journals[t],this.#t.value.openOnStartup===t&&(this.#t.value.openOnStartup="")}moveJournal(t,n){const o=this.getJournal(t);if(!o)return;const r=o.shelfName;r&&(this.#t.value.shelves[r].journals=this.#t.value.shelves[r].journals.filter(a=>a!==t)),n?(this.#t.value.shelves[n].journals.push(t),this.#t.value.journals[t].shelves=[n]):this.#t.value.journals[t].shelves=[]}requestReloadHint(){this.#t.value.showReloadHint=!0}placeCalendarView(t=!1){if(this.app.workspace.getLeavesOfType(on).length>0){if(!t)return;for(const n of this.app.workspace.getLeavesOfType(on))n.detach()}this.#t.value.calendarView.leaf==="left"?this.app.workspace.getLeftLeaf(!1)?.setViewState({type:on}).catch(console.error):this.app.workspace.getRightLeaf(!1)?.setViewState({type:on}).catch(console.error)}hasShelf(t){return t in this.#t.value.shelves}createShelf(t){this.#t.value.shelves[t]={name:t,journals:[]}}renameShelf(t,n){this.#t.value.shelves[n]=this.#t.value.shelves[t],this.#t.value.shelves[n].name=n;for(const o of this.#t.value.shelves[n].journals)this.#t.value.journals[o].shelves=this.#t.value.journals[o].shelves.map(r=>r===t?n:r);delete this.#t.value.shelves[t]}removeShelf(t,n){for(const o of this.#t.value.shelves[t].journals)this.#t.value.journals[o].shelves=n?this.#t.value.journals[o].shelves.map(r=>r===t?n:r):this.#t.value.journals[o].shelves.filter(r=>r!==t);delete this.#t.value.shelves[t]}async onload(){const t=!this.app.workspace.layoutReady;await this.#c(),Uc(),this.#t.value.calendar.dow===-1?Ci():_i(this.#t.value.calendar.dow,this.#t.value.calendar.doy),this.#m(),this.#d(),this.#t.value.showReloadHint&&(this.#t.value.showReloadHint=!1),this.#v(),this.addSettingTab(new gy(this.app,this)),this.registerMarkdownCodeBlockProcessor("calendar-timeline",(n,o,r)=>{const a=new My(this,o,n,r.sourcePath);r.addChild(a)}),this.registerMarkdownCodeBlockProcessor("calendar-nav",(n,o,r)=>{const a=new ma(this,o,n,r.sourcePath);r.addChild(a)}),this.registerMarkdownCodeBlockProcessor("interval-nav",(n,o,r)=>{const a=new ma(this,o,n,r.sourcePath);r.addChild(a)}),this.registerMarkdownCodeBlockProcessor("journal-nav",(n,o,r)=>{const a=new ma(this,o,n,r.sourcePath);r.addChild(a)}),this.registerMarkdownCodeBlockProcessor("journals-home",(n,o,r)=>{const a=new Wy(this,o,n,r);r.addChild(a)}),this.registerView(on,n=>new Ny(n,this)),this.app.workspace.onLayoutReady(async()=>{this.reprocessNotes(),this.placeCalendarView(),this.#r.value=this.app.workspace.getActiveFile()?.path??null,await this.autoCreateNotes(),t&&await this.openStartupNote(),this.#s&&(this.#u(),this.#s=!1)})}onunload(){clearTimeout(this.#a);for(const t of this.#e)t();for(const t of this.app.workspace.getLeavesOfType(on))t.detach();for(const t of this.journals)t.dispose()}reprocessNotes(){const t=this.#l.getMarkdownFiles();for(const n of t)this.#f(n)}async autoCreateNotes(){for(const t of Object.values(this.#n.value))await t.autoCreate();this.#p()}async openStartupNote(){const t=this.#t.value.openOnStartup;t&&this.getJournal(t)&&await zn(this,Ne().format(we),t)}async disconnectNote(t){const n=this.#l.getNoteMetadata(t);if(!n)return;const{frontmatter:o}=n;if(!o)return;const r=o[st];if(!r)return;const a=this.getJournal(r);if(a)await a.disconnectNote(t);else return this.#l.updateNoteFrontmatter(t,l=>{delete l[st],delete l[Br],delete l[Xt],delete l[cn],delete l[Rr]})}#p(){clearTimeout(this.#a),this.#a=setTimeout(()=>{this.autoCreateNotes().catch(console.error)},lf)}async#c(){const t=await this.loadData();if(t)if((t.version??1)===Hi)this.#t.value=t;else{const{migratedData:o,needsUser:r}=Jy(t);this.#t.value=o,await this.saveData(o).catch(console.error),this.#s=r}}#u(){new Fe(this,"Migrate Journals plugin data to v2",Xi).open()}#m(){const t={};for(const n of Object.keys(this.#t.value.journals))t[n]=new lr(n,g(()=>this.#t.value.journals[n]),this.#o,this.#i,this.#l,this.#r);this.#n.value=t}#d(){this.#e.push(ut(this.#t,Pc(t=>{this.saveData(t).catch(console.error)},50),{deep:!0}),ut(()=>this.#t.value.calendarView.leaf,()=>{this.placeCalendarView(!0)})),this.registerEvent(this.app.workspace.on("file-open",t=>{this.#r.value=t?.path??null})),this.registerEvent(this.app.vault.on("rename",(t,n)=>{t instanceof te.TFile&&this.index.transferPathData(n,t.path,t.basename)})),this.registerEvent(this.app.vault.on("delete",t=>{t instanceof te.TFile&&this.index.clearForPath(t.path)})),this.registerEvent(this.app.metadataCache.on("changed",t=>{this.#f(t)}))}#f(t){const n=this.#l.getNoteMetadata(t.path);if(!n)return;const{frontmatter:o}=n;if(!o||!(st in o))return;const r=o[st],a=this.getJournal(r);a&&this.index.updateFromMetadata(a,t.basename,t.path,n)}#v(){this.addCommand({id:"open-next",name:"Open next note",editorCallback:async(t,n)=>{const o=n.file;if(!o)return;const r=this.#o.getForPath(o.path);if(!r){new te.Notice("This note is not connected to any journal.");return}const a=this.getJournal(r.journal);if(!a){new te.Notice("Unknown journal.");return}const l=a.next(r.date,!0);if(!l){new te.Notice("There is no next note after this one.");return}await a.open(l)}}),this.addCommand({id:"open-prev",name:"Open previous note",editorCallback:async(t,n)=>{const o=n.file;if(!o)return;const r=this.#o.getForPath(o.path);if(!r){new te.Notice("This note is not connected to any journal.");return}const a=this.getJournal(r.journal);if(!a){new te.Notice("Unknown journal.");return}const l=a.previous(r.date,!0);if(!l){new te.Notice("There is no previous note before this one.");return}await a.open(l)}}),this.addCommand({id:"connect-note",name:"Connect note to a journal",editorCallback:(t,n)=>{const o=n.file;o&&new Fe(this,"Connect note to a journal",Yy,{path:o.path}).open()}}),this.addCommand({id:"open-calendar",name:"Open calendar",callback:()=>{let[t]=this.app.workspace.getLeavesOfType(on);t||(this.placeCalendarView(),t=this.app.workspace.getLeavesOfType(on)[0]),this.app.workspace.revealLeaf(t).catch(console.error)}});for(const t of Object.values(this.#n.value))t.registerCommands();this.addCommand({id:"change-calendar-shelf",name:"Change calendar view shelf",checkCallback:t=>t?this.#t.value.useShelves&&Object.values(this.#t.value.shelves).length>0:(new Ly(this.app,Object.keys(this.#t.value.shelves),n=>{this.#t.value.ui.calendarShelf=n}).open(),!0)})}}exports.default=zy;

/* nosourcemap */